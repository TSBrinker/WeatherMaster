/*! For license information please see main.479dde38.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var a=n(43),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,i={},c=null,u=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,p(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,a){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=a;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var D=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,r,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return o=o(l=e),e=""===i?"."+M(l,0):i,x(o)?(r="",null!=e&&(r=e.replace(D,"$&/")+"/"),j(o,t,r,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(D,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+M(s=e[c],c);l+=j(s,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=j(s=s.value,t,r,u=i+M(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,n){if(null==e)return e;var a=[],r=0;return j(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},P={transition:null},F={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function z(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=z,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=z,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<i(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,o=r>>>1;a<o;){var s=2*(a+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<r&&0>i(u,l)?(e[a]=u,e[c]=n,a=c):(e[a]=l,e[s]=n,a=s);else{if(!(c<r&&0>i(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,m=null,h=3,f=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=a(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=a(u)}}function x(e){if(g=!1,w(e),!p)if(null!==a(c))p=!0,P(S);else{var t=a(u);null!==t&&F(x,t.startTime-e)}}function S(e,n){p=!1,g&&(g=!1,y(T),T=-1),f=!0;var i=h;try{for(w(n),m=a(c);null!==m&&(!(m.expirationTime>n)||e&&!j());){var o=m.callback;if("function"===typeof o){m.callback=null,h=m.priorityLevel;var s=o(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?m.callback=s:m===a(c)&&r(c),w(n)}else r(c);m=a(c)}if(null!==m)var l=!0;else{var d=a(u);null!==d&&F(x,d.startTime-n),l=!1}return l}finally{m=null,h=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,N=null,T=-1,D=5,M=-1;function j(){return!(t.unstable_now()-M<D)}function E(){if(null!==N){var e=t.unstable_now();M=e;var n=!0;try{n=N(!0,e)}finally{n?k():(C=!1,N=null)}}else C=!1}if("function"===typeof b)k=function(){b(E)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,I=R.port2;R.port1.onmessage=E,k=function(){I.postMessage(null)}}else k=function(){v(E,0)};function P(e){N=e,C||(C=!0,k())}function F(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===a(c)&&e===a(u)&&(g?(y(T),T=-1):g=!0,F(x,i-o))):(e.sortIndex=s,n(c,e),p||f||(p=!0,P(S))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},391:(e,t,n)=>{var a=n(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var a=n(43),r=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function p(e,t,n,a,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!d.call(f,e)||!d.call(h,e)&&(m.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var L,_=Object.assign;function H(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var W=!1;function B(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),i=a.stack.split("\n"),o=r.length-1,s=i.length-1;1<=o&&0<=s&&r[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==i[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function A(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function O(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case N:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case D:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return _({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=U(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return _({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function ie(e,t){var n=U(t.value),a=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=pe(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(he).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ve=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ce=null;function Ne(e){if(e=br(e)){if("function"!==typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=xr(t),Se(e.stateNode,e.type,t))}}function Te(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function De(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Me(e,t){return e(t)}function je(){}var Ee=!1;function Re(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Me(e,t,n)}finally{Ee=!1,(null!==ke||null!==Ce)&&(je(),De())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var a=xr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(ue){Pe=!1}function ze(e,t,n,a,r,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,_e=null,He=!1,We=null,Be={onError:function(e){Le=!0,_e=e}};function Ae(e,t,n,a,r,i,o,s,l){Le=!1,_e=null,ze.apply(Be,arguments)}function Oe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(Oe(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Oe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(a=r.return)){n=a;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ue(r),e;if(o===a)return Ue(r),t;o=o.sibling}throw Error(i(188))}if(n.return!==a.return)n=r,a=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,a=o;break}if(l===a){s=!0,a=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,a=r;break}if(l===a){s=!0,a=o,n=r;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==a)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Je=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?a=dt(s):0!==(i&=o)&&(a=dt(i))}else 0!==(o=n&~r)?a=dt(o):0!==i&&(a=dt(i));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-ot(t)),a|=e[n],t&=~r;return a}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ot(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,kt,Ct,Nt,Tt=!1,Dt=[],Mt=null,jt=null,Et=null,Rt=new Map,It=new Map,Pt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Lt(e,t,n,a,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&St(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function _t(e){var t=yr(e.target);if(null!==t){var n=Oe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Nt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ht(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&St(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);we=a,n.target.dispatchEvent(a),we=null,t.shift()}return!0}function Wt(e,t,n){Ht(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Mt&&Ht(Mt)&&(Mt=null),null!==jt&&Ht(jt)&&(jt=null),null!==Et&&Ht(Et)&&(Et=null),Rt.forEach(Wt),It.forEach(Wt)}function At(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ot(e){function t(t){return At(t,e)}if(0<Dt.length){At(Dt[0],e);for(var n=1;n<Dt.length;n++){var a=Dt[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Mt&&At(Mt,e),null!==jt&&At(jt,e),null!==Et&&At(Et,e),Rt.forEach(t),It.forEach(t),n=0;n<Pt.length;n++)(a=Pt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)_t(n),null===n.blockedOn&&Pt.shift()}var $t=w.ReactCurrentBatchConfig,Ut=!0;function Vt(e,t,n,a){var r=bt,i=$t.transition;$t.transition=null;try{bt=1,Yt(e,t,n,a)}finally{bt=r,$t.transition=i}}function qt(e,t,n,a){var r=bt,i=$t.transition;$t.transition=null;try{bt=4,Yt(e,t,n,a)}finally{bt=r,$t.transition=i}}function Yt(e,t,n,a){if(Ut){var r=Qt(e,t,n,a);if(null===r)Ua(e,t,a,Gt,n),zt(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Mt=Lt(Mt,e,t,n,a,r),!0;case"dragenter":return jt=Lt(jt,e,t,n,a,r),!0;case"mouseover":return Et=Lt(Et,e,t,n,a,r),!0;case"pointerover":var i=r.pointerId;return Rt.set(i,Lt(Rt.get(i)||null,e,t,n,a,r)),!0;case"gotpointercapture":return i=r.pointerId,It.set(i,Lt(It.get(i)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(zt(e,a),4&t&&-1<Ft.indexOf(e)){for(;null!==r;){var i=br(r);if(null!==i&&xt(i),null===(i=Qt(e,t,n,a))&&Ua(e,t,a,Gt,n),i===r)break;r=i}null!==r&&a.stopPropagation()}else Ua(e,t,a,null,n)}}var Gt=null;function Qt(e,t,n,a){if(Gt=null,null!==(e=yr(e=xe(a))))if(null===(t=Oe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,a=n.length,r="value"in Jt?Jt.value:Jt.textContent,i=r.length;for(e=0;e<a&&n[e]===r[e];e++);var o=a-e;for(t=1;t<=o&&n[a-t]===r[i-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,i){for(var o in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),dn=_({},cn,{view:0,detail:0}),mn=rn(dn),hn=_({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(hn),pn=rn(_({},hn,{dataTransfer:0})),gn=rn(_({},dn,{relatedTarget:0})),vn=rn(_({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=_({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(yn),wn=rn(_({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Nn(){return Cn}var Tn=_({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=rn(Tn),Mn=rn(_({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=rn(_({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),En=rn(_({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=_({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=rn(Rn),Pn=[9,13,27,32],Fn=u&&"CompositionEvent"in window,zn=null;u&&"documentMode"in document&&(zn=document.documentMode);var Ln=u&&"TextEvent"in window&&!zn,_n=u&&(!Fn||zn&&8<zn&&11>=zn),Hn=String.fromCharCode(32),Wn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Vn(e,t,n,a){Te(a),0<(t=qa(t,"onChange")).length&&(n=new un("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Gn(e){Ha(e,0)}function Qn(e){if(Y(wr(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Zn="function"===typeof ea.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function ta(){qn&&(qn.detachEvent("onpropertychange",na),Yn=qn=null)}function na(e){if("value"===e.propertyName&&Qn(Yn)){var t=[];Vn(t,Yn,e,xe(e)),Re(Gn,t)}}function aa(e,t,n){"focusin"===e?(ta(),Yn=n,(qn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Yn)}function ia(e,t){if("click"===e)return Qn(t)}function oa(e,t){if("input"===e||"change"===e)return Qn(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!d.call(t,r)||!sa(e[r],t[r]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ua(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ma(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fa(e){var t=ma(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&da(n.ownerDocument.documentElement,n)){if(null!==a&&ha(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(a.start,r);a=void 0===a.end?i:Math.min(a.end,r),!e.extend&&i>a&&(r=a,a=i,i=r),r=ua(n,i);var o=ua(n,a);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pa=u&&"documentMode"in document&&11>=document.documentMode,ga=null,va=null,ya=null,ba=!1;function wa(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ba||null==ga||ga!==G(a)||("selectionStart"in(a=ga)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ya&&la(ya,a)||(ya=a,0<(a=qa(va,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function xa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sa={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},ka={},Ca={};function Na(e){if(ka[e])return ka[e];if(!Sa[e])return e;var t,n=Sa[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ca)return ka[e]=n[t];return e}u&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);var Ta=Na("animationend"),Da=Na("animationiteration"),Ma=Na("animationstart"),ja=Na("transitionend"),Ea=new Map,Ra="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(e,t){Ea.set(e,t),l(t,[e])}for(var Pa=0;Pa<Ra.length;Pa++){var Fa=Ra[Pa];Ia(Fa.toLowerCase(),"on"+(Fa[0].toUpperCase()+Fa.slice(1)))}Ia(Ta,"onAnimationEnd"),Ia(Da,"onAnimationIteration"),Ia(Ma,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(ja,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),La=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function _a(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,o,s,l,c){if(Ae.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=_e;Le=!1,_e=null,He||(He=!0,We=u)}}(a,t,void 0,e),e.currentTarget=null}function Ha(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var s=a[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&r.isPropagationStopped())break e;_a(r,s,c),i=l}else for(o=0;o<a.length;o++){if(l=(s=a[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&r.isPropagationStopped())break e;_a(r,s,c),i=l}}}if(He)throw e=We,He=!1,We=null,e}function Wa(e,t){var n=t[pr];void 0===n&&(n=t[pr]=new Set);var a=e+"__bubble";n.has(a)||($a(t,e,2,!1),n.add(a))}function Ba(e,t,n){var a=0;t&&(a|=4),$a(n,e,a,t)}var Aa="_reactListening"+Math.random().toString(36).slice(2);function Oa(e){if(!e[Aa]){e[Aa]=!0,o.forEach((function(t){"selectionchange"!==t&&(La.has(t)||Ba(t,!1,e),Ba(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Aa]||(t[Aa]=!0,Ba("selectionchange",!1,t))}}function $a(e,t,n,a){switch(Kt(t)){case 1:var r=Vt;break;case 4:r=qt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ua(e,t,n,a,r){var i=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var o=a.tag;if(3===o||4===o){var s=a.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=a.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=yr(s)))return;if(5===(l=o.tag)||6===l){a=i=o;continue e}s=s.parentNode}}a=a.return}Re((function(){var a=i,r=xe(n),o=[];e:{var s=Ea.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Dn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case Ta:case Da:case Ma:l=vn;break;case ja:l=En;break;case"scroll":l=mn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,m=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=a;null!==f;){var p=(h=f).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==m&&(null!=(p=Ie(f,m))&&u.push(Va(f,p,h)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,r),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(d=Oe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(u=fn,p="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,p="onPointerLeave",m="onPointerEnter",f="pointer"),d=null==l?s:wr(l),h=null==c?s:wr(c),(s=new u(p,f+"leave",l,n,r)).target=d,s.relatedTarget=h,p=null,yr(r)===a&&((u=new u(m,f+"enter",c,n,r)).target=h,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(m=c,f=0,h=u=l;h;h=Ya(h))f++;for(h=0,p=m;p;p=Ya(p))h++;for(;0<f-h;)u=Ya(u),f--;for(;0<h-f;)m=Ya(m),h--;for(;f--;){if(u===m||null!==m&&u===m.alternate)break e;u=Ya(u),m=Ya(m)}u=null}else u=null;null!==l&&Ga(o,s,l,u,!1),null!==c&&null!==d&&Ga(o,d,c,u,!0)}if("select"===(l=(s=a?wr(a):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Un(s))if(Jn)g=oa;else{g=ra;var v=aa}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ia);switch(g&&(g=g(e,a))?Vn(o,g,n,r):(v&&v(e,s,a),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=a?wr(a):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(ga=v,va=a,ya=null);break;case"focusout":ya=va=ga=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,wa(o,n,r);break;case"selectionchange":if(pa)break;case"keydown":case"keyup":wa(o,n,r)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else On?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(_n&&"ko"!==n.locale&&(On||"onCompositionStart"!==b?"onCompositionEnd"===b&&On&&(y=en()):(Xt="value"in(Jt=r)?Jt.value:Jt.textContent,On=!0)),0<(v=qa(a,b)).length&&(b=new wn(b,e,null,n,r),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=An(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Wn=!0,Hn);case"textInput":return(e=t.data)===Hn&&Wn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Fn&&Bn(e,t)?(e=en(),Zt=Xt=Jt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=qa(a,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:a}),r.data=y))}Ha(o,t)}))}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qa(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=Ie(e,n))&&a.unshift(Va(e,i,r)),null!=(i=Ie(e,t))&&a.push(Va(e,i,r))),e=e.return}return a}function Ya(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ga(e,t,n,a,r){for(var i=t._reactName,o=[];null!==n&&n!==a;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===a)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Ie(n,i))&&o.unshift(Va(n,l,s)):r||null!=(l=Ie(n,i))&&o.push(Va(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qa=/\r\n?/g,Ka=/\u0000|\uFFFD/g;function Ja(e){return("string"===typeof e?e:""+e).replace(Qa,"\n").replace(Ka,"")}function Xa(e,t,n){if(t=Ja(t),Ja(e)!==t&&n)throw Error(i(425))}function Za(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ir="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ir?function(e){return ir.resolve(null).then(e).catch(sr)}:ar;function sr(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void Ot(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);Ot(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),mr="__reactFiber$"+dr,hr="__reactProps$"+dr,fr="__reactContainer$"+dr,pr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function yr(e){var t=e[mr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[mr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[mr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[mr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xr(e){return e[hr]||null}var Sr=[],kr=-1;function Cr(e){return{current:e}}function Nr(e){0>kr||(e.current=Sr[kr],Sr[kr]=null,kr--)}function Tr(e,t){kr++,Sr[kr]=e.current,e.current=t}var Dr={},Mr=Cr(Dr),jr=Cr(!1),Er=Dr;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Dr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(){Nr(jr),Nr(Mr)}function Fr(e,t,n){if(Mr.current!==Dr)throw Error(i(168));Tr(Mr,t),Tr(jr,n)}function zr(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(i(108,$(e)||"Unknown",r));return _({},n,a)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,Er=Mr.current,Tr(Mr,e),Tr(jr,jr.current),!0}function _r(e,t,n){var a=e.stateNode;if(!a)throw Error(i(169));n?(e=zr(e,t,Er),a.__reactInternalMemoizedMergedChildContext=e,Nr(jr),Nr(Mr),Tr(Mr,e)):Nr(jr),Tr(jr,n)}var Hr=null,Wr=!1,Br=!1;function Ar(e){null===Hr?Hr=[e]:Hr.push(e)}function Or(){if(!Br&&null!==Hr){Br=!0;var e=0,t=bt;try{var n=Hr;for(bt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Hr=null,Wr=!1}catch(r){throw null!==Hr&&(Hr=Hr.slice(e+1)),Ye(Ze,Or),r}finally{bt=t,Br=!1}}return null}var $r=[],Ur=0,Vr=null,qr=0,Yr=[],Gr=0,Qr=null,Kr=1,Jr="";function Xr(e,t){$r[Ur++]=qr,$r[Ur++]=Vr,Vr=e,qr=t}function Zr(e,t,n){Yr[Gr++]=Kr,Yr[Gr++]=Jr,Yr[Gr++]=Qr,Qr=e;var a=Kr;e=Jr;var r=32-ot(a)-1;a&=~(1<<r),n+=1;var i=32-ot(t)+r;if(30<i){var o=r-r%5;i=(a&(1<<o)-1).toString(32),a>>=o,r-=o,Kr=1<<32-ot(t)+r|n<<r|a,Jr=i+e}else Kr=1<<i|n<<r|a,Jr=e}function ei(e){null!==e.return&&(Xr(e,1),Zr(e,1,0))}function ti(e){for(;e===Vr;)Vr=$r[--Ur],$r[Ur]=null,qr=$r[--Ur],$r[Ur]=null;for(;e===Qr;)Qr=Yr[--Gr],Yr[Gr]=null,Jr=Yr[--Gr],Yr[Gr]=null,Kr=Yr[--Gr],Yr[Gr]=null}var ni=null,ai=null,ri=!1,ii=null;function oi(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ai=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ai=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qr?{id:Kr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ai=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ri){var t=ai;if(t){var n=t;if(!si(e,t)){if(li(e))throw Error(i(418));t=cr(n.nextSibling);var a=ni;t&&si(e,t)?oi(a,n):(e.flags=-4097&e.flags|2,ri=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ri=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ri)return ui(e),ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=ai)){if(li(e))throw mi(),Error(i(418));for(;t;)oi(e,t),t=cr(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ai=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ai=null}}else ai=ni?cr(e.stateNode.nextSibling):null;return!0}function mi(){for(var e=ai;e;)e=cr(e.nextSibling)}function hi(){ai=ni=null,ri=!1}function fi(e){null===ii?ii=[e]:ii.push(e)}var pi=w.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var a=n.stateNode}if(!a)throw Error(i(147,e));var r=a,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=_c(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var i=n.type;return i===k?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===I&&yi(i)===t.type)?((a=r(t,n.props)).ref=gi(e,t,n),a.return=e,a):((a=Fc(n.type,n.key,n.props,null,e.mode,a)).ref=gi(e,t,n),a.return=e,a)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hc(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,a,i){return null===t||7!==t.tag?((t=zc(n,e.mode,a,i)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=_c(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case S:return(t=Hc(t,e.mode,n)).return=e,t;case I:return m(e,(0,t._init)(t._payload),n)}if(te(t)||z(t))return(t=zc(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function h(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(e,t,n,a):null;case S:return n.key===r?u(e,t,n,a):null;case I:return h(e,t,(r=n._init)(n._payload),a)}if(te(n)||z(n))return null!==r?null:d(e,t,n,a,null);vi(e,n)}return null}function f(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case x:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case S:return u(t,e=e.get(null===a.key?n:a.key)||null,a,r);case I:return f(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||z(a))return d(t,e=e.get(n)||null,a,r,null);vi(t,a)}return null}function p(r,i,s,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<s.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=h(r,d,s[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),i=o(v,i,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===s.length)return n(r,d),ri&&Xr(r,p),c;if(null===d){for(;p<s.length;p++)null!==(d=m(r,s[p],l))&&(i=o(d,i,p),null===u?c=d:u.sibling=d,u=d);return ri&&Xr(r,p),c}for(d=a(r,d);p<s.length;p++)null!==(g=f(d,r,p,s[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=o(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),ri&&Xr(r,p),c}function g(r,s,l,c){var u=z(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=s,g=s=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var b=h(r,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(r,p),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(r,p),ri&&Xr(r,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=m(r,y.value,c))&&(s=o(y,s,g),null===d?u=y:d.sibling=y,d=y);return ri&&Xr(r,g),u}for(p=a(r,p);!y.done;g++,y=l.next())null!==(y=f(p,r,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach((function(e){return t(r,e)})),ri&&Xr(r,g),u}return function e(a,i,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=i;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(a,u.sibling),(i=r(u,o.props.children)).return=a,a=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&yi(c)===u.type){n(a,u.sibling),(i=r(u,o.props)).ref=gi(a,u,o),i.return=a,a=i;break e}n(a,u);break}t(a,u),u=u.sibling}o.type===k?((i=zc(o.props.children,a.mode,l,o.key)).return=a,a=i):((l=Fc(o.type,o.key,o.props,null,a.mode,l)).ref=gi(a,i,o),l.return=a,a=l)}return s(a);case S:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(a,i.sibling),(i=r(i,o.children||[])).return=a,a=i;break e}n(a,i);break}t(a,i),i=i.sibling}(i=Hc(o,a.mode,l)).return=a,a=i}return s(a);case I:return e(a,i,(u=o._init)(o._payload),l)}if(te(o))return p(a,i,o,l);if(z(o))return g(a,i,o,l);vi(a,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(a,i.sibling),(i=r(i,o)).return=a,a=i):(n(a,i),(i=_c(o,a.mode,l)).return=a,a=i),s(a)):n(a,i)}}var wi=bi(!0),xi=bi(!1),Si=Cr(null),ki=null,Ci=null,Ni=null;function Ti(){Ni=Ci=ki=null}function Di(e){var t=Si.current;Nr(Si),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){ki=e,Ni=Ci=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===Ci){if(null===ki)throw Error(i(308));Ci=e,ki.dependencies={lanes:0,firstContext:e}}else Ci=Ci.next=e;return t}var Ri=null;function Ii(e){null===Ri?Ri=[e]:Ri.push(e)}function Pi(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,Ii(t)):(n.next=r.next,r.next=n),t.interleaved=n,Fi(e,a)}function Fi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var zi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _i(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wi(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Ml)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Fi(e,n)}return null===(r=a.interleaved)?(t.next=t,Ii(a)):(t.next=r.next,r.next=t),a.interleaved=t,Fi(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ai(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Oi(e,t,n,a){var r=e.updateQueue;zi=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=r.baseState;for(o=0,u=c=l=null,s=i;;){var m=s.lane,h=s.eventTime;if((a&m)===m){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,p=s;switch(m=t,h=n,p.tag){case 1:if("function"===typeof(f=p.payload)){d=f.call(h,d,m);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=p.payload)?f.call(h,d,m):f)||void 0===m)break e;d=_({},d,m);break e;case 2:zi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(m=r.effects)?r.effects=[s]:m.push(s))}else h={eventTime:h,lane:m,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,o|=m;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(m=s).next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=d}}function $i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(i(191,r));r.call(a)}}}var Ui={},Vi=Cr(Ui),qi=Cr(Ui),Yi=Cr(Ui);function Gi(e){if(e===Ui)throw Error(i(174));return e}function Qi(e,t){switch(Tr(Yi,t),Tr(qi,e),Tr(Vi,Ui),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Nr(Vi),Tr(Vi,t)}function Ki(){Nr(Vi),Nr(qi),Nr(Yi)}function Ji(e){Gi(Yi.current);var t=Gi(Vi.current),n=le(t,e.type);t!==n&&(Tr(qi,e),Tr(Vi,n))}function Xi(e){qi.current===e&&(Nr(Vi),Nr(qi))}var Zi=Cr(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ao=w.ReactCurrentDispatcher,ro=w.ReactCurrentBatchConfig,io=0,oo=null,so=null,lo=null,co=!1,uo=!1,mo=0,ho=0;function fo(){throw Error(i(321))}function po(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sa(e[n],t[n]))return!1;return!0}function go(e,t,n,a,r,o){if(io=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?Zo:es,e=n(a,r),uo){o=0;do{if(uo=!1,mo=0,25<=o)throw Error(i(301));o+=1,lo=so=null,t.updateQueue=null,ao.current=ts,e=n(a,r)}while(uo)}if(ao.current=Xo,t=null!==so&&null!==so.next,io=0,lo=so=oo=null,co=!1,t)throw Error(i(300));return e}function vo(){var e=0!==mo;return mo=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(i(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=so,r=a.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}a.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,a=a.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((io&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=m,s=a):c=c.next=m,oo.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==o);null===c?s=a:c.next=l,sa(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseState=s,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,oo.lanes|=o,Ll|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);sa(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function ko(){}function Co(e,t){var n=oo,a=bo(),r=t(),o=!sa(a.memoizedState,r);if(o&&(a.memoizedState=r,bs=!0),a=a.queue,Lo(Do.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,To.bind(null,n,a,r,t),void 0,null),null===jl)throw Error(i(349));0!==(30&io)||No(n,t,r)}return r}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,a){t.value=n,t.getSnapshot=a,Mo(t)&&jo(e)}function Do(e,t,n){return n((function(){Mo(t)&&jo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sa(e,n)}catch(a){return!0}}function jo(e){var t=Fi(e,1);null!==t&&nc(t,e,1,-1)}function Eo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Io(){return bo().memoizedState}function Po(e,t,n,a){var r=yo();oo.flags|=e,r.memoizedState=Ro(1|t,n,void 0,void 0===a?null:a)}function Fo(e,t,n,a){var r=bo();a=void 0===a?null:a;var i=void 0;if(null!==so){var o=so.memoizedState;if(i=o.destroy,null!==a&&po(a,o.deps))return void(r.memoizedState=Ro(t,n,i,a))}oo.flags|=e,r.memoizedState=Ro(1|t,n,i,a)}function zo(e,t){return Po(8390656,8,e,t)}function Lo(e,t){return Fo(2048,8,e,t)}function _o(e,t){return Fo(4,2,e,t)}function Ho(e,t){return Fo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Wo.bind(null,t,e),n)}function Ao(){}function Oo(e,t){var n=bo();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&po(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=bo();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&po(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Uo(e,t,n){return 0===(21&io)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sa(n,t)||(n=pt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Vo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var a=ro.transition;ro.transition={};try{e(!1),t()}finally{bt=n,ro.transition=a}}function qo(){return bo().memoizedState}function Yo(e,t,n){var a=tc(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Ko(t,n);else if(null!==(n=Pi(e,t,n,a))){nc(n,e,a,ec()),Jo(n,t,a)}}function Go(e,t,n){var a=tc(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Ko(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(r.hasEagerState=!0,r.eagerState=s,sa(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ii(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Pi(e,t,r,a))&&(nc(n,e,a,r=ec()),Jo(n,t,a))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Ko(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:Ei,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Zo={readContext:Ei,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=yo();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Eo,useDebugValue:Ao,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Eo(!1),t=e[0];return e=Vo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=oo,r=yo();if(ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===jl)throw Error(i(349));0!==(30&io)||No(a,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,zo(Do.bind(null,a,o,e),[e]),a.flags|=2048,Ro(9,To.bind(null,a,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=jl.identifierPrefix;if(ri){var n=Jr;t=":"+t+"R"+(n=(Kr&~(1<<32-ot(Kr)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ho++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ei,useCallback:Oo,useContext:Ei,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:_o,useLayoutEffect:Ho,useMemo:$o,useReducer:xo,useRef:Io,useState:function(){return xo(wo)},useDebugValue:Ao,useDeferredValue:function(e){return Uo(bo(),so.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Co,useId:qo,unstable_isNewReconciler:!1},ts={readContext:Ei,useCallback:Oo,useContext:Ei,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:_o,useLayoutEffect:Ho,useMemo:$o,useReducer:So,useRef:Io,useState:function(){return So(wo)},useDebugValue:Ao,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:Uo(t,so.memoizedState,e)},useTransition:function(){return[So(wo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Co,useId:qo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=_({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function as(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:_({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rs={isMounted:function(e){return!!(e=e._reactInternals)&&Oe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),i=Hi(a,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Wi(e,i,r))&&(nc(t,e,r,a),Bi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),i=Hi(a,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Wi(e,i,r))&&(nc(t,e,r,a),Bi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),a=tc(e),r=Hi(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Wi(e,r,a))&&(nc(t,e,a,n),Bi(t,e,a))}};function is(e,t,n,a,r,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(r,i))}function os(e,t,n){var a=!1,r=Dr,i=t.contextType;return"object"===typeof i&&null!==i?i=Ei(i):(r=Ir(t)?Er:Mr.current,i=(a=null!==(a=t.contextTypes)&&void 0!==a)?Rr(e,r):Dr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rs,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&rs.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=Ei(i):(i=Ir(t)?Er:Mr.current,r.context=Rr(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(as(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&rs.enqueueReplaceState(r,r.state,null),Oi(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",a=t;do{n+=A(a),a=a.return}while(a);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ms="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Hi(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Ul||(Ul=!0,Vl=a),ds(0,t)},n}function fs(e,t,n){(n=Hi(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof a&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new ms;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Hi(-1,1)).tag=2,Wi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,a){t.child=null===e?xi(t,null,n,a):wi(t,e.child,n,a)}function xs(e,t,n,a,r){n=n.render;var i=t.ref;return ji(t,r),a=go(e,t,n,a,i,r),n=vo(),null===e||bs?(ri&&n&&ei(t),t.flags|=1,ws(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Us(e,t,r))}function Ss(e,t,n,a,r){if(null===e){var i=n.type;return"function"!==typeof i||Ic(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ks(e,t,i,a,r))}if(i=e.child,0===(e.lanes&r)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:la)(o,a)&&e.ref===t.ref)return Us(e,t,r)}return t.flags|=1,(e=Pc(i,a)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,a,r){if(null!==e){var i=e.memoizedProps;if(la(i,a)&&e.ref===t.ref){if(bs=!1,t.pendingProps=a=i,0===(e.lanes&r))return t.lanes=e.lanes,Us(e,t,r);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,a,r)}function Cs(e,t,n){var a=t.pendingProps,r=a.children,i=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Pl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(Pl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==i?i.baseLanes:n,Tr(Pl,Il),Il|=a}else null!==i?(a=i.baseLanes|n,t.memoizedState=null):a=n,Tr(Pl,Il),Il|=a;return ws(e,t,r,n),t.child}function Ns(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,a,r){var i=Ir(n)?Er:Mr.current;return i=Rr(t,i),ji(t,r),n=go(e,t,n,a,i,r),a=vo(),null===e||bs?(ri&&a&&ei(t),t.flags|=1,ws(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Us(e,t,r))}function Ds(e,t,n,a,r){if(Ir(n)){var i=!0;Lr(t)}else i=!1;if(ji(t,r),null===t.stateNode)$s(e,t),os(t,n,a),ls(t,n,a,r),a=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ei(c):c=Rr(t,c=Ir(n)?Er:Mr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==a||l!==c)&&ss(t,o,a,c),zi=!1;var m=t.memoizedState;o.state=m,Oi(t,a,o,r),l=t.memoizedState,s!==a||m!==l||jr.current||zi?("function"===typeof u&&(as(t,n,u,a),l=t.memoizedState),(s=zi||is(t,n,s,a,m,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),o.props=a,o.state=l,o.context=c,a=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,_i(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,d=t.pendingProps,m=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ei(l):l=Rr(t,l=Ir(n)?Er:Mr.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||m!==l)&&ss(t,o,a,l),zi=!1,m=t.memoizedState,o.state=m,Oi(t,a,o,r);var f=t.memoizedState;s!==d||m!==f||jr.current||zi?("function"===typeof h&&(as(t,n,h,a),f=t.memoizedState),(c=zi||is(t,n,c,a,m,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(a,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(a,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),o.props=a,o.state=f,o.context=l,a=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Ms(e,t,n,a,i,r)}function Ms(e,t,n,a,r,i){Ns(e,t);var o=0!==(128&t.flags);if(!a&&!o)return r&&_r(t,n,!1),Us(e,t,i);a=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&o?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=a.state,r&&_r(t,n,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?Fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fr(0,t.context,!1),Qi(e,t.containerInfo)}function Es(e,t,n,a,r){return hi(),fi(r),t.flags|=256,ws(e,t,n,a),t.child}var Rs,Is,Ps,Fs,zs={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function _s(e,t,n){var a,r=t.pendingProps,o=Zi.current,s=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&o)),a?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Tr(Zi,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lc(l,r,0,null),e=zc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=zs,e):Hs(t,l));if(null!==(o=e.memoizedState)&&null!==(a=o.dehydrated))return function(e,t,n,a,r,o,s){if(n)return 256&t.flags?(t.flags&=-257,Ws(e,t,s,a=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=a.fallback,r=t.mode,a=Lc({mode:"visible",children:a.children},r,0,null),(o=zc(o,r,s,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,0!==(1&t.mode)&&wi(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=zs,o);if(0===(1&t.mode))return Ws(e,t,s,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var l=a.dgst;return a=l,Ws(e,t,s,a=us(o=Error(i(419)),a,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(a=jl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Fi(e,r),nc(a,e,r,-1))}return pc(),Ws(e,t,s,a=us(Error(i(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,ai=cr(r.nextSibling),ni=t,ri=!0,ii=null,null!==e&&(Yr[Gr++]=Kr,Yr[Gr++]=Jr,Yr[Gr++]=Qr,Kr=e.id,Jr=e.overflow,Qr=t),t=Hs(t,a.children),t.flags|=4096,t)}(e,t,l,r,a,o,n);if(s){s=r.fallback,l=t.mode,a=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==a?s=Pc(a,s):(s=zc(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=zs,r}return e=(s=e.child).sibling,r=Pc(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Hs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ws(e,t,n,a){return null!==a&&fi(a),wi(t,e.child,null,n),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Mi(e.return,t,n)}function As(e,t,n,a,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=r)}function Os(e,t,n){var a=t.pendingProps,r=a.revealOrder,i=a.tail;if(ws(e,t,a.children,n),0!==(2&(a=Zi.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Tr(Zi,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),As(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===eo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}As(t,!0,n,null,i);break;case"together":As(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Us(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Ys(e,t,n){var a=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ir(t.type)&&Pr(),qs(t),null;case 3:return a=t.stateNode,Ki(),Nr(jr),Nr(Mr),no(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Is(e,t),qs(t),null;case 5:Xi(t);var r=Gi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(i(166));return qs(t),null}if(e=Gi(Vi.current),di(t)){a=t.stateNode,n=t.type;var o=t.memoizedProps;switch(a[mr]=t,a[hr]=o,e=0!==(1&t.mode),n){case"dialog":Wa("cancel",a),Wa("close",a);break;case"iframe":case"object":case"embed":Wa("load",a);break;case"video":case"audio":for(r=0;r<za.length;r++)Wa(za[r],a);break;case"source":Wa("error",a);break;case"img":case"image":case"link":Wa("error",a),Wa("load",a);break;case"details":Wa("toggle",a);break;case"input":K(a,o),Wa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},Wa("invalid",a);break;case"textarea":re(a,o),Wa("invalid",a)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xa(a.textContent,c,e),r=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xa(a.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Wa("scroll",a)}switch(n){case"input":q(a),Z(a,o,!0);break;case"textarea":q(a),oe(a);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(a.onclick=Za)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[mr]=t,e[hr]=a,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,a),n){case"dialog":Wa("cancel",e),Wa("close",e),r=a;break;case"iframe":case"object":case"embed":Wa("load",e),r=a;break;case"video":case"audio":for(r=0;r<za.length;r++)Wa(za[r],e);r=a;break;case"source":Wa("error",e),r=a;break;case"img":case"image":case"link":Wa("error",e),Wa("load",e),r=a;break;case"details":Wa("toggle",e),r=a;break;case"input":K(e,a),r=Q(e,a),Wa("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=_({},a,{value:void 0}),Wa("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),Wa("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&me(e,u):"number"===typeof u&&me(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Wa("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),Z(e,a,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+U(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?ne(e,!!a.multiple,o,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Za)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Fs(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(i(166));if(n=Gi(Yi.current),Gi(Vi.current),di(t)){if(a=t.stateNode,n=t.memoizedProps,a[mr]=t,(o=a.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xa(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xa(a.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[mr]=t,t.stateNode=a}return qs(t),null;case 13:if(Nr(Zi),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ri&&null!==ai&&0!==(1&t.mode)&&0===(128&t.flags))mi(),hi(),t.flags|=98560,o=!1;else if(o=di(t),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[mr]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Fl&&(Fl=3):pc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Ki(),Is(e,t),null===e&&Oa(t.stateNode.containerInfo),qs(t),null;case 10:return Di(t.type._context),qs(t),null;case 19:if(Nr(Zi),null===(o=t.memoizedState))return qs(t),null;if(a=0!==(128&t.flags),null===(l=o.rendering))if(a)Vs(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Vs(o,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Ol&&(t.flags|=128,a=!0,Vs(o,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=eo(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ri)return qs(t),null}else 2*Je()-o.renderingStartTime>Ol&&1073741824!==n&&(t.flags|=128,a=!0,Vs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zi.current,Tr(Zi,a?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Il)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Gs(e,t){switch(ti(t),t.tag){case 1:return Ir(t.type)&&Pr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ki(),Nr(jr),Nr(Mr),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(Nr(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Nr(Zi),null;case 4:return Ki(),null;case 10:return Di(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},Ps=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,Gi(Vi.current);var i,o=null;switch(n){case"input":r=Q(e,r),a=Q(e,a),o=[];break;case"select":r=_({},r,{value:void 0}),a=_({},a,{value:void 0}),o=[];break;case"textarea":r=ae(e,r),a=ae(e,a),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=Za)}for(u in ye(n,a),n=null,r)if(!a.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in a){var c=a[u];if(l=null!=r?r[u]:void 0,a.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Wa("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Fs=function(e,t,n,a){n!==a&&(t.flags|=4)};var Qs=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){Cc(e,t,a)}else n.current=null}function el(e,t,n){try{n()}catch(a){Cc(e,t,a)}}var tl=!1;function nl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&el(t,n,i)}r=r.next}while(r!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mr],delete t[hr],delete t[pr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Za));else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function ml(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Ks||Zs(n,t);case 6:var a=ul,r=dl;ul=null,ml(e,t,n),dl=r,null!==(ul=a)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ot(e)):lr(ul,n.stateNode));break;case 4:a=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,ml(e,t,n),ul=a,dl=r;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&el(n,t,o),r=r.next}while(r!==a)}ml(e,t,n);break;case 1:if(!Ks&&(Zs(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(s){Cc(n,t,s)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Ks=(a=Ks)||null!==n.memoizedState,ml(e,t,n),Ks=a):ml(e,t,n);break;default:ml(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var a=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function pl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));hl(o,s,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Cc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),vl(e),4&a){try{nl(3,e,e.return),al(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:pl(t,e),vl(e),512&a&&null!==n&&Zs(n,n.return);break;case 5:if(pl(t,e),vl(e),512&a&&null!==n&&Zs(n,n.return),32&e.flags){var r=e.stateNode;try{me(r,"")}catch(g){Cc(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(r,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var d=c[s],m=c[s+1];"style"===d?ge(r,m):"dangerouslySetInnerHTML"===d?de(r,m):"children"===d?me(r,m):b(r,d,m,u)}switch(l){case"input":X(r,o);break;case"textarea":ie(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[hr]=o}catch(g){Cc(e,e.return,g)}}break;case 6:if(pl(t,e),vl(e),4&a){if(null===e.stateNode)throw Error(i(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(g){Cc(e,e.return,g)}}break;case 3:if(pl(t,e),vl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Ot(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:pl(t,e),vl(e);break;case 13:pl(t,e),vl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Al=Je())),4&a&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||d,pl(t,e),Ks=u):pl(t,e),vl(e),8192&a){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(m=Xs=d;null!==Xs;){switch(f=(h=Xs).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zs(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){a=h,n=h.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Cc(a,n,g)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){xl(m);continue}}null!==f?(f.return=h,Xs=f):xl(m)}d=d.sibling}e:for(d=null,m=e;;){if(5===m.tag){if(null===d){d=m;try{r=m.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=m.stateNode,s=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",s))}catch(g){Cc(e,e.return,g)}}}else if(6===m.tag){if(null===d)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:pl(t,e),vl(e),4&a&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var a=n;break e}n=n.return}throw Error(i(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(me(r,""),a.flags&=-33),cl(e,sl(e),r);break;case 3:case 4:var o=a.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(i(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xs=e,bl(e,t,n)}function bl(e,t,n){for(var a=0!==(1&e.mode);null!==Xs;){var r=Xs,i=r.child;if(22===r.tag&&a){var o=null!==r.memoizedState||Qs;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Qs;var c=Ks;if(Qs=o,(Ks=l)&&!c)for(Xs=r;null!==Xs;)l=(o=Xs).child,22===o.tag&&null!==o.memoizedState?Sl(r):null!==l?(l.return=o,Xs=l):Sl(r);for(;null!==i;)Xs=i,bl(i,t,n),i=i.sibling;Xs=r,Qs=s,Ks=c}wl(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,Xs=i):wl(e)}}function wl(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Ks)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$i(t,o,a);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$i(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var m=d.dehydrated;null!==m&&Ot(m)}}}break;default:throw Error(i(163))}Ks||512&t.flags&&rl(t)}catch(h){Cc(t,t.return,h)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function xl(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function Sl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Cc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(l){Cc(t,r,l)}}var i=t.return;try{rl(t)}catch(l){Cc(t,i,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){Cc(t,o,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var kl,Cl=Math.ceil,Nl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Dl=w.ReactCurrentBatchConfig,Ml=0,jl=null,El=null,Rl=0,Il=0,Pl=Cr(0),Fl=0,zl=null,Ll=0,_l=0,Hl=0,Wl=null,Bl=null,Al=0,Ol=1/0,$l=null,Ul=!1,Vl=null,ql=null,Yl=!1,Gl=null,Ql=0,Kl=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Ml)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Rl?Rl&-Rl:null!==pi.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,a){if(50<Kl)throw Kl=0,Jl=null,Error(i(185));vt(e,n,a),0!==(2&Ml)&&e===jl||(e===jl&&(0===(2&Ml)&&(_l|=n),4===Fl&&sc(e,Rl)),ac(e,a),1===n&&0===Ml&&0===(1&t.mode)&&(Ol=Je()+500,Wr&&Or()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&a)||(r[o]=ht(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var a=mt(e,e===jl?Rl:0);if(0===a)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Wr=!0,Ar(e)}(lc.bind(null,e)):Ar(lc.bind(null,e)),or((function(){0===(6&Ml)&&Or()})),n=null;else{switch(wt(a)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=jc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,Zl=0,0!==(6&Ml))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var a=mt(e,e===jl?Rl:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var r=Ml;Ml|=2;var o=fc();for(jl===e&&Rl===t||($l=null,Ol=Je()+500,mc(e,t));;)try{yc();break}catch(l){hc(e,l)}Ti(),Nl.current=o,Ml=r,null!==El?t=0:(jl=null,Rl=0,t=Fl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(a=r,t=ic(e,r))),1===t)throw n=zl,mc(e,0),sc(e,a),ac(e,Je()),n;if(6===t)sc(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],i=r.getSnapshot;r=r.value;try{if(!sa(i(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,a))&&(0!==(o=ft(e))&&(a=o,t=ic(e,o))),1===t))throw n=zl,mc(e,0),sc(e,a),ac(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Bl,$l);break;case 3:if(sc(e,a),(130023424&a)===a&&10<(t=Al+500-Je())){if(0!==mt(e,0))break;if(((r=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(xc.bind(null,e,Bl,$l),t);break}xc(e,Bl,$l);break;case 4:if(sc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var s=31-ot(a);o=1<<s,(s=t[s])>r&&(r=s),a&=~o}if(a=r,10<(a=(120>(a=Je()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Cl(a/1960))-a)){e.timeoutHandle=ar(xc.bind(null,e,Bl,$l),a);break}xc(e,Bl,$l);break;default:throw Error(i(329))}}}return ac(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&oc(t)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Hl,t&=~_l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),a=1<<n;e[n]=-1,t&=~a}}function lc(e){if(0!==(6&Ml))throw Error(i(327));Sc();var t=mt(e,0);if(0===(1&t))return ac(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var a=ft(e);0!==a&&(t=a,n=ic(e,a))}if(1===n)throw n=zl,mc(e,0),sc(e,t),ac(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,$l),ac(e,Je()),null}function cc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Ol=Je()+500,Wr&&Or())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Ml)&&Sc();var t=Ml;Ml|=1;var n=Dl.transition,a=bt;try{if(Dl.transition=null,bt=1,e)return e()}finally{bt=a,Dl.transition=n,0===(6&(Ml=t))&&Or()}}function dc(){Il=Pl.current,Nr(Pl)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==El)for(n=El.return;null!==n;){var a=n;switch(ti(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Pr();break;case 3:Ki(),Nr(jr),Nr(Mr),no();break;case 5:Xi(a);break;case 4:Ki();break;case 13:case 19:Nr(Zi);break;case 10:Di(a.type._context);break;case 22:case 23:dc()}n=n.return}if(jl=e,El=e=Pc(e.current,null),Rl=Il=t,Fl=0,zl=null,Hl=_l=Ll=0,Bl=Wl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(a=(n=Ri[t]).interleaved)){n.interleaved=null;var r=a.next,i=n.pending;if(null!==i){var o=i.next;i.next=r,a.next=o}n.pending=a}Ri=null}return e}function hc(e,t){for(;;){var n=El;try{if(Ti(),ao.current=Xo,co){for(var a=oo.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}co=!1}if(io=0,lo=so=oo=null,uo=!1,mo=0,Tl.current=null,null===n||null===n.return){Fl=1,zl=t,El=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,m=d.tag;if(0===(1&d.mode)&&(0===m||11===m||15===m)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ps(o,u,t),c=u;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){ps(o,u,t),pc();break e}c=Error(i(426))}else if(ri&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fi(cs(c,l));break e}}o=c=cs(c,l),4!==Fl&&(Fl=2),null===Wl?Wl=[o]:Wl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ai(o,hs(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ai(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,El===n&&null!==n&&(El=n=n.return);continue}break}}function fc(){var e=Nl.current;return Nl.current=Xo,null===e?Xo:e}function pc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===jl||0===(268435455&Ll)&&0===(268435455&_l)||sc(jl,Rl)}function gc(e,t){var n=Ml;Ml|=2;var a=fc();for(jl===e&&Rl===t||($l=null,mc(e,t));;)try{vc();break}catch(r){hc(e,r)}if(Ti(),Ml=n,Nl.current=a,null!==El)throw Error(i(261));return jl=null,Rl=0,Fl}function vc(){for(;null!==El;)bc(El)}function yc(){for(;null!==El&&!Qe();)bc(El)}function bc(e){var t=kl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?wc(e):El=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Il)))return void(El=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(El=n);if(null===e)return Fl=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Fl&&(Fl=5)}function xc(e,t,n){var a=bt,r=Dl.transition;try{Dl.transition=null,bt=1,function(e,t,n,a){do{Sc()}while(null!==Gl);if(0!==(6&Ml))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),i=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~i}}(e,o),e===jl&&(El=jl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,jc(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Dl.transition,Dl.transition=null;var s=bt;bt=1;var l=Ml;Ml|=4,Tl.current=null,function(e,t){if(er=Ut,ha(e=ma())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,m=e,h=null;t:for(;;){for(var f;m!==n||0!==r&&3!==m.nodeType||(l=s+r),m!==o||0!==a&&3!==m.nodeType||(c=s+a),3===m.nodeType&&(s+=m.nodeValue.length),null!==(f=m.firstChild);)h=m,m=f;for(;;){if(m===e)break t;if(h===n&&++u===r&&(l=s),h===o&&++d===a&&(c=s),null!==(f=m.nextSibling))break;h=(m=h).parentNode}m=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ut=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(x){Cc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}p=tl,tl=!1}(e,n),gl(n,e),fa(tr),Ut=!!er,tr=er=null,e.current=n,yl(n,e,r),Ke(),Ml=l,bt=s,Dl.transition=o}else e.current=n;if(Yl&&(Yl=!1,Gl=e,Ql=r),o=e.pendingLanes,0===o&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Je()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(Ul)throw Ul=!1,e=Vl,Vl=null,e;0!==(1&Ql)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Or()}(e,t,n,a)}finally{Dl.transition=r,bt=a}return null}function Sc(){if(null!==Gl){var e=wt(Ql),t=Dl.transition,n=bt;try{if(Dl.transition=null,bt=16>e?16:e,null===Gl)var a=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Ml))throw Error(i(331));var r=Ml;for(Ml|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var m=d.child;if(null!==m)m.return=d,Xs=m;else for(;null!==Xs;){var h=(d=Xs).sibling,f=d.return;if(il(d),d===u){Xs=null;break}if(null!==h){h.return=f,Xs=h;break}Xs=f}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xs=y;break e}Xs=o.return}}var b=e.current;for(Xs=b;null!==Xs;){var w=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Xs=w;else e:for(s=b;null!==Xs;){if(0!==(2048&(l=Xs).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(S){Cc(l,l.return,S)}if(l===s){Xs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xs=x;break e}Xs=l.return}}if(Ml=r,Or(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(S){}a=!0}return a}finally{bt=n,Dl.transition=t}}return!1}function kc(e,t,n){e=Wi(e,t=hs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ac(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===ql||!ql.has(a))){t=Wi(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ac(t,e));break}}t=t.return}}function Nc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Rl&n)===n&&(4===Fl||3===Fl&&(130023424&Rl)===Rl&&500>Je()-Al?mc(e,0):Hl|=n),ac(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Fi(e,t))&&(vt(e,t,n),ac(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(i(314))}null!==a&&a.delete(t),Tc(e,n)}function jc(e,t){return Ye(e,t)}function Ec(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,a){return new Ec(e,t,n,a)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,a,r,o){var s=2;if(a=e,"function"===typeof e)Ic(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return zc(n.children,r,o,t);case C:s=8,r|=8;break;case N:return(e=Rc(12,n,t,2|r)).elementType=N,e.lanes=o,e;case j:return(e=Rc(13,n,t,r)).elementType=j,e.lanes=o,e;case E:return(e=Rc(19,n,t,r)).elementType=E,e.lanes=o,e;case P:return Lc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case D:s=9;break e;case M:s=11;break e;case R:s=14;break e;case I:s=16,a=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,r)).elementType=e,t.type=a,t.lanes=o,t}function zc(e,t,n,a){return(e=Rc(7,e,a,t)).lanes=n,e}function Lc(e,t,n,a){return(e=Rc(22,e,a,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function _c(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Hc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,a,r,i,o,s,l){return e=new Wc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Ac(e){if(!e)return Dr;e:{if(Oe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ir(n))return zr(e,n,t)}return t}function Oc(e,t,n,a,r,i,o,s,l){return(e=Bc(n,a,!0,e,0,i,0,s,l)).context=Ac(null),n=e.current,(i=Hi(a=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Wi(n,i,r),e.current.lanes=r,vt(e,r,a),ac(e,a),e}function $c(e,t,n,a){var r=t.current,i=ec(),o=tc(r);return n=Ac(n),null===t.context?t.context=n:t.pendingContext=n,(t=Hi(i,o)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Wi(r,t,o))&&(nc(e,r,o,i),Bi(e,r,o)),o}function Uc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||jr.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:js(t),hi();break;case 5:Ji(t);break;case 1:Ir(t.type)&&Lr(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Tr(Si,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Tr(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?_s(e,t,n):(Tr(Zi,1&Zi.current),null!==(e=Us(e,t,n))?e.sibling:null);Tr(Zi,1&Zi.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return Os(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(Zi,Zi.current),a)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Us(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ri&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;$s(e,t),e=t.pendingProps;var r=Rr(t,Mr.current);ji(t,n),r=go(null,t,a,e,r,n);var o=vo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(a)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Li(t),r.updater=rs,t.stateNode=r,r._reactInternals=t,ls(t,a,e,n),t=Ms(null,t,a,!0,o,n)):(t.tag=0,ri&&o&&ei(t),ws(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch($s(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(a),e=ns(a,e),r){case 0:t=Ts(null,t,a,e,n);break e;case 1:t=Ds(null,t,a,e,n);break e;case 11:t=xs(null,t,a,e,n);break e;case 14:t=Ss(null,t,a,ns(a.type,e),n);break e}throw Error(i(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,Ts(e,t,a,r=t.elementType===a?r:ns(a,r),n);case 1:return a=t.type,r=t.pendingProps,Ds(e,t,a,r=t.elementType===a?r:ns(a,r),n);case 3:e:{if(js(t),null===e)throw Error(i(387));a=t.pendingProps,r=(o=t.memoizedState).element,_i(e,t),Oi(t,a,null,n);var s=t.memoizedState;if(a=s.element,o.isDehydrated){if(o={element:a,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Es(e,t,a,n,r=cs(Error(i(423)),t));break e}if(a!==r){t=Es(e,t,a,n,r=cs(Error(i(424)),t));break e}for(ai=cr(t.stateNode.containerInfo.firstChild),ni=t,ri=!0,ii=null,n=xi(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),a===r){t=Us(e,t,n);break e}ws(e,t,a,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ci(t),a=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,nr(a,r)?s=null:null!==o&&nr(a,o)&&(t.flags|=32),Ns(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return _s(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=wi(t,null,a,n):ws(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,xs(e,t,a,r=t.elementType===a?r:ns(a,r),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,Tr(Si,a._currentValue),a._currentValue=s,null!==o)if(sa(o.value,s)){if(o.children===r.children&&!jr.current){t=Us(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===o.tag){(c=Hi(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Mi(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Mi(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,ji(t,n),a=a(r=Ei(r)),t.flags|=1,ws(e,t,a,n),t.child;case 14:return r=ns(a=t.type,t.pendingProps),Ss(e,t,a,r=ns(a.type,r),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:ns(a,r),$s(e,t),t.tag=1,Ir(a)?(e=!0,Lr(t)):e=!1,ji(t,n),os(t,a,r),ls(t,a,r,n),Ms(null,t,a,!0,e,n);case 19:return Os(e,t,n);case 22:return Cs(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,a,r){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof r){var s=r;r=function(){var e=Uc(o);s.call(e)}}$c(t,o,e,r)}else o=function(e,t,n,a,r){if(r){if("function"===typeof a){var i=a;a=function(){var e=Uc(o);i.call(e)}}var o=Oc(t,a,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[fr]=o.current,Oa(8===e.nodeType?e.parentNode:e),uc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var s=a;a=function(){var e=Uc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fr]=l.current,Oa(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,a)})),l}(n,t,e,r,a);return Uc(o)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));$c(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[fr]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&_t(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Je()),0===(6&Ml)&&(Ol=Je()+500,Or()))}break;case 13:uc((function(){var t=Fi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},St=function(e){if(13===e.tag){var t=Fi(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Fi(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Ct=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=xr(a);if(!r)throw Error(i(90));Y(a),X(a,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cc,je=uc;var eu={usingClientEntryPoint:!1,Events:[br,wr,xr,Te,De,cc]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{rt=au.inject(nu),it=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(i(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(i(299));var n=!1,a="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,a,r),e[fr]=t.current,Oa(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(i(405));var a=null!=n&&n.hydratedSources||null,r=!1,o="",s=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Oc(t,null,e,1,null!=n?n:null,r,0,o,s),e[fr]=t.current,Oa(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},739:(e,t,n)=>{n.r(t),n.d(t,{biomeLabels:()=>r,createProfileFromTemplate:()=>c,getAllTemplates:()=>l,getTemplateParameters:()=>s,getTemplatesForLatitudeBand:()=>o,latitudeBands:()=>a,regionTemplates:()=>i});const a={equatorial:{label:"Equatorial",range:"0\xb0 - 10\xb0"},tropical:{label:"Tropical",range:"10\xb0 - 30\xb0"},temperate:{label:"Temperate",range:"30\xb0 - 60\xb0"},subarctic:{label:"Subarctic",range:"60\xb0 - 75\xb0"},polar:{label:"Polar",range:"75\xb0 - 90\xb0"}},r={"tropical-rainforest":"Tropical Rainforest","tropical-seasonal":"Tropical Seasonal Forest",desert:"Desert","temperate-grassland":"Temperate Grassland","temperate-deciduous":"Temperate Deciduous Forest","temperate-rainforest":"Temperate Rainforest","boreal-forest":"Boreal Forest",tundra:"Tundra"},i={equatorial:{"rainforest-basin":{name:"Rainforest Basin",description:"Dense, humid rainforests with consistent temperatures and rainfall throughout the year. Daily afternoon thunderstorms are common.",gameplayImpact:"Dense foliage limits visibility. Heavy rainfall makes rivers swell and can flood low areas. High humidity can cause equipment to deteriorate. Heat exhaustion is a constant risk.",parameters:{latitude:5,elevation:500,maritimeInfluence:.7,terrainRoughness:.4,specialFactors:{hasMonsoonSeason:!0,highRainfall:!0,forestDensity:.9,highBiodiversity:!0},temperatureProfile:{annual:{mean:82,variance:4},winter:{mean:81,variance:4},spring:{mean:82,variance:4},summer:{mean:83,variance:4},fall:{mean:82,variance:4}},humidityProfile:{annual:{mean:85,variance:10},winter:{mean:85,variance:10},spring:{mean:86,variance:8},summer:{mean:84,variance:10},fall:{mean:85,variance:8}}},defaultBiome:"tropical-rainforest"},"equatorial-highland":{name:"Equatorial Highland",description:'Cool mountain environments near the equator, often called "eternal spring" climates. Morning fog and afternoon rain are common, with pleasant temperatures year-round.',gameplayImpact:"Morning fog can limit visibility. Steep terrain slows travel. Afternoon storms develop quickly and can cause flash floods in ravines.",parameters:{latitude:5,elevation:5e3,maritimeInfluence:.4,terrainRoughness:.7,specialFactors:{highBiodiversity:!0,hasFog:!0,volcanicActivity:.3},temperatureProfile:{annual:{mean:70,variance:5},winter:{mean:69,variance:5},spring:{mean:70,variance:5},summer:{mean:71,variance:5},fall:{mean:70,variance:5}},humidityProfile:{annual:{mean:75,variance:15},winter:{mean:75,variance:15},spring:{mean:78,variance:15},summer:{mean:74,variance:15},fall:{mean:73,variance:15}}},defaultBiome:"tropical-rainforest"},"island-archipelago":{name:"Island Archipelago",description:"Scattered islands with extremely stable temperatures and consistent trade winds. Afternoon showers are common but typically brief.",gameplayImpact:"Predictable weather patterns with reliable sea breezes. Ocean travel affected by afternoon squalls. Volcanic islands may have unique microclimates.",parameters:{latitude:5,elevation:200,maritimeInfluence:.95,terrainRoughness:.5,specialFactors:{highBiodiversity:!0,highRainfall:!0,coastalWinds:.7,volcanicActivity:.4},temperatureProfile:{annual:{mean:80,variance:3},winter:{mean:79,variance:3},spring:{mean:80,variance:3},summer:{mean:81,variance:3},fall:{mean:80,variance:3}},humidityProfile:{annual:{mean:80,variance:8},winter:{mean:80,variance:8},spring:{mean:80,variance:8},summer:{mean:80,variance:8},fall:{mean:80,variance:8}}},defaultBiome:"tropical-rainforest"},"volcanic-zone":{name:"Volcanic Zone",description:"Dramatic landscapes with active volcanoes and unpredictable local weather patterns. Fertile soil supports lush vegetation despite rugged terrain.",gameplayImpact:"Potentially hazardous volcanic events. Unpredictable local weather due to terrain complexity. Steep slopes and difficult terrain. Frequent earth tremors.",parameters:{latitude:5,elevation:3e3,maritimeInfluence:.5,terrainRoughness:.9,specialFactors:{volcanicActivity:.8,tectonicActivity:.7,highBiodiversity:!0,hasFog:!0},temperatureProfile:{annual:{mean:75,variance:7},winter:{mean:74,variance:7},spring:{mean:75,variance:7},summer:{mean:76,variance:7},fall:{mean:75,variance:7}},humidityProfile:{annual:{mean:70,variance:20},winter:{mean:70,variance:20},spring:{mean:72,variance:20},summer:{mean:68,variance:20},fall:{mean:70,variance:20}}},defaultBiome:"tropical-rainforest"},"equatorial-swamp":{name:"Equatorial Swamp",description:"Low-lying, waterlogged areas with extremely high humidity and heat. Standing water is common year-round with minimal seasonal variation.",gameplayImpact:"Difficult terrain with standing water. Disease risk from insects. Limited visibility in tangled vegetation. Almost constant high humidity affects equipment and comfort.",parameters:{latitude:5,elevation:100,maritimeInfluence:.8,terrainRoughness:.3,specialFactors:{highRainfall:!0,highBiodiversity:!0,standingWater:.9,forestDensity:.7},temperatureProfile:{annual:{mean:84,variance:5},winter:{mean:83,variance:5},spring:{mean:84,variance:5},summer:{mean:85,variance:5},fall:{mean:84,variance:5}},humidityProfile:{annual:{mean:90,variance:5},winter:{mean:90,variance:5},spring:{mean:90,variance:5},summer:{mean:90,variance:5},fall:{mean:90,variance:5}}},defaultBiome:"tropical-seasonal"}},tropical:{"monsoon-coast":{name:"Monsoon Coast",description:"Coastal regions with dramatic seasonal rainfall patterns. A distinct wet season brings torrential rains, while the dry season can be quite pleasant.",gameplayImpact:"Seasonal flooding can make travel impossible during monsoon. Roads wash out. Rivers change course. Humidity causes equipment deterioration during wet season.",parameters:{latitude:15,elevation:300,maritimeInfluence:.8,terrainRoughness:.5,specialFactors:{hasMonsoonSeason:!0,highRainfall:!0,forestDensity:.7,seasonalFlooding:.9},temperatureProfile:{annual:{mean:80,variance:8},winter:{mean:75,variance:7},spring:{mean:82,variance:6},summer:{mean:85,variance:6},fall:{mean:78,variance:7}},humidityProfile:{annual:{mean:75,variance:20},winter:{mean:65,variance:15},spring:{mean:75,variance:15},summer:{mean:85,variance:10},fall:{mean:75,variance:15}}},defaultBiome:"tropical-seasonal"},"tropical-savanna":{name:"Tropical Savanna",description:"Open grasslands with scattered trees. Distinct wet and dry seasons, with most rainfall concentrated in 4-5 months of the year.",gameplayImpact:"Grass fires possible in dry season. Seasonal changes in water availability. Wildlife concentrates near water sources in dry season. Tall grass limits visibility.",parameters:{latitude:18,elevation:1200,maritimeInfluence:.3,terrainRoughness:.4,specialFactors:{hasDrySeason:!0,hasMonsoonSeason:!0,grasslandDensity:.8,forestDensity:.3},temperatureProfile:{annual:{mean:78,variance:12},winter:{mean:72,variance:10},spring:{mean:80,variance:8},summer:{mean:84,variance:8},fall:{mean:76,variance:10}},humidityProfile:{annual:{mean:60,variance:25},winter:{mean:40,variance:15},spring:{mean:60,variance:20},summer:{mean:75,variance:15},fall:{mean:65,variance:20}}},defaultBiome:"temperate-grassland"},"tropical-desert":{name:"Tropical Desert",description:"Hot, arid regions with extreme daily temperature variations. Can be scorching during the day but cool at night. Rainfall is rare and often occurs as brief, intense storms.",gameplayImpact:"Heat exhaustion risk during day. Hypothermia risk at night. Water scarcity. Flash floods in wadis. Dust storms reduce visibility. Sun exposure concerns.",parameters:{latitude:23,elevation:2e3,maritimeInfluence:.1,terrainRoughness:.7,specialFactors:{hasDrySeason:!0,highDiurnalVariation:!0,dustStorms:.7},temperatureProfile:{annual:{mean:85,variance:30},winter:{mean:70,variance:20},spring:{mean:85,variance:20},summer:{mean:100,variance:15},fall:{mean:85,variance:20}},humidityProfile:{annual:{mean:20,variance:15},winter:{mean:25,variance:15},spring:{mean:20,variance:15},summer:{mean:15,variance:10},fall:{mean:20,variance:15}}},defaultBiome:"desert"},"tropical-highland":{name:"Tropical Highland",description:'Mountain environments in tropical latitudes, often featuring cloud forests and pleasant temperatures year-round. Often called "cities of eternal spring."',gameplayImpact:"Steep terrain affects travel. Morning fog affects visibility. Afternoon rain/thunderstorms predictable. UV intensity high despite comfortable temperatures.",parameters:{latitude:20,elevation:6e3,maritimeInfluence:.3,terrainRoughness:.8,specialFactors:{hasFog:!0,highBiodiversity:!0,volcanicActivity:.2},temperatureProfile:{annual:{mean:65,variance:10},winter:{mean:62,variance:10},spring:{mean:65,variance:8},summer:{mean:68,variance:8},fall:{mean:65,variance:10}},humidityProfile:{annual:{mean:70,variance:15},winter:{mean:65,variance:15},spring:{mean:75,variance:15},summer:{mean:75,variance:15},fall:{mean:65,variance:15}}},defaultBiome:"temperate-rainforest"},"tropical-deciduous-forest":{name:"Tropical Deciduous Forest",description:"Forests that shed leaves during the dry season. Pronounced seasonality for a tropical climate, with comfortable winters and hot, humid summers.",gameplayImpact:"Seasonal variation in visibility through forest. Leaf litter in dry season can increase fire risk. Wet season brings lusher vegetation and more challenging travel.",parameters:{latitude:25,elevation:1e3,maritimeInfluence:.4,terrainRoughness:.6,specialFactors:{hasDrySeason:!0,deciduousForest:!0,forestDensity:.8},temperatureProfile:{annual:{mean:75,variance:15},winter:{mean:65,variance:10},spring:{mean:75,variance:10},summer:{mean:85,variance:10},fall:{mean:75,variance:10}},humidityProfile:{annual:{mean:65,variance:20},winter:{mean:50,variance:15},spring:{mean:65,variance:15},summer:{mean:80,variance:15},fall:{mean:65,variance:15}}},defaultBiome:"temperate-deciduous"},"tropical-maritime":{name:"Tropical Maritime",description:"Coastal regions dominated by ocean influence, with steady trade winds and moderated temperatures. Seasonal hurricane risk during late summer and fall.",gameplayImpact:"Predictable daily sea breezes. Excellent sailing conditions most of the year. Storm surge risk during hurricane season. Afternoon thunderstorms common but brief.",parameters:{latitude:22,elevation:100,maritimeInfluence:.9,terrainRoughness:.4,specialFactors:{coastalWinds:.8,hurricaneRisk:.7,tradeWinds:!0,highRainfall:!0},temperatureProfile:{annual:{mean:80,variance:7},winter:{mean:76,variance:6},spring:{mean:79,variance:5},summer:{mean:84,variance:5},fall:{mean:81,variance:6}},humidityProfile:{annual:{mean:75,variance:10},winter:{mean:70,variance:10},spring:{mean:75,variance:10},summer:{mean:80,variance:10},fall:{mean:75,variance:10}}},defaultBiome:"tropical-seasonal"},"mangrove-coast":{name:"Mangrove Coast",description:"Low-lying coastal wetlands dominated by salt-tolerant trees. Tidal influences combine with high rainfall to create unique semi-aquatic environments.",gameplayImpact:"Challenging terrain requiring boats or specialized travel. Tidal fluctuations affect passability. Hurricane vulnerability with storm surge risks. Insect activity high.",parameters:{latitude:15,elevation:10,maritimeInfluence:.95,terrainRoughness:.3,specialFactors:{tidalInfluence:.9,standingWater:.8,hurricaneRisk:.7,highBiodiversity:!0},temperatureProfile:{annual:{mean:82,variance:6},winter:{mean:79,variance:6},spring:{mean:82,variance:5},summer:{mean:85,variance:5},fall:{mean:82,variance:6}},humidityProfile:{annual:{mean:85,variance:8},winter:{mean:80,variance:8},spring:{mean:85,variance:8},summer:{mean:88,variance:8},fall:{mean:87,variance:8}}},defaultBiome:"tropical-seasonal"}},temperate:{"maritime-forest":{name:"Maritime Forest",description:"Coastal forest regions with moderated temperatures due to ocean influence. Rainfall is common year-round with foggy conditions, especially in mornings.",gameplayImpact:"Snow in winter is typically wet and heavy but melts quickly. Fog reduces visibility. Steady rainfall creates lush vegetation. Wind storms possible in fall/winter.",parameters:{latitude:45,elevation:500,maritimeInfluence:.8,terrainRoughness:.5,specialFactors:{forestDensity:.8,highRainfall:!0,hasFog:!0},temperatureProfile:{annual:{mean:55,variance:20},winter:{mean:40,variance:10},spring:{mean:52,variance:12},summer:{mean:70,variance:10},fall:{mean:58,variance:12}},humidityProfile:{annual:{mean:75,variance:15},winter:{mean:80,variance:10},spring:{mean:75,variance:15},summer:{mean:70,variance:15},fall:{mean:75,variance:15}}},defaultBiome:"temperate-deciduous"},"mediterranean-coast":{name:"Mediterranean Coast",description:'Distinctive climate with dry, warm summers and mild, rainy winters. Classic "endless summer" feeling with pleasant temperatures most of the year.',gameplayImpact:"Summer drought increases wildfire risk. Winter rainfall can cause flash floods. Grape/olive growing climate. Light winter freezes possible but rare.",parameters:{latitude:35,elevation:300,maritimeInfluence:.7,terrainRoughness:.6,specialFactors:{hasDrySeason:!0,coastalWinds:.6,wildfire:.5},temperatureProfile:{annual:{mean:65,variance:15},winter:{mean:50,variance:10},spring:{mean:60,variance:10},summer:{mean:80,variance:8},fall:{mean:70,variance:10}},humidityProfile:{annual:{mean:60,variance:20},winter:{mean:70,variance:15},spring:{mean:65,variance:15},summer:{mean:50,variance:10},fall:{mean:55,variance:15}}},defaultBiome:"temperate-deciduous"},"continental-prairie":{name:"Continental Prairie",description:"Vast grasslands with extreme temperature variations between summer and winter, and between day and night. Prone to severe thunderstorms and tornadoes.",gameplayImpact:"Blizzards in winter with wind-driven snow. Severe thunderstorms with tornado risk in spring/summer. Limited shelter from elements. Grass fires in dry periods.",parameters:{latitude:45,elevation:1500,maritimeInfluence:.1,terrainRoughness:.3,specialFactors:{grasslandDensity:.9,highDiurnalVariation:!0,thunderstorms:.7,tornadoRisk:.5},temperatureProfile:{annual:{mean:55,variance:40},winter:{mean:25,variance:20},spring:{mean:55,variance:20},summer:{mean:85,variance:15},fall:{mean:55,variance:20}},humidityProfile:{annual:{mean:60,variance:20},winter:{mean:65,variance:15},spring:{mean:65,variance:20},summer:{mean:55,variance:25},fall:{mean:55,variance:20}}},defaultBiome:"temperate-grassland"},"temperate-highland":{name:"Temperate Highland",description:"Mountain environments with significant elevation. Large temperature variations between day and night. Summer thunderstorms are common, winter brings significant snowfall.",gameplayImpact:"Mountain passes closed by snow in winter. Lightning risk above treeline in summer. Avalanche risk in winter/spring. Higher UV exposure requiring protection.",parameters:{latitude:42,elevation:7e3,maritimeInfluence:.2,terrainRoughness:.9,specialFactors:{snowpack:.8,highDiurnalVariation:!0,thunderstorms:.6,forestDensity:.6},temperatureProfile:{annual:{mean:45,variance:30},winter:{mean:25,variance:15},spring:{mean:42,variance:20},summer:{mean:65,variance:20},fall:{mean:48,variance:20}},humidityProfile:{annual:{mean:50,variance:25},winter:{mean:60,variance:20},spring:{mean:55,variance:25},summer:{mean:40,variance:25},fall:{mean:45,variance:25}}},defaultBiome:"boreal-forest"},"temperate-desert":{name:"Temperate Desert",description:"Arid landscapes in mid-latitudes with large temperature swings between seasons and between day and night. Vegetation is sparse and adapted to drought.",gameplayImpact:"Extreme temperature shifts from day to night require adaptable clothing. Limited water sources. Flash flood risk in arroyos. Heat exhaustion risk in summer.",parameters:{latitude:40,elevation:3500,maritimeInfluence:.1,terrainRoughness:.7,specialFactors:{hasDrySeason:!0,highDiurnalVariation:!0,dustStorms:.5},temperatureProfile:{annual:{mean:55,variance:35},winter:{mean:35,variance:20},spring:{mean:55,variance:25},summer:{mean:85,variance:20},fall:{mean:60,variance:25}},humidityProfile:{annual:{mean:30,variance:15},winter:{mean:40,variance:15},spring:{mean:30,variance:15},summer:{mean:20,variance:10},fall:{mean:30,variance:15}}},defaultBiome:"desert"},"temperate-rainforest":{name:"Temperate Rainforest",description:"Lush forests with extremely high rainfall, often along coastal mountain ranges. Mild temperature variations but near-constant precipitation and high humidity.",gameplayImpact:"Constant dampness affects equipment and comfort. Limited visibility in dense forest. Moss-covered surfaces are slippery. Rain gear essential year-round.",parameters:{latitude:48,elevation:500,maritimeInfluence:.9,terrainRoughness:.7,specialFactors:{highRainfall:!0,hasFog:!0,forestDensity:.9},temperatureProfile:{annual:{mean:50,variance:15},winter:{mean:40,variance:10},spring:{mean:48,variance:10},summer:{mean:65,variance:10},fall:{mean:52,variance:10}},humidityProfile:{annual:{mean:80,variance:10},winter:{mean:85,variance:8},spring:{mean:80,variance:10},summer:{mean:75,variance:12},fall:{mean:80,variance:10}}},defaultBiome:"temperate-rainforest"},"river-valley":{name:"River Valley",description:"Fertile valleys with significant river influence. Spring flooding fertilizes soil. Morning fog is common, especially in fall and spring.",gameplayImpact:"Spring floods may block travel routes. Morning fog impacts visibility. River systems provide transportation. Rich agricultural settlements.",parameters:{latitude:45,elevation:500,maritimeInfluence:.5,terrainRoughness:.4,specialFactors:{seasonalFlooding:.7,hasFog:!0,forestDensity:.6,fertileFloodplain:!0},temperatureProfile:{annual:{mean:55,variance:30},winter:{mean:30,variance:15},spring:{mean:55,variance:15},summer:{mean:80,variance:15},fall:{mean:55,variance:15}},humidityProfile:{annual:{mean:65,variance:15},winter:{mean:70,variance:10},spring:{mean:70,variance:15},summer:{mean:60,variance:20},fall:{mean:60,variance:15}}},defaultBiome:"temperate-deciduous"},"seasonal-wetland":{name:"Seasonal Wetland",description:"Low-lying areas that flood seasonally, creating temporary wetlands. Rich biodiversity with seasonal variations in water levels and accessibility.",gameplayImpact:"Seasonal changes in passability. Areas impassable in spring may be easily traversed by late summer. Mosquitoes and disease risk during wet periods.",parameters:{latitude:40,elevation:100,maritimeInfluence:.6,terrainRoughness:.2,specialFactors:{seasonalFlooding:.9,standingWater:.7,highBiodiversity:!0},temperatureProfile:{annual:{mean:60,variance:25},winter:{mean:40,variance:15},spring:{mean:60,variance:15},summer:{mean:80,variance:15},fall:{mean:60,variance:15}},humidityProfile:{annual:{mean:75,variance:15},winter:{mean:75,variance:15},spring:{mean:80,variance:10},summer:{mean:70,variance:15},fall:{mean:75,variance:15}}},defaultBiome:"temperate-grassland"},"maritime-islands":{name:"Maritime Islands",description:"Island environments with heavily moderated temperatures due to ocean influence. Typically windier than mainland areas with unpredictable coastal storms.",gameplayImpact:"Sailing conditions can change rapidly. Fog can develop suddenly. Minimal temperature variation but wind is a constant factor. Coastal erosion concerns.",parameters:{latitude:45,elevation:300,maritimeInfluence:.95,terrainRoughness:.6,specialFactors:{coastalWinds:.8,islandEffect:!0,stormSurge:.6},temperatureProfile:{annual:{mean:55,variance:15},winter:{mean:45,variance:8},spring:{mean:52,variance:10},summer:{mean:65,variance:8},fall:{mean:58,variance:10}},humidityProfile:{annual:{mean:70,variance:15},winter:{mean:75,variance:15},spring:{mean:70,variance:15},summer:{mean:65,variance:15},fall:{mean:70,variance:15}}},defaultBiome:"temperate-rainforest"}},subarctic:{"coastal-taiga":{name:"Coastal Taiga",description:"Northern forests with maritime influence moderating the extreme continental cold. Winter storms bring heavy snow, but temperatures are less severe than inland areas.",gameplayImpact:"Deep winter snow. Coastal storms can create blizzard conditions. Muddy conditions during spring thaw. Short but intense growing season in summer.",parameters:{latitude:62,elevation:500,maritimeInfluence:.7,terrainRoughness:.6,specialFactors:{forestDensity:.8,coniferousForest:!0,coldWinters:!0,coastalStorms:.7},temperatureProfile:{annual:{mean:35,variance:30},winter:{mean:20,variance:15},spring:{mean:35,variance:15},summer:{mean:60,variance:10},fall:{mean:40,variance:15}},humidityProfile:{annual:{mean:75,variance:15},winter:{mean:80,variance:10},spring:{mean:75,variance:15},summer:{mean:70,variance:15},fall:{mean:75,variance:15}}},defaultBiome:"boreal-forest"},"continental-taiga":{name:"Continental Taiga",description:"Vast inland northern forests with extreme seasonal temperature variations. Brutally cold winters and surprisingly warm summers with long daylight hours.",gameplayImpact:"Extreme winter cold requires specialized gear. Short days in winter, long days in summer. Mosquito swarms in summer. Forest fires risk in dry summers.",parameters:{latitude:65,elevation:1e3,maritimeInfluence:.1,terrainRoughness:.5,specialFactors:{forestDensity:.8,coniferousForest:!0,coldWinters:!0,permafrost:.3},temperatureProfile:{annual:{mean:25,variance:60},winter:{mean:-20,variance:25},spring:{mean:30,variance:20},summer:{mean:65,variance:15},fall:{mean:25,variance:25}},humidityProfile:{annual:{mean:70,variance:15},winter:{mean:75,variance:10},spring:{mean:70,variance:15},summer:{mean:65,variance:20},fall:{mean:70,variance:15}}},defaultBiome:"boreal-forest"},"subarctic-highland":{name:"Subarctic Highland",description:"Rugged mountain terrain at high latitudes, with significant winter precipitation falling as snow. Very short growing season limited to a few summer months.",gameplayImpact:"Passes closed most of the year. Avalanche risk. Periods of 24-hour daylight in summer, near-continuous darkness in winter. Dangerous winter conditions.",parameters:{latitude:65,elevation:4e3,maritimeInfluence:.3,terrainRoughness:.9,specialFactors:{snowpack:.9,coldWinters:!0,forestDensity:.4,permafrost:.5},temperatureProfile:{annual:{mean:20,variance:45},winter:{mean:-15,variance:20},spring:{mean:20,variance:20},summer:{mean:55,variance:15},fall:{mean:20,variance:20}},humidityProfile:{annual:{mean:60,variance:20},winter:{mean:70,variance:15},spring:{mean:65,variance:20},summer:{mean:55,variance:20},fall:{mean:60,variance:20}}},defaultBiome:"tundra"},"northern-grassland":{name:"Northern Grassland",description:"Cold steppe environments with extreme temperature shifts between seasons. Winter brings harsh conditions with wind-driven snow, while summers are surprisingly warm.",gameplayImpact:"Winter travel is dangerous but easier on frozen ground. Spring mud season makes travel difficult. Little shelter from elements. Dust storms in dry periods.",parameters:{latitude:60,elevation:800,maritimeInfluence:.1,terrainRoughness:.3,specialFactors:{grasslandDensity:.9,highDiurnalVariation:!0,coldWinters:!0},temperatureProfile:{annual:{mean:30,variance:50},winter:{mean:-10,variance:25},spring:{mean:30,variance:20},summer:{mean:70,variance:15},fall:{mean:30,variance:25}},humidityProfile:{annual:{mean:55,variance:20},winter:{mean:65,variance:15},spring:{mean:60,variance:20},summer:{mean:50,variance:20},fall:{mean:55,variance:20}}},defaultBiome:"temperate-grassland"},"subarctic-maritime":{name:"Subarctic Maritime",description:"Coastal regions with significant ocean influence. Moderated temperatures compared to continental areas at the same latitude, but prone to powerful coastal storms.",gameplayImpact:"Challenging sailing conditions with frequent storms. Snow mixed with rain in winter creates hazardous conditions. Coastal infrastructure vulnerable to storm damage.",parameters:{latitude:62,elevation:100,maritimeInfluence:.9,terrainRoughness:.6,specialFactors:{coastalStorms:.9,highWinds:.8,coldWinters:!0},temperatureProfile:{annual:{mean:40,variance:25},winter:{mean:25,variance:15},spring:{mean:38,variance:15},summer:{mean:55,variance:10},fall:{mean:42,variance:15}},humidityProfile:{annual:{mean:80,variance:15},winter:{mean:85,variance:10},spring:{mean:80,variance:15},summer:{mean:75,variance:15},fall:{mean:80,variance:15}}},defaultBiome:"boreal-forest"},"peatland-muskeg":{name:"Peatland/Muskeg",description:"Waterlogged terrain with sphagnum moss and stunted trees growing on partially frozen soil. Frozen in winter, but thaws into challenging terrain in summer.",gameplayImpact:"Extremely difficult terrain for travel when thawed. Firm travel surface in winter when frozen. Insect swarms in summer. Fire risk in dry periods despite wet appearance.",parameters:{latitude:65,elevation:300,maritimeInfluence:.4,terrainRoughness:.3,specialFactors:{standingWater:.7,permafrost:.7,forestDensity:.4},temperatureProfile:{annual:{mean:30,variance:45},winter:{mean:-10,variance:20},spring:{mean:30,variance:20},summer:{mean:65,variance:15},fall:{mean:35,variance:20}},humidityProfile:{annual:{mean:75,variance:15},winter:{mean:80,variance:10},spring:{mean:80,variance:15},summer:{mean:70,variance:20},fall:{mean:70,variance:15}}},defaultBiome:"tundra"}},polar:{"tundra-plain":{name:"Tundra Plain",description:"Treeless plains with permanently frozen subsoil. Brief summer growing season with 24-hour daylight, followed by a long winter with extended darkness.",gameplayImpact:"24-hour daylight disrupts sleep in summer. Extended darkness in winter affects psychology. Challenging winter survival. Spring/fall bring rapidly changing daylight hours.",parameters:{latitude:78,elevation:1e3,maritimeInfluence:.3,terrainRoughness:.4,specialFactors:{permafrost:.9,polarDay:!0,polarNight:!0,coldWinters:!0},temperatureProfile:{annual:{mean:15,variance:40},winter:{mean:-20,variance:20},spring:{mean:15,variance:15},summer:{mean:45,variance:10},fall:{mean:20,variance:15}},humidityProfile:{annual:{mean:70,variance:15},winter:{mean:75,variance:10},spring:{mean:70,variance:15},summer:{mean:65,variance:15},fall:{mean:70,variance:15}}},defaultBiome:"tundra"},"polar-coast":{name:"Polar Coast",description:"Coastal areas in polar regions where ocean influence moderates the extreme cold. Sea ice forms seasonally, extending the coastline in winter and retreating in summer.",gameplayImpact:"Sea ice allows winter travel but presents dangers. Coastal storms with wind-driven snow. Marine mammal hunting opportunities. Physical and psychological challenges of polar night.",parameters:{latitude:75,elevation:100,maritimeInfluence:.7,terrainRoughness:.5,specialFactors:{seaIce:.8,polarDay:!0,polarNight:!0,highWinds:.7},temperatureProfile:{annual:{mean:20,variance:35},winter:{mean:-5,variance:20},spring:{mean:15,variance:15},summer:{mean:45,variance:10},fall:{mean:25,variance:15}},humidityProfile:{annual:{mean:75,variance:15},winter:{mean:80,variance:10},spring:{mean:75,variance:15},summer:{mean:70,variance:15},fall:{mean:75,variance:15}}},defaultBiome:"tundra"},"ice-sheet":{name:"Ice Sheet",description:"Permanent ice fields with extreme cold and minimal precipitation. Weather is dominated by katabatic winds flowing off the ice sheet. Essentially a cold desert.",gameplayImpact:"Extreme survival challenges. Specialized equipment essential. Disorientating white-out conditions. UV reflection causes snow blindness. Requires expert navigation.",parameters:{latitude:85,elevation:8e3,maritimeInfluence:.1,terrainRoughness:.4,specialFactors:{permanentIce:.9,polarDay:!0,polarNight:!0,extremeCold:.9},temperatureProfile:{annual:{mean:-15,variance:30},winter:{mean:-40,variance:15},spring:{mean:-20,variance:15},summer:{mean:10,variance:10},fall:{mean:-10,variance:15}},humidityProfile:{annual:{mean:60,variance:10},winter:{mean:65,variance:10},spring:{mean:60,variance:10},summer:{mean:55,variance:10},fall:{mean:60,variance:10}}},defaultBiome:"tundra"},"polar-desert":{name:"Polar Desert",description:"High latitude regions with extremely low precipitation, despite cold temperatures. Bare rock and gravel dominate the landscape, with minimal vegetation.",gameplayImpact:"Extremely limited resources. Water availability issues despite cold environment. Wind-driven snow creates drifts and bare areas. Survival challenges from aridity and cold.",parameters:{latitude:80,elevation:3e3,maritimeInfluence:.1,terrainRoughness:.6,specialFactors:{extremeCold:.8,polarDay:!0,polarNight:!0,dryAir:.8},temperatureProfile:{annual:{mean:-5,variance:35},winter:{mean:-30,variance:20},spring:{mean:-5,variance:15},summer:{mean:35,variance:15},fall:{mean:-5,variance:15}},humidityProfile:{annual:{mean:40,variance:15},winter:{mean:45,variance:15},spring:{mean:40,variance:15},summer:{mean:35,variance:15},fall:{mean:40,variance:15}}},defaultBiome:"tundra"},"polar-highland":{name:"Polar Highland",description:"Mountainous terrain at high latitudes, combining the challenges of high elevation with polar conditions. Extreme wind and temperature conditions dominate.",gameplayImpact:"Some of the most challenging terrain and conditions on the planet. Severe windchill factor. Rapid weather changes. Avalanche risk. Specialized mountaineering skills required.",parameters:{latitude:78,elevation:5e3,maritimeInfluence:.2,terrainRoughness:.9,specialFactors:{extremeCold:.8,highWinds:.9,polarDay:!0,polarNight:!0},temperatureProfile:{annual:{mean:-10,variance:35},winter:{mean:-35,variance:20},spring:{mean:-10,variance:15},summer:{mean:25,variance:15},fall:{mean:-5,variance:15}},humidityProfile:{annual:{mean:50,variance:20},winter:{mean:55,variance:15},spring:{mean:50,variance:20},summer:{mean:45,variance:20},fall:{mean:50,variance:20}}},defaultBiome:"tundra"}},special:{"mountain-microclimate":{name:"Mountain Microclimate",description:"Protected valleys, sunny slopes, or wind-sheltered areas that create distinct local climates that differ significantly from the surrounding region.",gameplayImpact:"May support agriculture or habitation in otherwise inhospitable areas. Distinct flora and fauna. Rapid weather changes when leaving the protected zone.",parameters:{latitude:40,elevation:4e3,maritimeInfluence:.4,terrainRoughness:.9,specialFactors:{microclimateFactor:.9,hasFog:!0,lowAtmosphericPressure:.7},temperatureProfile:{annual:{mean:50,variance:15},winter:{mean:35,variance:10},spring:{mean:48,variance:12},summer:{mean:65,variance:12},fall:{mean:52,variance:10}},humidityProfile:{annual:{mean:65,variance:25},winter:{mean:65,variance:20},spring:{mean:70,variance:25},summer:{mean:60,variance:30},fall:{mean:65,variance:25}}},defaultBiome:"temperate-deciduous",compatibleBands:["temperate","tropical","subarctic"]},"geothermal-zone":{name:"Geothermal Zone",description:"Areas with active volcanic or geothermal features creating localized heating and unique environmental conditions. Hot springs, geysers, and steam vents are common.",gameplayImpact:"Local micro-habitats in otherwise harsh environments. Potential health benefits/hazards from mineral waters. Unpredictable geologic activity. Unique resources.",parameters:{latitude:55,elevation:2e3,maritimeInfluence:.5,terrainRoughness:.8,specialFactors:{volcanicActivity:.8,geothermalFeatures:.9,tectonicActivity:.7,sulphurVents:.6},temperatureProfile:{annual:{mean:55,variance:15},winter:{mean:45,variance:10},spring:{mean:52,variance:12},summer:{mean:65,variance:12},fall:{mean:57,variance:10}},humidityProfile:{annual:{mean:70,variance:20},winter:{mean:75,variance:15},spring:{mean:70,variance:20},summer:{mean:65,variance:20},fall:{mean:70,variance:20}}},defaultBiome:"temperate-rainforest",compatibleBands:["equatorial","tropical","temperate","subarctic","polar"]},"convergence-zone":{name:"Convergence Zone",description:"Areas where different climate systems regularly collide, creating highly variable and often dramatic weather patterns. Rapid changes are the norm rather than the exception.",gameplayImpact:"Unpredictable weather requires flexible planning. Storms develop rapidly. Temperature swings require adaptable clothing. Weather forecasting particularly challenging.",parameters:{latitude:45,elevation:1e3,maritimeInfluence:.6,terrainRoughness:.5,specialFactors:{weatherConvergence:.9,highWeatherVariability:.8,thunderstorms:.7,strongSeasonalShifts:.7},temperatureProfile:{annual:{mean:55,variance:40},winter:{mean:30,variance:25},spring:{mean:50,variance:30},summer:{mean:75,variance:25},fall:{mean:55,variance:30}},humidityProfile:{annual:{mean:65,variance:35},winter:{mean:70,variance:30},spring:{mean:70,variance:35},summer:{mean:60,variance:40},fall:{mean:65,variance:35}}},defaultBiome:"temperate-deciduous",compatibleBands:["tropical","temperate","subarctic"]},"rain-shadow":{name:"Rain Shadow",description:"Dry regions on the leeward side of mountain ranges where most moisture is blocked by the mountains. Stark contrast often exists between opposite sides of the same mountain range.",gameplayImpact:"Water scarcity is a primary concern. Large temperature variations between day and night. Vegetation and resources differ dramatically across short distances.",parameters:{latitude:40,elevation:2500,maritimeInfluence:.1,terrainRoughness:.7,specialFactors:{rainShadowEffect:.9,hasDrySeason:!0,highDiurnalVariation:!0},temperatureProfile:{annual:{mean:60,variance:35},winter:{mean:35,variance:20},spring:{mean:55,variance:25},summer:{mean:85,variance:20},fall:{mean:60,variance:25}},humidityProfile:{annual:{mean:30,variance:15},winter:{mean:35,variance:15},spring:{mean:30,variance:15},summer:{mean:20,variance:10},fall:{mean:30,variance:15}}},defaultBiome:"desert",compatibleBands:["tropical","temperate","subarctic"]},"coastal-desert":{name:"Coastal Desert",description:"Unusual arid regions adjacent to oceans, created by cold offshore currents. Often characterized by morning fog but minimal precipitation, creating unique ecosystems.",gameplayImpact:"Morning fog provides water for unique desert-adapted plants. Fishing opportunities despite desert conditions. Cooler temperatures than inland deserts at the same latitude.",parameters:{latitude:25,elevation:500,maritimeInfluence:.7,terrainRoughness:.6,specialFactors:{coldOceanCurrent:.9,coastalFog:.8,hasDrySeason:!0},temperatureProfile:{annual:{mean:65,variance:15},winter:{mean:60,variance:10},spring:{mean:63,variance:10},summer:{mean:70,variance:10},fall:{mean:67,variance:10}},humidityProfile:{annual:{mean:60,variance:25},winter:{mean:65,variance:20},spring:{mean:60,variance:25},summer:{mean:55,variance:25},fall:{mean:60,variance:25}}},defaultBiome:"desert",compatibleBands:["tropical","temperate"]}}};function o(e){return{...i[e]||{},...Object.entries(i.special||{}).filter((t=>{let[n,a]=t;return a.compatibleBands&&a.compatibleBands.includes(e)})).reduce(((e,t)=>{let[n,a]=t;return e[n]=a,e}),{})}}function s(e,t){var n,a,r;return"special"===e?null===(r=i.special[t])||void 0===r?void 0:r.parameters:null===(n=i[e])||void 0===n||null===(a=n[t])||void 0===a?void 0:a.parameters}function l(){const e={};return Object.entries(i).forEach((t=>{let[n,a]=t;"special"!==n&&Object.entries(a).forEach((t=>{let[a,r]=t;e[`${n}:${a}`]={...r,latitudeBand:n}}))})),Object.entries(i.special).forEach((t=>{let[n,a]=t;e[`special:${n}`]={...a,latitudeBand:"special"}})),e}function c(e,t,n){var a;const r="special"===e?i.special[t]:null===(a=i[e])||void 0===a?void 0:a[t];if(!r||!r.parameters)return console.error(`Template not found: ${e}/${t}`),null;const o=r.parameters;return{name:n||r.name,biome:r.defaultBiome,latitude:o.latitude,elevation:o.elevation,maritimeInfluence:o.maritimeInfluence,terrainRoughness:o.terrainRoughness,specialFactors:o.specialFactors,temperatureProfile:o.temperatureProfile,humidityProfile:o.humidityProfile,latitudeBand:e}}},853:(e,t,n)=>{e.exports=n(234)},910:(e,t,n)=>{n.r(t),n.d(t,{shootingStarEffects:()=>i,weatherEffects:()=>a,windIntensityEffects:()=>r});const a={"Clear Skies":{summary:"Standard conditions with no special effects.",visibility:"Normal",movement:"Normal",rest:"Normal",damage:[],checks:[],other:[]},"Light Clouds":{summary:"Partially cloudy sky providing occasional shade.",visibility:"Normal",movement:"Normal",rest:"Normal",damage:[],checks:[],other:["High flying aerial creatures have partial cover."]},"Heavy Clouds":{summary:"Thick cloud cover blocks the sky completely.",visibility:"Normal at ground level",movement:"Normal",rest:"Normal",damage:[],checks:["Disadvantage on checks using Navigation Tools to determine location based on celestial observation."],other:["High flying aerial creatures have total cover.","Outdoor light does not count as sunlight (affects sunlight sensitivity and similar traits)."]},Fog:{summary:"Thick mist severely reduces visibility.",visibility:"Limited to 60 feet. Objects beyond 60 feet are heavily obscured.",movement:"Navigation is difficult. Risk of becoming lost increases.",rest:"Normal",damage:[],checks:["Disadvantage on Perception checks based on sight.","Disadvantage on ranged attack rolls beyond 30 feet."],other:["Creatures more than 60 feet away have total cover.","Navigating by landmarks becomes challenging."]},Rain:{summary:"Steady rainfall affects travel and comfort.",visibility:"Normal, but slightly reduced in heavy downpours.",movement:"Wagon travel at half speed. Areas may become muddy.",rest:"DC 12 Constitution saving throw to benefit from a long rest without shelter.",damage:["-2 to all fire damage rolls."],checks:["Disadvantage on Perception checks that rely on hearing due to the noise of rainfall."],other:["Open flames may be extinguished.","Tracks are easier to follow (advantage on Survival checks for tracking).","After prolonged rain, low-lying areas may flood."]},"Heavy Rain":{summary:"Torrential downpour creates challenging conditions.",visibility:"Reduced to 120 feet. Objects beyond that are lightly obscured.",movement:"Wagon travel at half speed. Multiple consecutive days make wagon travel impossible until one dry day.",rest:"DC 16 Constitution saving throw to benefit from a long rest without shelter.",damage:["-4 to all fire damage rolls.","+2 to lightning and cold damage rolls."],checks:["Disadvantage on Perception checks.","Disadvantage on ranged weapon attacks beyond 60 feet."],other:["Open flames are automatically extinguished.","Flooding likely in low-lying areas.","Verbal communication beyond 30 feet requires shouting."]},"Freezing Cold":{summary:"Dangerously cold temperatures affect survival.",visibility:"Normal",movement:"Normal",rest:"DC 15 Constitution saving throw to benefit from a long rest without heat and shelter.",damage:["+2 to all cold damage rolls."],checks:["Disadvantage on Dexterity checks for characters without cold protection.","Failed rest save by 5 or more results in one level of exhaustion."],other:["Unprotected water sources freeze over.","Characters without adequate cold weather gear must make a DC 10 Constitution saving throw every 2 hours or gain a level of exhaustion."]},Snow:{summary:"Falling snow reduces visibility and hampers movement.",visibility:"Limited to 100 feet. Objects beyond that are lightly obscured.",movement:"All travel speed halved. Two consecutive days makes all terrain difficult and wagon travel impossible until a day without snow.",rest:"As per Freezing Cold condition.",damage:["+1 to all cold damage rolls."],checks:["Tracking is easier in fresh snow (advantage on Survival checks for tracking)."],other:["High flying creatures have total cover.","Terrain gradually becomes difficult terrain as snow accumulates.","Contains all effects of Heavy Clouds and Freezing Cold."]},"Scorching Heat":{summary:"Extreme heat creates dangerous conditions for travel and exertion.",visibility:"Normal, with possible heat shimmer at a distance.",movement:"Normal speed, but travel during day requires twice the water rations.",rest:"Creatures traveling 4+ hours or engaging in heavy activity for 1+ hour during daylight must make a DC 10 Constitution save or gain one level of exhaustion.",damage:["+2 to all fire damage rolls.","-2 to all cold damage rolls."],checks:["Disadvantage on Constitution checks related to endurance."],other:["Double water consumption required.","Risk of heat exhaustion and dehydration.","Metal equipment becomes hot to the touch."]},"Cold Winds":{summary:"Frigid gusts of air across the landscape.",visibility:"Normal",movement:"Difficult to travel against the wind direction.",rest:"DC 10 Constitution saving throw each hour of travel or gain a level of exhaustion unless properly dressed for cold weather.",damage:[],checks:["Disadvantage on ranged attacks due to the wind."],other:["Flying creatures move at half speed against the wind.","Small flying creatures cannot fly against the wind.","Exposed flames may be extinguished."]},Thunderstorm:{summary:"Violent storm with lightning, thunder, and heavy rain.",visibility:"All creatures partially obscured beyond 20 feet.",movement:"As per Heavy Rain.",rest:"As per Heavy Rain.",damage:["+2 to all lightning and thunder damage rolls.","-4 to all fire damage rolls."],checks:["Disadvantage on Perception checks that rely on hearing due to thunder.","Disadvantage on ranged attacks beyond 30 feet."],other:["Roll a d20 after 4+ hours of travel; on a 1, struck by a lightning bolt dealing 3d12 lightning damage.","Open flames automatically extinguished.","All effects of Rain, High Winds, and Heavy Clouds apply."]},Blizzard:{summary:"Severe winter storm combining heavy snow, freezing temperatures, and strong winds.",visibility:"All creatures heavily obscured beyond 20 feet.",movement:"All terrain is difficult terrain. Navigation extremely challenging.",rest:"DC 12 Constitution saving throw each hour in a blizzard or take 3d4 cold damage and gain one level of exhaustion.",damage:["+3 to all cold damage rolls."],checks:["Disadvantage on all Perception checks.","Disadvantage on all ranged attacks."],other:["Creatures have advantage on saves against Constitution if they have proper winter gear.","Contains all effects of Snow, High Winds, and Freezing Cold.","Risk of becoming lost increases significantly."]},"High Humidity Haze":{summary:"Oppressively humid air creating a visible haze.",visibility:"Objects beyond 300 feet are lightly obscured.",movement:"Normal",rest:"Normal, but uncomfortable.",damage:[],checks:["Disadvantage on Constitution checks related to endurance or physical exertion."],other:["Water consumption is doubled for all creatures.","Risk of heat-related illness increases.","Metal equipment may corrode faster."]},"Cold Snap":{summary:"Unseasonable and sudden cold spell.",visibility:"Normal",movement:"Normal",rest:"DC 10 Constitution saving throw every 4 hours or gain a level of exhaustion for creatures not accustomed to cold weather.",damage:[],checks:[],other:["Plants may be damaged, affecting foraging attempts.","Water sources may freeze over unexpectedly.","Creatures without cold adaptation are caught unprepared."]},Hail:{summary:"Ice pellets falling from the sky, ranging from pea-sized to golf ball-sized.",visibility:"Normal, but reduced during intense hailstorms.",movement:"Creatures without cover move at 3/4 speed while actively hailing.",rest:"DC 12 Constitution saving throw to benefit from a long rest without shelter.",damage:["Roll d6 each hour of travel: on a 1, take 1d4 bludgeoning damage from large hailstones."],checks:["Disadvantage on Concentration checks for spellcasting while in the open during hail."],other:["Unprotected creatures may take damage from large hailstones.","Flying creatures tend to seek shelter.","Exposed food or supplies may be damaged."]}},r={Calm:{min:0,max:5,effect:"Air is still or has very light breezes. No effect on gameplay."},Breezy:{min:6,max:14,effect:"Light wind that rustles leaves and can be felt on the face. No mechanical effects."},Windy:{min:15,max:25,effect:"Moderate wind that raises dust and loose paper. Small branches move. Flying creatures can still maneuver normally."},"Strong Winds":{min:26,max:39,effect:"Strong wind creates whistling sounds. Small trees sway. Flying creatures gain +10 movement speed when moving with the wind, and \u201310 movement speed when moving against it. All ranged weapon attacks have a \u20132 to attack rolls."},"Gale Force":{min:40,max:54,effect:"Large branches move, whistling is heard. Umbrellas are difficult to use. Flying creatures have disadvantage on Dexterity checks. Range for thrown weapons and projectiles is halved when shooting into the wind. Small flying creatures must make a DC 15 Strength check to fly against the wind."},"Storm Force":{min:55,max:100,effect:"Whole trees move, walking is difficult. Range for thrown weapons and projectiles is halved. All creatures have disadvantage on Perception checks that rely on hearing. Flying creatures must succeed on a DC 20 Strength check to fly against the wind or be pushed back 10 feet at the end of their turn. Small flying creatures cannot fly against the wind."}},i={"Shooting Star":"A shooting star streaks across the night sky. All creatures who witness it gain 1 luck point as per the Lucky feat.","Meteor Impact":"A blazing meteor crashes to earth somewhere within 1d100 miles! The ground trembles from the impact, and a bright flash illuminates the horizon. Rumors will soon spread of strange materials, valuable metals, or even magical properties at the impact site. Those who investigate may find rare resources worth 2d6 \xd7 100 gp, but beware of others seeking the same prize or strange effects near the impact zone."}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a=n(43),r=n(391);const i=(e,t)=>{try{const n=JSON.stringify(t);return localStorage.setItem(e,n),console.log(`Saved data to ${e} (${n.length} bytes)`),!0}catch(n){return console.error(`Error saving to localStorage (${e}):`,n),!1}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=localStorage.getItem(e);if(null===n)return console.log(`No data found in localStorage for key: ${e}`),t;const a=JSON.parse(n);return console.log(`Loaded data from ${e} (${n.length} bytes)`),a}catch(n){return console.error(`Error loading from localStorage (${e}):`,n),t}},s=e=>{try{return localStorage.removeItem(e),console.log(`Removed data for key: ${e}`),!0}catch(t){return console.error(`Error removing data from localStorage (${e}):`,t),!1}},l=()=>{try{const e=[];for(let t=0;t<localStorage.length;t++)e.push(localStorage.key(t));return console.log("localStorage keys:",e),e}catch(e){return console.error("Error listing localStorage keys:",e),[]}};var c=n(579);const u="gm-weather-companion-world-settings",d={worldName:"My Fantasy World",gameTime:(new Date).toISOString(),calendar:{type:"gregorian",yearLength:365,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],weekLength:7,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},isConfigured:!1},m=(0,a.createContext)(),h="set_world_name",f="set_game_time",p="set_calendar",g="set_is_configured",v="reset_settings",y="load_settings",b="advance_game_time",w=(e,t)=>{switch(t.type){case h:return{...e,worldName:t.payload};case f:return{...e,gameTime:t.payload};case p:return{...e,calendar:t.payload};case g:return{...e,isConfigured:t.payload};case y:return{...e,...t.payload};case b:{const n=new Date(e.gameTime),a=new Date(n);return a.setHours(a.getHours()+t.payload),{...e,gameTime:a.toISOString()}}case v:return{...d};default:return e}},x=e=>{let{children:t}=e;const[n,r]=(0,a.useReducer)(w,d);(0,a.useEffect)((()=>{(()=>{const e=o(u,null);if(e){try{e.gameTime?new Date(e.gameTime):e.gameTime=(new Date).toISOString()}catch(t){console.error("Invalid gameTime in savedSettings:",t),e.gameTime=(new Date).toISOString()}void 0===e.isConfigured&&(e.isConfigured=!1),r({type:y,payload:e})}})()}),[]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{i(u,n)}),100);return()=>clearTimeout(e)}),[n]);const s=e=>{if(!e)return"";const t=new Date(e);return`${n.calendar.monthNames[t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`},l=e=>{if(!e)return"";return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",hour12:!0})},x={state:n,dispatch:r,setWorldName:e=>{r({type:h,payload:e})},setGameTime:e=>{const t=e instanceof Date?e.toISOString():e;r({type:f,payload:t})},setCalendar:e=>{r({type:p,payload:e})},setIsConfigured:e=>{r({type:g,payload:e})},resetSettings:()=>{r({type:v})},advanceGameTime:e=>{r({type:b,payload:e})},formatGameDate:s,formatGameTime:l,formatGameDateTime:e=>`${s(e)} ${l(e)}`};return(0,c.jsx)(m.Provider,{value:x,children:t})},S=()=>{const e=(0,a.useContext)(m);if(!e)throw new Error("useWorldSettings must be used within a WorldSettingsProvider");return e},k="gm-weather-companion-world",C="gm-weather-companion-world-time",N={currentDate:(new Date).toISOString(),weatherHistory:{},lastUpdateTimes:{},isLoading:!1,error:null},T=(0,a.createContext)(),D="set_current_date",M="advance_time",j="update_region_weather",E="update_region_timestamp",R="set_loading",I="set_error",P="sync_with_settings",F=(e,t)=>{switch(t.type){case D:return{...e,currentDate:t.payload};case M:{const n=new Date(e.currentDate);return n.setHours(n.getHours()+t.payload),{...e,currentDate:n.toISOString()}}case j:{const{regionId:n,weatherData:a}=t.payload;return{...e,weatherHistory:{...e.weatherHistory,[n]:a}}}case E:{const{regionId:n,timestamp:a}=t.payload;return{...e,lastUpdateTimes:{...e.lastUpdateTimes,[n]:a}}}case R:return{...e,isLoading:t.payload};case I:return{...e,error:t.payload,isLoading:!1};case P:{const n=new Date(e.currentDate),a=new Date(t.payload);return Math.abs(n-a)>1e3?{...e,currentDate:a.toISOString()}:e}default:return e}},z=e=>{let{children:t}=e;const[n,r]=(0,a.useReducer)(F,N),{state:s}=S();(0,a.useEffect)((()=>{(()=>{l();const e=o("gm-weather-companion-world-settings",null);let t;t=e&&e.gameTime?e.gameTime:o(C,(new Date).toISOString()),r({type:D,payload:t});const n=o(k,{weatherHistory:{},lastUpdateTimes:{}});n.weatherHistory&&Object.entries(n.weatherHistory).forEach((e=>{let[t,n]=e;r({type:j,payload:{regionId:t,weatherData:n}})})),n.lastUpdateTimes&&Object.entries(n.lastUpdateTimes).forEach((e=>{let[t,n]=e;r({type:E,payload:{regionId:t,timestamp:n}})}))})()}),[]),(0,a.useEffect)((()=>{s.gameTime&&s.isConfigured&&r({type:P,payload:s.gameTime})}),[s.gameTime,s.isConfigured]),(0,a.useEffect)((()=>{i(C,n.currentDate);const e={weatherHistory:n.weatherHistory,lastUpdateTimes:n.lastUpdateTimes};Object.keys(n.weatherHistory).length>0&&i(k,e)}),[n.currentDate,n.weatherHistory,n.lastUpdateTimes]);const u=(0,a.useCallback)((e=>{const t=e instanceof Date?e.toISOString():e;r({type:D,payload:t})}),[]),d=(0,a.useCallback)((e=>{r({type:M,payload:e})}),[]),m=(0,a.useCallback)((e=>n.weatherHistory[e]||null),[n.weatherHistory]),h=(0,a.useCallback)(((e,t)=>{r({type:j,payload:{regionId:e,weatherData:t}})}),[]),f=(0,a.useCallback)((e=>n.lastUpdateTimes[e]||null),[n.lastUpdateTimes]),p=(0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).toISOString();r({type:E,payload:{regionId:e,timestamp:t}})}),[]),g=a.useMemo((()=>({currentDate:new Date(n.currentDate),weatherHistory:n.weatherHistory,lastUpdateTimes:n.lastUpdateTimes,isLoading:n.isLoading,error:n.error,setCurrentDate:u,advanceTime:d,getRegionWeather:m,updateRegionWeather:h,getRegionLastUpdateTime:f,updateRegionTimestamp:p})),[n.currentDate,n.weatherHistory,n.lastUpdateTimes,n.isLoading,n.error,u,d,m,h,f,p]);return(0,c.jsx)(T.Provider,{value:g,children:t})},L=()=>{const e=(0,a.useContext)(T);if(!e)throw new Error("useWorld must be used within a WorldProvider");return e};const _=class{constructor(){this.profileCache=new Map,this.latitudeBandMap={equatorial:5,tropical:20,temperate:45,subarctic:65,polar:80}}clearCache(){this.profileCache.clear()}getRegionProfile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${e}-${JSON.stringify(t)}`;if(this.profileCache.has(n))return this.profileCache.get(n);let a;a=t.latitudeBand&&this.latitudeBandMap[t.latitudeBand]?this.latitudeBandMap[t.latitudeBand]:t.latitude||this.getBiomeLatitude(e);const r=t.elevation||this.getBiomeElevation(e),i=t.maritimeInfluence||this.getBiomeMaritimeInfluence(e),o=this.getBiomeTemperatureProfile(e,{...t,latitude:a}),s=this.getBiomeHumidityProfile(e,t),l=t.terrainRoughness||this.getBiomeTerrainRoughness(e),c={...this.getBiomeSpecialFactors(e),...t.specialFactors},u={name:t.name||e,biome:e,latitude:a,elevation:r,maritimeInfluence:i,temperatureProfile:o,humidityProfile:s,terrainRoughness:l,specialFactors:c,latitudeBand:t.latitudeBand};return this.profileCache.set(n,u),u}getSeasonalBaseline(e,t){let n=0;return"winter"===t?n=5:"summer"===t&&(n=-5),{temperature:e.temperatureProfile[t],humidity:e.humidityProfile[t],pressureOffset:n}}getBiomeLatitude(e){return{"tropical-rainforest":5,"tropical-seasonal":15,desert:25,"temperate-grassland":40,"temperate-deciduous":45,"temperate-rainforest":45,"boreal-forest":55,tundra:70}[e]||45}getBiomeElevation(e){return{"tropical-rainforest":500,"tropical-seasonal":800,desert:2e3,"temperate-grassland":1500,"temperate-deciduous":800,"temperate-rainforest":500,"boreal-forest":1200,tundra:1500}[e]||1e3}getBiomeMaritimeInfluence(e){return{"tropical-rainforest":.8,"tropical-seasonal":.4,desert:.1,"temperate-grassland":.2,"temperate-deciduous":.5,"temperate-rainforest":.9,"boreal-forest":.3,tundra:.5}[e]||.5}getBiomeTerrainRoughness(e){return{"tropical-rainforest":.6,"tropical-seasonal":.4,desert:.7,"temperate-grassland":.3,"temperate-deciduous":.5,"temperate-rainforest":.7,"boreal-forest":.6,tundra:.4}[e]||.5}getBiomeSpecialFactors(e){return{"tropical-rainforest":{hasMonsoonSeason:!0,highRainfall:!0,forestDensity:.9},"tropical-seasonal":{hasMonsoonSeason:!0,hasDrySeason:!0,forestDensity:.7},desert:{hasDrySeason:!0,highDiurnalVariation:!0,forestDensity:.1,grasslandDensity:.3},"temperate-grassland":{seasonalPrecipitation:!0,grasslandDensity:.8,forestDensity:.2},"temperate-deciduous":{deciduousForest:!0,forestDensity:.8,grasslandDensity:.2},"temperate-rainforest":{hasFog:!0,highRainfall:!0,forestDensity:.9},"boreal-forest":{coniferousForest:!0,coldWinters:!0,forestDensity:.8},tundra:{hasPermafrost:!0,polarDay:!0,polarNight:!0,forestDensity:.1}}[e]||{}}getBiomeTemperatureProfile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={"tropical-rainforest":{annual:{mean:82,variance:10},winter:{mean:80,variance:8},spring:{mean:82,variance:8},summer:{mean:85,variance:8},fall:{mean:83,variance:8}},"tropical-seasonal":{annual:{mean:80,variance:15},winter:{mean:75,variance:10},spring:{mean:82,variance:12},summer:{mean:88,variance:10},fall:{mean:80,variance:12}},desert:{annual:{mean:75,variance:35},winter:{mean:55,variance:20},spring:{mean:75,variance:20},summer:{mean:95,variance:15},fall:{mean:70,variance:20}},"temperate-grassland":{annual:{mean:55,variance:30},winter:{mean:30,variance:15},spring:{mean:55,variance:20},summer:{mean:80,variance:15},fall:{mean:55,variance:20}},"temperate-deciduous":{annual:{mean:55,variance:30},winter:{mean:35,variance:15},spring:{mean:55,variance:15},summer:{mean:75,variance:15},fall:{mean:55,variance:15}},"temperate-rainforest":{annual:{mean:50,variance:15},winter:{mean:40,variance:10},spring:{mean:50,variance:10},summer:{mean:65,variance:10},fall:{mean:50,variance:10}},"boreal-forest":{annual:{mean:35,variance:40},winter:{mean:5,variance:20},spring:{mean:35,variance:15},summer:{mean:65,variance:15},fall:{mean:40,variance:15}},tundra:{annual:{mean:20,variance:40},winter:{mean:-10,variance:15},spring:{mean:20,variance:15},summer:{mean:50,variance:15},fall:{mean:25,variance:15}}}[e]||{annual:{mean:55,variance:30},winter:{mean:35,variance:15},spring:{mean:55,variance:15},summer:{mean:75,variance:15},fall:{mean:55,variance:15}};let a=JSON.parse(JSON.stringify(n));if(void 0!==t.latitude){const n=this.calculateLatitudeEffect(t.latitude,e);for(const e in a)"annual"!==e&&(a[e].mean+=n[e]||0,t.latitude<30?a[e].variance=Math.max(5,.7*a[e].variance):t.latitude>60&&(a[e].variance=Math.min(50,1.3*a[e].variance)));const r=[a.winter.mean,a.spring.mean,a.summer.mean,a.fall.mean];a.annual.mean=r.reduce(((e,t)=>e+t),0)/r.length}if(!t.temperatureProfile)return a;const r=t.temperatureProfile,i={};for(const l in a){var o,s;i[l]={mean:void 0!==(null===(o=r[l])||void 0===o?void 0:o.mean)?r[l].mean:a[l].mean,variance:void 0!==(null===(s=r[l])||void 0===s?void 0:s.variance)?r[l].variance:a[l].variance}}return i}calculateLatitudeEffect(e,t){const n=this.getBiomeLatitude(t)-e,a=.7*n;return{winter:1*n,spring:a,summer:.5*n,fall:a}}getBiomeHumidityProfile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={"tropical-rainforest":{annual:{mean:85,variance:10,peakDay:172},winter:{mean:85,variance:10},spring:{mean:80,variance:10},summer:{mean:75,variance:10},fall:{mean:80,variance:10}},"tropical-seasonal":{annual:{mean:65,variance:30,peakDay:172},winter:{mean:50,variance:20},spring:{mean:60,variance:20},summer:{mean:80,variance:15},fall:{mean:70,variance:20}},desert:{annual:{mean:25,variance:15,peakDay:172},winter:{mean:30,variance:10},spring:{mean:20,variance:10},summer:{mean:15,variance:5},fall:{mean:25,variance:10}},"temperate-grassland":{annual:{mean:60,variance:20,peakDay:172},winter:{mean:65,variance:15},spring:{mean:60,variance:20},summer:{mean:50,variance:20},fall:{mean:65,variance:15}},"temperate-deciduous":{annual:{mean:65,variance:15,peakDay:172},winter:{mean:70,variance:10},spring:{mean:65,variance:15},summer:{mean:60,variance:20},fall:{mean:70,variance:15}},"temperate-rainforest":{annual:{mean:80,variance:15,peakDay:355},winter:{mean:85,variance:10},spring:{mean:80,variance:10},summer:{mean:75,variance:15},fall:{mean:80,variance:10}},"boreal-forest":{annual:{mean:70,variance:20,peakDay:172},winter:{mean:75,variance:10},spring:{mean:70,variance:15},summer:{mean:65,variance:20},fall:{mean:70,variance:15}},tundra:{annual:{mean:75,variance:15,peakDay:172},winter:{mean:80,variance:10},spring:{mean:75,variance:10},summer:{mean:70,variance:15},fall:{mean:75,variance:10}}}[e]||{annual:{mean:65,variance:15,peakDay:172},winter:{mean:65,variance:15},spring:{mean:60,variance:20},summer:{mean:50,variance:25},fall:{mean:70,variance:15}};if(!t.humidityProfile)return n;const a=t.humidityProfile,r={};for(const u in n){var i,o;r[u]={mean:void 0!==(null===(i=a[u])||void 0===i?void 0:i.mean)?a[u].mean:n[u].mean,variance:void 0!==(null===(o=a[u])||void 0===o?void 0:o.variance)?a[u].variance:n[u].variance}}var s,l,c;n.annual&&(r.annual={mean:void 0!==(null===(s=a.annual)||void 0===s?void 0:s.mean)?a.annual.mean:n.annual.mean,variance:void 0!==(null===(l=a.annual)||void 0===l?void 0:l.variance)?a.annual.variance:n.annual.variance,peakDay:void 0!==(null===(c=a.annual)||void 0===c?void 0:c.peakDay)?a.annual.peakDay:n.annual.peakDay});return r}generateRegionDescription(e){let t="temperate";t=e.latitude<=10?"equatorial":e.latitude<=30?"tropical":e.latitude<=60?"temperate":e.latitude<=75?"subarctic":"polar";let n="low-elevation";n=e.elevation>=5e3?"high mountain":e.elevation>=3e3?"mountainous":e.elevation>=1500?"high-elevation":e.elevation>=500?"hilly":"low-elevation";let a="";a=e.maritimeInfluence>=.8?"with strong coastal influence":e.maritimeInfluence>=.5?"with moderate maritime influence":e.maritimeInfluence>=.2?"with slight maritime influence":"with continental (inland) climate";let r="";return r=e.terrainRoughness>=.8?" and varied, rugged terrain":e.terrainRoughness>=.5?" and hilly, variable terrain":e.terrainRoughness>=.3?" and gently rolling terrain":" and predominantly flat terrain",`A ${n} ${t} region ${a}${r}. `+this.generateWeatherPrediction(e)}generateWeatherPrediction(e){e.latitude;let t="";t=e.latitude<=20?"Consistently warm temperatures throughout the year":e.maritimeInfluence>=.7?"Moderate temperatures with limited seasonal variation":e.latitude>=60?"Very cold winters and short, cool summers":"Distinct seasonal temperature changes";let n="";return n=e.maritimeInfluence>=.7&&e.latitude<40?" and high humidity with frequent rainfall":e.maritimeInfluence>=.7?" and regular precipitation throughout the year":e.maritimeInfluence<=.2&&e.elevation>=3e3?" and generally dry conditions with sporadic precipitation":e.maritimeInfluence<=.3?" and limited precipitation, especially in summer":" and moderate, seasonal precipitation patterns",t+n+"."}findRealWorldAnalog(e){const t=[{conditions:{latitude:{min:0,max:10},elevation:{min:0,max:1e3},maritimeInfluence:{min:.7,max:1}},location:"Costa Rica or Singapore"},{conditions:{latitude:{min:20,max:35},elevation:{min:1500,max:5e3},maritimeInfluence:{min:0,max:.2}},location:"Arizona or Northern Mexico"},{conditions:{latitude:{min:40,max:50},elevation:{min:0,max:1e3},maritimeInfluence:{min:.7,max:1}},location:"Pacific Northwest or Southern England"},{conditions:{latitude:{min:40,max:50},elevation:{min:0,max:1e3},maritimeInfluence:{min:0,max:.3}},location:"American Midwest or Ukraine"},{conditions:{latitude:{min:40,max:55},elevation:{min:3e3,max:1e4},maritimeInfluence:{min:0,max:.3}},location:"Rocky Mountains or Alps"},{conditions:{latitude:{min:55,max:65},elevation:{min:0,max:2e3},maritimeInfluence:{min:0,max:.4}},location:"Siberia or Northern Canada"},{conditions:{latitude:{min:65,max:90},elevation:{min:0,max:2e3},maritimeInfluence:{min:0,max:1}},location:"Northern Alaska or Greenland"},{conditions:{latitude:{min:10,max:30},elevation:{min:0,max:1500},maritimeInfluence:{min:.4,max:1}},location:"Southern Florida or Northern Thailand"},{conditions:{latitude:{min:10,max:30},biome:"tropical-seasonal",maritimeInfluence:{min:0,max:.4}},location:"Central India or Northern Australia"},{conditions:{latitude:{min:10,max:30},biome:"temperate-deciduous",maritimeInfluence:{min:.4,max:1}},location:"Central and Southern Mexico"}].filter((t=>{const n=t.conditions;let a=!0;return n.latitude&&(a=a&&e.latitude>=n.latitude.min&&e.latitude<=n.latitude.max),n.elevation&&a&&(a=a&&e.elevation>=n.elevation.min&&e.elevation<=n.elevation.max),n.maritimeInfluence&&a&&(a=a&&e.maritimeInfluence>=n.maritimeInfluence.min&&e.maritimeInfluence<=n.maritimeInfluence.max),n.biome&&a&&(a=a&&e.biome===n.biome),a}));return t.length>0?`This region has similar climate characteristics to ${t[0].location}.`:"This region has a unique combination of characteristics without a simple real-world analog."}createProfileFromTemplate(e,t,a){var r,i;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.log(`[ProfileService] Creating profile from template: ${e}/${t}, name: ${a}`);const{regionTemplates:s}=n(739),l="special"===e?null===(r=s.special)||void 0===r?void 0:r[t]:null===(i=s[e])||void 0===i?void 0:i[t];if(!l||!l.parameters){console.error(`[ProfileService] Template not found or incomplete: ${e}/${t}`);const n=this.getFallbackBiome(e);return console.log(`[ProfileService] Using fallback biome for ${e}: ${n}`),this.getRegionProfile(n,{name:a,latitudeBand:e})}const c=l.parameters,u=l.defaultBiome||this.getBiomeFromParameters(c);console.log("[ProfileService] Using template params:",{latitudeBand:e,templateId:t,biome:u,latitude:c.latitude});const d={name:a||l.name,biome:u,climate:u,latitude:c.latitude,elevation:c.elevation,maritimeInfluence:c.maritimeInfluence,terrainRoughness:c.terrainRoughness,specialFactors:c.specialFactors,temperatureProfile:c.temperatureProfile,humidityProfile:c.humidityProfile,latitudeBand:e,templateId:t,template:{name:l.name,description:l.description,gameplayImpact:l.gameplayImpact}},m={...d,...o};o.specialFactors&&(m.specialFactors={...d.specialFactors,...o.specialFactors}),o.temperatureProfile&&(m.temperatureProfile=this.mergeTemperatureProfiles(d.temperatureProfile,o.temperatureProfile)),o.humidityProfile&&(m.humidityProfile=this.mergeHumidityProfiles(d.humidityProfile,o.humidityProfile));const h=this.getRegionProfile(m.biome,m);return console.log("[ProfileService] Final profile created:",{biome:h.biome,latitude:h.latitude,latitudeBand:h.latitudeBand}),h}mergeTemperatureProfiles(e,t){const n={...e};for(const a in t)e[a]?n[a]={...e[a],...t[a]}:n[a]=t[a];return n}mergeHumidityProfiles(e,t){const n={...e};for(const a in t)e[a]?n[a]={...e[a],...t[a]}:n[a]=t[a];return n}getFallbackBiome(e){return{equatorial:"tropical-rainforest",tropical:"tropical-seasonal",temperate:"temperate-deciduous",subarctic:"boreal-forest",polar:"tundra",special:"temperate-deciduous"}[e]||"temperate-deciduous"}getBiomeFromParameters(e){const{latitude:t,elevation:n,maritimeInfluence:a,specialFactors:r={}}=e;return t<=10?r.highRainfall?"tropical-rainforest":"tropical-seasonal":t<=30?r.hasDrySeason&&a<.3?"desert":"tropical-seasonal":t<=60?r.highRainfall&&a>.7?"temperate-rainforest":r.grasslandDensity>.5?"temperate-grassland":"temperate-deciduous":t<=75?"boreal-forest":"tundra"}},H={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let W;const B=new Uint8Array(16);function A(){if(!W&&(W="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(B)}const O=[];for(let Lt=0;Lt<256;++Lt)O.push((Lt+256).toString(16).slice(1));function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]}const U=function(e,t,n){if(H.randomUUID&&!t&&!e)return H.randomUUID();const a=(e=e||{}).random||(e.rng||A)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return $(a)},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"diceTable";const r=!!t;console.log(`[RegionUtils] Processing region data (${r?"UPDATE":"CREATE"})`,{name:e.name,latitudeBand:e.latitudeBand,existingLatitudeBand:null===t||void 0===t?void 0:t.latitudeBand,climate:e.climate,existingClimate:null===t||void 0===t?void 0:t.climate,templateId:e.templateId,existingTemplateId:(null===t||void 0===t?void 0:t.templateId)||(null!==t&&void 0!==t&&t.templateInfo?t.templateInfo.templateId:null)});const i=e.name||(t?t.name:""),o=e.latitudeBand||(t?t.latitudeBand||(t.profile?t.profile.latitudeBand:"temperate"):"temperate"),s=e.climate||(t?t.climate||(t.profile?t.profile.climate||t.profile.biome:"temperate-deciduous"):"temperate-deciduous"),l=e.templateId||(t?t.templateId||(t.templateInfo?t.templateInfo.templateId:null):null);console.log("[RegionUtils] Resolved base properties:",{name:i,latitudeBand:o,climate:s,templateId:l});let c=null;l?(console.log(`[RegionUtils] Creating profile from template: ${o}/${l}`),c=n.createProfileFromTemplate(o,l,i)):(console.log(`[RegionUtils] Creating basic profile: ${s}, ${o}`),c=n.getRegionProfile(s,{name:i,latitudeBand:o})),c&&!c.latitudeBand&&(console.log(`[RegionUtils] Fixing missing latitudeBand in profile: ${o}`),c.latitudeBand=o),c&&!c.climate&&(console.log(`[RegionUtils] Fixing missing climate in profile: ${s}`),c.climate=s);const u=t?{...t}:{id:U(),createdAt:(new Date).toISOString()};return Object.assign(u,{name:i,profile:c,latitudeBand:o,climate:s,templateInfo:l?{latitudeBand:o,templateId:l}:t?t.templateInfo:null,templateId:l,weatherType:a,updatedAt:(new Date).toISOString()}),console.log("[RegionUtils] Final processed region:",{name:u.name,latitudeBand:u.latitudeBand,profileLatitudeBand:u.profile.latitudeBand,climate:u.climate,profileClimate:u.profile.climate||u.profile.biome,templateId:u.templateId,weatherType:u.weatherType}),u},q="gm-weather-companion-regions",Y="gm-weather-companion-active-region",G=new _,Q={regions:[],activeRegionId:null,isLoading:!1,error:null},K=(0,a.createContext)(),J="set_regions",X="add_region",Z="update_region",ee="delete_region",te="set_active_region",ne="set_loading",ae="set_error",re=(e,t)=>{switch(t.type){case J:return{...e,regions:t.payload,isLoading:!1};case X:return{...e,regions:[...e.regions,t.payload],activeRegionId:t.payload.id,isLoading:!1};case Z:return{...e,regions:e.regions.map((e=>e.id===t.payload.id?t.payload:e)),isLoading:!1};case ee:{const n=e.regions.filter((e=>e.id!==t.payload)),a=e.activeRegionId===t.payload?n.length>0?n[0].id:null:e.activeRegionId;return{...e,regions:n,activeRegionId:a,isLoading:!1}}case te:return{...e,activeRegionId:t.payload};case ne:return{...e,isLoading:t.payload};case ae:return{...e,error:t.payload,isLoading:!1};default:return e}},ie=e=>{let{children:t}=e;const[n,r]=(0,a.useReducer)(re,Q);(0,a.useEffect)((()=>{(()=>{r({type:ne,payload:!0}),l();const e=o(q,[]);e&&e.length>0&&r({type:J,payload:e});const t=o(Y,null);t&&r({type:te,payload:t}),r({type:ne,payload:!1})})()}),[]),(0,a.useEffect)((()=>{n.isLoading||i(q,n.regions)}),[n.regions,n.isLoading]),(0,a.useEffect)((()=>{n.activeRegionId?i(Y,n.activeRegionId):s(Y)}),[n.activeRegionId]);const u=a.useMemo((()=>({state:n,dispatch:r})),[n]);return(0,c.jsx)(K.Provider,{value:u,children:t})},oe=()=>{const e=(0,a.useContext)(K);if(!e)throw new Error("useRegion must be used within a RegionProvider");const{state:t,dispatch:n}=e,r=a.useMemo((()=>t.regions.find((e=>e.id===t.activeRegionId))||null),[t.regions,t.activeRegionId]),i=t.regions.length>0;return{regions:t.regions,activeRegion:r,hasRegions:i,isLoading:t.isLoading,error:t.error,createRegion:e=>{let t="diceTable";try{const e=localStorage.getItem("gm-weather-companion-preferences");if(e){t=JSON.parse(e).weatherSystem||"diceTable"}}catch(r){console.error("Error reading preferences:",r)}console.log(`[RegionContext] Creating region with weather system: ${t}`);const a=V(e,null,G,t);return n({type:X,payload:a}),a},updateRegion:(e,a)=>{const r=t.regions.find((t=>t.id===e));let i=(null===r||void 0===r?void 0:r.weatherType)||"diceTable";try{const e=localStorage.getItem("gm-weather-companion-preferences");if(e){i=JSON.parse(e).weatherSystem||i}}catch(s){console.error("Error reading preferences:",s)}if(!r)return console.error(`Region with id ${e} not found`),null;console.log(`[RegionContext] Updating region with weather system: ${i}`);const o=V(a,r,G,i);return n({type:Z,payload:o}),o},deleteRegion:e=>{n({type:ee,payload:e})},setActiveRegion:e=>{n({type:te,payload:e})}}},se="gm-weather-companion-preferences",le="gm-weather-companion-regions",ce={weatherSystem:"diceTable",debugMode:!1,isOpen:!1},ue=(0,a.createContext)(),de="set_weather_system",me="set_debug_mode",he="toggle_preferences_menu",fe="load_preferences",pe=(e,t)=>{switch(t.type){case de:return{...e,weatherSystem:t.payload};case me:return{...e,debugMode:t.payload};case he:return{...e,isOpen:!e.isOpen};case fe:return{...e,...t.payload,isOpen:e.isOpen};default:return e}},ge=e=>{let{children:t}=e;const[n,r]=(0,a.useReducer)(pe,ce),s=(0,a.useRef)(n.weatherSystem);(0,a.useEffect)((()=>{(()=>{const e=o(se,null);e&&(r({type:fe,payload:e}),s.current=e.weatherSystem||"diceTable")})()}),[]),(0,a.useEffect)((()=>{const e={weatherSystem:n.weatherSystem,debugMode:n.debugMode};i(se,e),s.current!==n.weatherSystem&&(console.log(`Weather system changed from ${s.current} to ${n.weatherSystem}`),l(n.weatherSystem),s.current=n.weatherSystem)}),[n.weatherSystem,n.debugMode]);const l=e=>{try{const t=o(le,[]);if(!t||0===t.length)return void console.log("No regions to update");console.log(`Updating ${t.length} regions to use weather system: ${e}`);const n=t.map((t=>({...t,weatherType:e})));i(le,n),console.log("Regions updated successfully");const a=Object.keys(localStorage).filter((e=>e.startsWith("gm-weather-companion-")&&e.includes("weather")));for(const e of a)e!==le&&e!==se&&(console.log(`Clearing cached weather data: ${e}`),localStorage.removeItem(e))}catch(t){console.error("Error updating regions:",t)}},u={state:n,setWeatherSystem:e=>{r({type:de,payload:e})},setDebugMode:e=>{r({type:me,payload:e})},togglePreferencesMenu:()=>{r({type:he})},updateAllRegionsWeatherType:l};return(0,c.jsx)(ue.Provider,{value:u,children:t})},ve=()=>{const e=(0,a.useContext)(ue);if(!e)throw new Error("usePreferences must be used within a PreferencesProvider");return e};var ye=n(739);class be{constructor(){this.windDirections=["N","NE","E","SE","S","SW","W","NW"],this.currentWindDirection=this.getRandomWindDirection(),this.currentWindSpeed=5}getSeasonFromDate(e){const t=new Date(e.getFullYear(),2,20),n=new Date(e.getFullYear(),5,21),a=new Date(e.getFullYear(),8,22),r=new Date(e.getFullYear(),11,21),i=new Date(e);return i.setHours(12,0,0,0),t.setHours(12,0,0,0),n.setHours(12,0,0,0),a.setHours(12,0,0,0),r.setHours(12,0,0,0),i>=r||i<t?"winter":i>=t&&i<n?"spring":i>=n&&i<a?"summer":"fall"}getRandomWindDirection(){return this.windDirections[Math.floor(Math.random()*this.windDirections.length)]}rollD4(){return Math.floor(4*Math.random())+1}rollD6(){return Math.floor(6*Math.random())+1}rollD8(){return Math.floor(8*Math.random())+1}rollD20(){return Math.floor(20*Math.random())+1}rollD100(){return Math.floor(100*Math.random())+1}weightedD100(){const e=this.rollD6()+this.rollD6()+this.rollD6(),t=Math.floor((e-3)/15*100)+1;return Math.min(Math.max(t,1),100)}getSeasonalBlendFactor(e){const t=this.getSeasonFromDate(e);let n,a,r;const i=e.getFullYear(),o=new Date(i,2,20),s=new Date(i,5,21),l=new Date(i,8,22),c=new Date(i,11,21),u=new Date(e);u.setHours(12,0,0,0),o.setHours(12,0,0,0),s.setHours(12,0,0,0),l.setHours(12,0,0,0),c.setHours(12,0,0,0),"winter"===t?u<o?(a=new Date(i,0,1),r=o,n="spring"):(a=c,r=new Date(i+1,2,20),n="spring"):"spring"===t?(a=o,r=s,n="summer"):"summer"===t?(a=s,r=l,n="fall"):(a=l,r=c,n="winter");const d=(r-a)/864e5,m=(u-a)/864e5,h=Math.min(14,d/2);return m>=d-h?(m-(d-h))/h:0}getPreviousSeason(e){const t=["winter","spring","summer","fall"],n=t.indexOf(e);return t[(n+3)%4]}getNextSeason(e){const t=["winter","spring","summer","fall"],n=t.indexOf(e);return t[(n+1)%4]}}const we={"tropical-rainforest":{winter:[{min:1,max:20,condition:"Thunderstorm"},{min:21,max:50,condition:"Heavy Rain"},{min:51,max:75,condition:"Rain"},{min:76,max:90,condition:"Light Clouds"},{min:91,max:100,condition:"Clear Skies"}],spring:[{min:1,max:15,condition:"Thunderstorm"},{min:16,max:35,condition:"Heavy Rain"},{min:36,max:65,condition:"Rain"},{min:66,max:90,condition:"Light Clouds"},{min:91,max:100,condition:"Clear Skies"}],summer:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:25,condition:"Rain"},{min:26,max:60,condition:"Light Clouds"},{min:61,max:95,condition:"Clear Skies"},{min:96,max:100,condition:"High Humidity Haze"}],fall:[{min:1,max:15,condition:"Thunderstorm"},{min:16,max:40,condition:"Heavy Rain"},{min:41,max:65,condition:"Rain"},{min:66,max:85,condition:"Light Clouds"},{min:86,max:100,condition:"Clear Skies"}]},"tropical-seasonal":{winter:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:15,condition:"Rain"},{min:16,max:50,condition:"Light Clouds"},{min:51,max:95,condition:"Clear Skies"},{min:96,max:100,condition:"Scorching Heat"}],spring:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:25,condition:"Rain"},{min:26,max:60,condition:"Light Clouds"},{min:61,max:95,condition:"Clear Skies"},{min:96,max:100,condition:"Scorching Heat"}],summer:[{min:1,max:20,condition:"Thunderstorm"},{min:21,max:40,condition:"Heavy Rain"},{min:41,max:65,condition:"Rain"},{min:66,max:85,condition:"Light Clouds"},{min:86,max:100,condition:"Clear Skies"}],fall:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:25,condition:"Rain"},{min:26,max:65,condition:"Light Clouds"},{min:66,max:100,condition:"Clear Skies"}]},desert:{winter:[{min:1,max:5,condition:"Rain"},{min:6,max:20,condition:"Light Clouds"},{min:21,max:80,condition:"Clear Skies"},{min:81,max:95,condition:"Cold Winds"},{min:96,max:100,condition:"Freezing Cold"}],spring:[{min:1,max:10,condition:"Rain"},{min:11,max:30,condition:"Light Clouds"},{min:31,max:85,condition:"Clear Skies"},{min:86,max:100,condition:"Scorching Heat"}],summer:[{min:1,max:2,condition:"Thunderstorm"},{min:3,max:10,condition:"Rain"},{min:11,max:30,condition:"Light Clouds"},{min:31,max:80,condition:"Clear Skies"},{min:81,max:100,condition:"Scorching Heat"}],fall:[{min:1,max:5,condition:"Rain"},{min:6,max:25,condition:"Light Clouds"},{min:26,max:85,condition:"Clear Skies"},{min:86,max:100,condition:"Scorching Heat"}]},"temperate-grassland":{winter:[{min:1,max:5,condition:"Blizzard"},{min:6,max:20,condition:"Snow"},{min:21,max:40,condition:"Freezing Cold"},{min:41,max:60,condition:"Heavy Clouds"},{min:61,max:85,condition:"Light Clouds"},{min:86,max:100,condition:"Clear Skies"}],spring:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:30,condition:"Rain"},{min:31,max:55,condition:"Light Clouds"},{min:56,max:95,condition:"Clear Skies"},{min:96,max:100,condition:"Scorching Heat"}],summer:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:20,condition:"Rain"},{min:21,max:45,condition:"Light Clouds"},{min:46,max:90,condition:"Clear Skies"},{min:91,max:100,condition:"Scorching Heat"}],fall:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:15,condition:"Rain"},{min:16,max:30,condition:"Heavy Clouds"},{min:31,max:60,condition:"Light Clouds"},{min:61,max:100,condition:"Clear Skies"}]},"temperate-deciduous":{winter:[{min:1,max:5,condition:"Blizzard"},{min:6,max:15,condition:"Snow"},{min:16,max:35,condition:"Freezing Cold"},{min:36,max:55,condition:"Heavy Clouds"},{min:56,max:80,condition:"Light Clouds"},{min:81,max:100,condition:"Clear Skies"}],spring:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:30,condition:"Rain"},{min:31,max:55,condition:"Light Clouds"},{min:56,max:95,condition:"Clear Skies"},{min:96,max:100,condition:"Scorching Heat"}],summer:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:20,condition:"Rain"},{min:21,max:45,condition:"Light Clouds"},{min:46,max:85,condition:"Clear Skies"},{min:86,max:100,condition:"Scorching Heat"}],fall:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:20,condition:"Rain"},{min:21,max:35,condition:"Heavy Clouds"},{min:36,max:65,condition:"Light Clouds"},{min:66,max:100,condition:"Clear Skies"}]},"temperate-rainforest":{winter:[{min:1,max:10,condition:"Heavy Rain"},{min:11,max:30,condition:"Rain"},{min:31,max:50,condition:"Light Clouds"},{min:51,max:75,condition:"Heavy Clouds"},{min:76,max:100,condition:"Clear Skies"}],spring:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:25,condition:"Heavy Rain"},{min:26,max:45,condition:"Rain"},{min:46,max:75,condition:"Light Clouds"},{min:76,max:100,condition:"Clear Skies"}],summer:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:15,condition:"Heavy Rain"},{min:16,max:35,condition:"Rain"},{min:36,max:60,condition:"Light Clouds"},{min:61,max:90,condition:"Clear Skies"},{min:91,max:100,condition:"Scorching Heat"}],fall:[{min:1,max:10,condition:"Thunderstorm"},{min:11,max:25,condition:"Heavy Rain"},{min:26,max:40,condition:"Rain"},{min:41,max:65,condition:"Light Clouds"},{min:66,max:85,condition:"Heavy Clouds"},{min:86,max:100,condition:"Clear Skies"}]},"boreal-forest":{winter:[{min:1,max:10,condition:"Blizzard"},{min:11,max:30,condition:"Snow"},{min:31,max:50,condition:"Freezing Cold"},{min:51,max:70,condition:"Heavy Clouds"},{min:71,max:85,condition:"Light Clouds"},{min:86,max:100,condition:"Clear Skies"}],spring:[{min:1,max:10,condition:"Snow"},{min:11,max:20,condition:"Freezing Cold"},{min:21,max:35,condition:"Rain"},{min:36,max:50,condition:"Heavy Clouds"},{min:51,max:75,condition:"Light Clouds"},{min:76,max:100,condition:"Clear Skies"}],summer:[{min:1,max:5,condition:"Thunderstorm"},{min:6,max:15,condition:"Rain"},{min:16,max:35,condition:"Light Clouds"},{min:36,max:90,condition:"Clear Skies"},{min:91,max:100,condition:"Scorching Heat"}],fall:[{min:1,max:10,condition:"Snow"},{min:11,max:25,condition:"Rain"},{min:26,max:40,condition:"Heavy Clouds"},{min:41,max:65,condition:"Light Clouds"},{min:66,max:100,condition:"Clear Skies"}]},tundra:{winter:[{min:1,max:15,condition:"Blizzard"},{min:16,max:35,condition:"Snow"},{min:36,max:60,condition:"Freezing Cold"},{min:61,max:80,condition:"Heavy Clouds"},{min:81,max:95,condition:"Light Clouds"},{min:96,max:100,condition:"Clear Skies"}],spring:[{min:1,max:10,condition:"Snow"},{min:11,max:30,condition:"Freezing Cold"},{min:31,max:50,condition:"Heavy Clouds"},{min:51,max:75,condition:"Light Clouds"},{min:76,max:100,condition:"Clear Skies"}],summer:[{min:1,max:5,condition:"Rain"},{min:6,max:20,condition:"Light Clouds"},{min:21,max:75,condition:"Clear Skies"},{min:76,max:100,condition:"Cold Snap"}],fall:[{min:1,max:15,condition:"Snow"},{min:16,max:30,condition:"Freezing Cold"},{min:31,max:50,condition:"Heavy Clouds"},{min:51,max:70,condition:"Light Clouds"},{min:71,max:100,condition:"Clear Skies"}]}},xe={temperate:"temperate-deciduous",desert:"desert",arctic:"tundra",tropical:"tropical-rainforest",coastal:"temperate-rainforest",mountain:"boreal-forest",forest:"temperate-deciduous",swamp:"tropical-seasonal"},Se={"tropical-rainforest":{winter:{Thunderstorm:{min:70,max:85},"Heavy Rain":{min:72,max:88},Rain:{min:75,max:90},"Light Clouds":{min:78,max:92},"Clear Skies":{min:80,max:95},"High Humidity Haze":{min:82,max:98}},spring:{Thunderstorm:{min:72,max:88},"Heavy Rain":{min:75,max:90},Rain:{min:78,max:92},"Light Clouds":{min:80,max:95},"Clear Skies":{min:82,max:98}},summer:{Thunderstorm:{min:75,max:90},Rain:{min:78,max:92},"Light Clouds":{min:80,max:95},"Clear Skies":{min:82,max:100},"High Humidity Haze":{min:85,max:102}},fall:{Thunderstorm:{min:72,max:88},"Heavy Rain":{min:75,max:90},Rain:{min:77,max:92},"Light Clouds":{min:78,max:94},"Clear Skies":{min:80,max:96}}},"tropical-seasonal":{winter:{Thunderstorm:{min:65,max:85},Rain:{min:68,max:88},"Light Clouds":{min:70,max:90},"Clear Skies":{min:72,max:95},"Scorching Heat":{min:85,max:105}},spring:{Thunderstorm:{min:70,max:90},Rain:{min:72,max:92},"Light Clouds":{min:75,max:95},"Clear Skies":{min:78,max:98},"Scorching Heat":{min:85,max:105}},summer:{Thunderstorm:{min:75,max:95},"Heavy Rain":{min:78,max:98},Rain:{min:80,max:100},"Light Clouds":{min:82,max:102},"Clear Skies":{min:85,max:105}},fall:{Thunderstorm:{min:70,max:90},Rain:{min:72,max:92},"Light Clouds":{min:75,max:95},"Clear Skies":{min:78,max:98}}},desert:{winter:{Rain:{min:40,max:60},"Light Clouds":{min:45,max:65},"Clear Skies":{min:50,max:70},"Cold Winds":{min:35,max:55},"Freezing Cold":{min:20,max:45}},spring:{Rain:{min:55,max:75},"Light Clouds":{min:60,max:80},"Clear Skies":{min:65,max:90},"Scorching Heat":{min:85,max:105}},summer:{Thunderstorm:{min:75,max:95},Rain:{min:80,max:100},"Light Clouds":{min:85,max:105},"Clear Skies":{min:90,max:115},"Scorching Heat":{min:100,max:125}},fall:{Rain:{min:60,max:80},"Light Clouds":{min:65,max:85},"Clear Skies":{min:70,max:90},"Scorching Heat":{min:85,max:105}}},"temperate-grassland":{winter:{Blizzard:{min:5,max:25},Snow:{min:10,max:30},"Freezing Cold":{min:15,max:35},"Heavy Clouds":{min:25,max:40},"Light Clouds":{min:30,max:45},"Clear Skies":{min:25,max:40}},spring:{Thunderstorm:{min:45,max:65},Rain:{min:50,max:70},"Light Clouds":{min:55,max:75},"Clear Skies":{min:60,max:80},"Scorching Heat":{min:75,max:95}},summer:{Thunderstorm:{min:65,max:85},Rain:{min:70,max:90},"Light Clouds":{min:75,max:95},"Clear Skies":{min:80,max:100},"Scorching Heat":{min:90,max:110}},fall:{Thunderstorm:{min:50,max:70},Rain:{min:45,max:65},"Heavy Clouds":{min:40,max:60},"Light Clouds":{min:45,max:65},"Clear Skies":{min:50,max:70}}},"temperate-deciduous":{winter:{Blizzard:{min:10,max:25},Snow:{min:15,max:30},"Freezing Cold":{min:20,max:35},"Heavy Clouds":{min:25,max:40},"Light Clouds":{min:30,max:45},"Clear Skies":{min:25,max:40}},spring:{Thunderstorm:{min:50,max:70},Rain:{min:55,max:75},"Light Clouds":{min:60,max:80},"Clear Skies":{min:65,max:85},"Scorching Heat":{min:80,max:100}},summer:{Thunderstorm:{min:70,max:90},Rain:{min:75,max:95},"Light Clouds":{min:80,max:100},"Clear Skies":{min:85,max:105},"Scorching Heat":{min:95,max:115}},fall:{Thunderstorm:{min:50,max:70},Rain:{min:45,max:65},"Heavy Clouds":{min:40,max:60},"Light Clouds":{min:45,max:65},"Clear Skies":{min:50,max:70}}},"temperate-rainforest":{winter:{"Heavy Rain":{min:35,max:50},Rain:{min:40,max:55},"Light Clouds":{min:42,max:58},"Heavy Clouds":{min:38,max:52},"Clear Skies":{min:40,max:55}},spring:{Thunderstorm:{min:45,max:65},"Heavy Rain":{min:48,max:68},Rain:{min:50,max:70},"Light Clouds":{min:52,max:72},"Clear Skies":{min:55,max:75}},summer:{Thunderstorm:{min:60,max:80},"Heavy Rain":{min:62,max:82},Rain:{min:65,max:85},"Light Clouds":{min:68,max:88},"Clear Skies":{min:70,max:90},"Scorching Heat":{min:80,max:100}},fall:{Thunderstorm:{min:45,max:65},"Heavy Rain":{min:42,max:62},Rain:{min:40,max:60},"Light Clouds":{min:45,max:65},"Heavy Clouds":{min:40,max:60},"Clear Skies":{min:50,max:70}}},"boreal-forest":{winter:{Blizzard:{min:-15,max:10},Snow:{min:-10,max:15},"Freezing Cold":{min:-5,max:20},"Heavy Clouds":{min:0,max:25},"Light Clouds":{min:5,max:30},"Clear Skies":{min:-5,max:25}},spring:{Snow:{min:20,max:40},"Freezing Cold":{min:25,max:45},Rain:{min:35,max:55},"Heavy Clouds":{min:30,max:50},"Light Clouds":{min:35,max:55},"Clear Skies":{min:40,max:60}},summer:{Thunderstorm:{min:55,max:75},Rain:{min:60,max:80},"Light Clouds":{min:65,max:85},"Clear Skies":{min:70,max:90},"Scorching Heat":{min:80,max:100}},fall:{Snow:{min:25,max:45},Rain:{min:30,max:50},"Heavy Clouds":{min:25,max:45},"Light Clouds":{min:30,max:50},"Clear Skies":{min:35,max:55}}},tundra:{winter:{Blizzard:{min:-30,max:0},Snow:{min:-25,max:5},"Freezing Cold":{min:-20,max:10},"Heavy Clouds":{min:-15,max:15},"Light Clouds":{min:-10,max:20},"Clear Skies":{min:-20,max:10}},spring:{Snow:{min:-5,max:25},"Freezing Cold":{min:0,max:30},"Heavy Clouds":{min:10,max:35},"Light Clouds":{min:15,max:40},"Clear Skies":{min:20,max:45}},summer:{Rain:{min:35,max:60},"Light Clouds":{min:40,max:65},"Clear Skies":{min:45,max:70},"Cold Snap":{min:30,max:50}},fall:{Snow:{min:5,max:30},"Freezing Cold":{min:0,max:25},"Heavy Clouds":{min:10,max:35},"Light Clouds":{min:15,max:40},"Clear Skies":{min:20,max:45}}}},ke={0:-8,1:-9,2:-10,3:-11,4:-12,5:-11,6:-9,7:-6,8:-3,9:0,10:3,11:6,12:8,13:9,14:10,15:10,16:8,17:6,18:3,19:0,20:-3,21:-5,22:-6,23:-7},Ce={"Clear Skies":{min:0,max:5},"Light Clouds":{min:2,max:10},"Heavy Clouds":{min:5,max:15},Rain:{min:5,max:20},"Heavy Rain":{min:10,max:25},"Freezing Cold":{min:0,max:10},Snow:{min:5,max:20},"Scorching Heat":{min:0,max:10},"Cold Winds":{min:15,max:35},Thunderstorm:{min:15,max:35},Blizzard:{min:25,max:55},"High Humidity Haze":{min:0,max:5},"Cold Snap":{min:5,max:15}},Ne={maxSpeedChange:15,changeFrequency:.3,directionVariability:1};var Te=n(910);class De extends be{constructor(){super(),this.forecast=[],this.currentCondition=null,this.currentConditionEnergy=0,this.conditionEnergyDC={"Clear Skies":0,"Light Clouds":0,"Heavy Clouds":10,Rain:10,"High Winds":10,"Cold Winds":10,Thunderstorm:12,"Heavy Rain":12,Blizzard:12,"Scorching Heat":15,"Freezing Cold":15,Snow:15,"High Humidity Haze":10,"Cold Snap":15},this.energyIncrease={"Clear Skies":0,"Light Clouds":0,"Heavy Clouds":3,Rain:3,"High Winds":3,"Cold Winds":3,Thunderstorm:4,"Heavy Rain":4,Blizzard:4,"Scorching Heat":5,"Freezing Cold":5,Snow:5,"High Humidity Haze":3,"Cold Snap":5},this.regressionPath={Thunderstorm:"Heavy Rain","Heavy Rain":"Rain",Rain:"Heavy Clouds","Heavy Clouds":"Light Clouds","Light Clouds":"Clear Skies",Blizzard:"Snow",Snow:"Freezing Cold","Freezing Cold":"Heavy Clouds","Scorching Heat":"Clear Skies","High Winds":"Light Clouds","Cold Winds":"Light Clouds","High Humidity Haze":"Clear Skies","Cold Snap":"Freezing Cold"},this.conditionTemperatureConstraints={Snow:{max:32},Blizzard:{max:30},"Freezing Cold":{max:32},"Scorching Heat":{min:90},"Cold Snap":{max:40}},this.useWeightedDistribution=!0}initializeWeather(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;this.forecast=[],this.currentCondition=null,this.currentConditionEnergy=0,"auto"===t&&(t=this.getSeasonFromDate(n)),this.currentWindDirection=this.getRandomWindDirection(),this.currentWindSpeed=this.getRandomWindSpeed("Clear Skies"),this.generateWeatherForecast(e,t,n);this.getClimateTable(e,t);return this.getCurrentWeather()}getCurrentWeather(){return 0===this.forecast.length?null:this.forecast[0]}get24HourForecast(){return this.forecast.slice(0,24)}getClimateTable(e,t){const n=xe[e]||e;return we[n]?we[n][t]?we[n][t]:(console.error(`Season "${t}" not found in climate "${n}"`),we[n].spring):(console.error(`Climate key "${n}" not found in climate tables`),we["temperate-deciduous"][t])}getRandomWeatherCondition(e,t){const n=this.useWeightedDistribution?this.weightedD100():this.rollD100(),a=this.getClimateTable(e,t);for(const r of a)if(n>=r.min&&n<=r.max)return r.condition;return"Clear Skies"}findConditionIndex(e,t,n){const a=this.getClimateTable(t,n);for(let r=0;r<a.length;r++)if(a[r].condition===e)return r;return-1}getConditionByIndex(e,t,n){const a=this.getClimateTable(t,n);return e<0&&(e=0),e>=a.length&&(e=a.length-1),a[e].condition}getNextWeatherCondition(e,t,n){if(this.currentCondition===e){const t=this.conditionEnergyDC[e]||0,n=this.energyIncrease[e]||0;if(t>0){const a=t+this.currentConditionEnergy*n;if(this.rollD20()<a){if(this.regressionPath[e]){const t=this.regressionPath[e];return this.currentConditionEnergy=0,this.currentCondition=t,t}}else this.currentConditionEnergy++}}else this.currentConditionEnergy=0,this.currentCondition=e;const a=this.findConditionIndex(e,t,n);if(-1===a)return this.getRandomWeatherCondition(t,n);const r=this.rollD20();let i=a;1===r?i=a-2:r>=2&&r<=5?i=a-1:r>=16&&r<=19?i=a+1:20===r&&(i=a+2);const o=this.getConditionByIndex(i,t,n);return this.currentCondition=o,this.currentConditionEnergy=0,o}generateTemperature(e,t,n,a){const r=Se[xe[t]||t];if(!r)return 70;const i=r[n];if(!i)return 70;const o=i[e];if(!o)return 70;const s=Math.floor(Math.random()*(o.max-o.min+1))+o.min,l=ke[a]||0,c=Math.round(s+l);return this.validateTemperatureForCondition(c,e)}validateTemperatureForCondition(e,t){const n=this.conditionTemperatureConstraints[t];if(!n)return e;const{min:a,max:r}=n;return void 0!==a&&e<a?a:void 0!==r&&e>r?r:e}getNextTemperature(e,t){let n=t-e;return Math.abs(n)>5&&(n=5*Math.sign(n)),e+n}getWindIntensity(e){for(const[t,n]of Object.entries(Te.windIntensityEffects))if(e>=n.min&&e<=n.max)return{level:t,effect:n.effect};return{level:"Calm",effect:Te.windIntensityEffects.Calm.effect}}getRandomWindSpeed(e){const t=Ce[e]||{min:0,max:10};return Math.floor(Math.random()*(t.max-t.min+1))+t.min}getNextWindDirection(e){const t=this.windDirections.indexOf(e);if(-1===t)return this.getRandomWindDirection();if(Math.random()>Ne.changeFrequency)return e;const n=(t+(Math.floor(3*Math.random())-1)*Ne.directionVariability+this.windDirections.length)%this.windDirections.length;return this.windDirections[n]}getNextWindSpeed(e,t){let n=t-e;return n+=5*(2*Math.random()-1),Math.abs(n)>Ne.maxSpeedChange&&(n=Math.sign(n)*Ne.maxSpeedChange),Math.max(0,Math.round(e+n))}generateCelestialEvents(){const e={shootingStar:!1,meteorImpact:!1};return 100===this.rollD100()&&(e.shootingStar=!0,20===this.rollD20()&&(e.meteorImpact=!0)),e}getCelestialEventEffects(e){return e.meteorImpact?Te.shootingStarEffects["Meteor Impact"]:e.shootingStar?Te.shootingStarEffects["Shooting Star"]:""}generateWeatherChunk(e,t,n,a){const r=[],i=new Date(a);let o,s=null;if(this.forecast.length>0){const e=this.forecast[this.forecast.length-1];o=e.condition,s=e.temperature}else o=this.getRandomWeatherCondition(t,n),this.currentCondition=o,this.currentConditionEnergy=0;o=this.getNextWeatherCondition(o,t,n);const l=this.getRandomWindSpeed(o);for(let c=0;c<e;c++){const e=new Date(i);e.setHours(e.getHours()+c,0,0,0),this.currentWindDirection=this.getNextWindDirection(this.currentWindDirection),this.currentWindSpeed=this.getNextWindSpeed(this.currentWindSpeed,l);const a=this.getWindIntensity(this.currentWindSpeed);let u;if(null===s)u=this.generateTemperature(o,t,n,e.getHours());else{const a=this.generateTemperature(o,t,n,e.getHours());u=this.getNextTemperature(s,a),u=this.validateTemperatureForCondition(u,o)}s=u;const d=this.generateCelestialEvents();let m=Te.weatherEffects[o]||"";this.currentWindSpeed>=15&&(m+="\n\n"+a.effect);const h=this.getCelestialEventEffects(d);h&&(m+="\n\n"+h),r.push({condition:o,temperature:u,hour:e.getHours(),date:e,windDirection:this.currentWindDirection,windSpeed:this.currentWindSpeed,windIntensity:a.level,effects:m,hasShootingStar:d.shootingStar,hasMeteorImpact:d.meteorImpact})}return r}generateWeatherForecast(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;for(;this.forecast.length<24;){const a=this.rollD8(),r=new Date(n);if(this.forecast.length>0){const e=this.forecast[this.forecast.length-1];r.setTime(e.date.getTime()+36e5)}const i=this.generateWeatherChunk(a,e,t,r);this.forecast=[...this.forecast,...i]}return this.get24HourForecast()}advanceTime(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if("auto"===n){const t=new Date(a.getTime()+36e5*e);n=this.getSeasonFromDate(t)}return this.forecast=this.forecast.slice(e),this.generateWeatherForecast(t,n,new Date(a.getTime()+36e5*e)),this.getCurrentWeather()}}const Me=new class{calculateDayLength(e,t){const n=this.getDayOfYear(t);return this.getDaylightHours(e,n)}getDayOfYear(e){const t=new Date(e.getFullYear(),0,0),n=e-t;return Math.floor(n/864e5)}getDaylightHours(e,t){const n=this.getLatitudeFromBand(e);console.log(`[SunriseSunset] Calculating daylight for latitude: ${n}\xb0 (${e||"unknown"}), day: ${t}`);const a=23.45*Math.sin(2*Math.PI/365*(t-81));console.log(`[SunriseSunset] Solar declination: ${a.toFixed(2)}\xb0`);const r=n*(Math.PI/180),i=a*(Math.PI/180);let o=-Math.tan(r)*Math.tan(i);if(console.log(`[SunriseSunset] cosHourAngle: ${o.toFixed(4)}`),o<-1)return console.log("[SunriseSunset] POLAR DAY detected - 24 hours of daylight"),24;if(o>1)return console.log("[SunriseSunset] POLAR NIGHT detected - 0 hours of daylight"),0;const s=2*(Math.acos(o)*(180/Math.PI))/15;return console.log(`[SunriseSunset] Day length calculated: ${s.toFixed(2)} hours`),s}getLatitudeFromBand(e){if(!e)return console.warn("[SunriseSunset] No latitude band provided, defaulting to temperate (45\xb0)"),45;console.log(`[SunriseSunset] Converting latitude band: "${e}"`);const t={equatorial:5,tropical:20,temperate:45,subarctic:65,polar:80};return t[e]?(console.log(`[SunriseSunset] Resolved latitude: ${t[e]}\xb0 for band: ${e}`),t[e]):(console.warn(`[SunriseSunset] Unknown latitude band: "${e}", defaulting to temperate (45\xb0)`),45)}getSunriseSunset(e,t){if(!t||!(t instanceof Date)||isNaN(t.getTime()))return console.error("Invalid date in getSunriseSunset:",t),{sunrise:null,sunset:null,isDaytime:!1,dayLengthHours:12};const n=this.getDaylightHours(e,this.getDayOfYear(t));if(n>=23.9){console.log("[SunriseSunset] Polar day detected - setting always daytime");const e=new Date(t);return{sunrise:new Date(e.setHours(0,0,0,0)),sunset:new Date(e.setHours(23,59,59,999)),dayLengthHours:24,isDaytime:!0}}if(n<=.1){console.log("[SunriseSunset] Polar night detected - setting always nighttime");new Date(t);return{sunrise:null,sunset:null,dayLengthHours:0,isDaytime:!1}}const a=new Date(t);a.setHours(12,0,0,0);const r=n/2,i=new Date(a);i.setHours(12-r),i.setMinutes((12-r)%1*60);const o=new Date(a);o.setHours(12+r),o.setMinutes((12+r)%1*60);return{sunrise:i,sunset:o,dayLengthHours:n,isDaytime:t>=i&&t<=o}}getFormattedSunriseSunset(e,t){if(!t||!(t instanceof Date)||isNaN(t.getTime()))return console.error("Invalid date in getFormattedSunriseSunset:",t),{sunriseTime:"Unknown",sunsetTime:"Unknown",dayLengthFormatted:"Unknown",isDaytime:!1};const{sunrise:n,sunset:a,dayLengthHours:r,isDaytime:i}=this.getSunriseSunset(e,t);if(r>=23.9)return{sunrise:n,sunset:a,sunriseTime:"Midnight",sunsetTime:"Midnight",dayLengthHours:r,dayLengthFormatted:"24 hours (Polar Day)",isDaytime:!0};if(r<=.1)return{sunrise:null,sunset:null,sunriseTime:"N/A",sunsetTime:"N/A",dayLengthHours:0,dayLengthFormatted:"0 hours (Polar Night)",isDaytime:!1};const o=e=>{if(!e)return"N/A";const t=e.getHours(),n=e.getMinutes();return`${t%12||12}:${n<10?"0"+n:n} ${t>=12?"PM":"AM"}`},s=(()=>{const e=Math.floor(r);return`${e} hr ${Math.round(60*(r-e))} min`})();return{sunrise:n,sunset:a,sunriseTime:o(n),sunsetTime:o(a),dayLengthHours:r,dayLengthFormatted:s,isDaytime:i}}getSolarPosition(e,t,n){if(!(e instanceof Date)||!(t instanceof Date)||!(n instanceof Date))return.5;const a=e.getTime(),r=t.getTime(),i=n.getTime();if(a<r){const e=new Date(r);e.setHours(e.getHours()-12);const t=r-e.getTime(),n=a-e.getTime();return t<=0?.1:n/t*.25}if(a>=r&&a<=i){const e=i-r;return e<=0?.5:.25+(a-r)/e*.5}{const e=new Date(i);e.setHours(e.getHours()+12);const t=e.getTime()-i;return t<=0?.8:.75+(a-i)/t*.25}}handleExtremeLatitudes(e,t){const n=this.getLatitudeFromBand(e),a=23.45*Math.sin(2*Math.PI/365*(t-81));return console.log(`[SunriseSunset] Extreme latitude check: ${n}\xb0, declination: ${a.toFixed(2)}\xb0`),n>66.5&&a>0&&n>90-a?(console.log("[SunriseSunset] Detected Northern Polar Day"),{isPolarDay:!0,isPolarNight:!1}):n>66.5&&a<0&&n>90+a?(console.log("[SunriseSunset] Detected Northern Polar Night"),{isPolarDay:!1,isPolarNight:!0}):n<-66.5&&a<0&&Math.abs(n)>90+a?(console.log("[SunriseSunset] Detected Southern Polar Day"),{isPolarDay:!0,isPolarNight:!1}):n<-66.5&&a>0&&Math.abs(n)>90-a?(console.log("[SunriseSunset] Detected Southern Polar Night"),{isPolarDay:!1,isPolarNight:!0}):{isPolarDay:!1,isPolarNight:!1}}};const je=class{constructor(){this.conditionTemperatureConstraints={Snow:{max:32},Blizzard:{max:30},"Freezing Cold":{max:32},"Scorching Heat":{min:90},"Cold Snap":{max:40}},this.biomeTemperatureRanges={"tropical-rainforest":{min:70,max:95,amplitude:8},"tropical-seasonal":{min:65,max:100,amplitude:15},desert:{min:20,max:115,amplitude:30},"temperate-grassland":{min:5,max:95,amplitude:25},"temperate-deciduous":{min:10,max:90,amplitude:25},"temperate-rainforest":{min:35,max:80,amplitude:15},"boreal-forest":{min:-10,max:75,amplitude:35},tundra:{min:-30,max:60,amplitude:40}},this.latitudeBandAdjustments={equatorial:{minMod:15,maxMod:10,amplitude:.6,seasonal:.3},tropical:{minMod:10,maxMod:8,amplitude:.8,seasonal:.5},temperate:{minMod:0,maxMod:0,amplitude:1,seasonal:1},subarctic:{minMod:-10,maxMod:-5,amplitude:1.2,seasonal:1.3},polar:{minMod:-20,maxMod:-12,amplitude:1.5,seasonal:1.4}}}calculateBaseTemperature(e,t,n,a){try{if(!e)return console.error("Missing profile in calculateBaseTemperature"),70;const l=this.getDayOfYear(n),c=this.biomeTemperatureRanges[e.biome]||this.biomeTemperatureRanges["temperate-deciduous"],u=this.adjustBiomeRangeForLatitude(c,e.latitude,e.latitudeBand||"temperate"),d=this.calculateSolarBasedTemperature(e.latitude,l,a,u,n,e.latitudeBand||"temperate");let m=0;try{var r,i,o;if(t&&"object"===typeof t&&t.temperature&&"object"===typeof t.temperature&&void 0!==(null===t||void 0===t||null===(r=t.temperature)||void 0===r?void 0:r.variance)&&"number"===typeof(null===t||void 0===t||null===(i=t.temperature)||void 0===i?void 0:i.variance))m=(2*Math.random()-1)*(.2*(null===t||void 0===t||null===(o=t.temperature)||void 0===o?void 0:o.variance));else m=2*(2*Math.random()-1),console.log("Using default random factor for temperature")}catch(s){console.error("Error calculating temperature randomness:",s),m=2*(2*Math.random()-1)}return d+m}catch(s){return console.error("Error in calculateBaseTemperature:",s),70}}adjustBiomeRangeForLatitude(e,t,n){const a={...e},r=this.latitudeBandAdjustments[n]||this.latitudeBandAdjustments.temperate;return a.min+=r.minMod,a.max+=r.maxMod,a.amplitude*=r.amplitude,t>40&&t<60&&(a.min-=5,a.max+=5,a.amplitude*=1.2),a}calculateTemperature(e,t,n,a,r,i,o,s,l){const c=l?l(n):this.getDayOfYear(n),u=this.biomeTemperatureRanges[e.biome]||this.biomeTemperatureRanges["temperate-deciduous"],d=this.adjustBiomeRangeForLatitude(u,e.latitude,e.latitudeBand||"temperate"),m=e.latitudeBand||"temperate",{isDaytime:h}=Me.getFormattedSunriseSunset(m,n),f=this.calculateSolarBasedTemperature(e.latitude,c,a,d,n,m),p=-.0035*e.elevation,g=Math.sin(2*Math.PI*((c-172)/365));let v=f+p+5*e.maritimeInfluence*(1-Math.abs(g))+this.calculateSystemTemperatureEffect(o)+this.calculateCloudTemperatureEffect(a,i,n,m)+-5*(s?s():0)+2*(2*Math.random()-1);return null!==r&&(v=.7*v+.3*r),Math.max(-60,Math.min(130,v))}calculateSolarBasedTemperature(e,t,n,a,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"temperate";const{sunrise:o,sunset:s,isDaytime:l,dayLengthHours:c}=Me.getSunriseSunset(i,r),u=new Date(r);u.setHours(n,0,0,0);const d=Me.getSolarPosition(u,o,s),m=Math.sin(2*Math.PI*((t-172)/365)),h=e<0?-m:m,f=(this.latitudeBandAdjustments[i]||this.latitudeBandAdjustments.temperate).seasonal||1,p=a.amplitude*h*f,g=Math.min(1.3,Math.max(.7,c/12));let v;v=d>=.25&&d<.75?1-Math.abs(4*(d-.5)):d>=.75?-4*(d-.75):d/.25*.2-1;const y=.4*a.amplitude*g*v,b=(a.max+a.min)/2;let w=0;if(e>30&&e<70){const e=.7*(1-(a.maritimeInfluence||.5));w=m>0?e*v*8:-e*Math.abs(m)*10}return b+p+y+w}calculateCloudTemperatureEffect(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"temperate";const{sunrise:r,sunset:i,isDaytime:o}=Me.getFormattedSunriseSunset(a,n),s=new Date(n);s.setHours(e,0,0,0);return s>=r&&s<=i?t/100*-10:t/100*5}calculateSystemTemperatureEffect(e){let t=0;if(Array.isArray(e))for(const n of e){if(!n)continue;const e=1-2*Math.abs(n.position-.5);"cold-front"===n.type?n.age<12?t-=n.intensity*e*5:t-=n.intensity*e*15:"warm-front"===n.type&&(t+=n.intensity*e*10)}return t}validateConditionForTemperature(e,t){const n=this.conditionTemperatureConstraints[e];if(!n)return e;const{min:a,max:r}=n;if(void 0!==a&&t<a||void 0!==r&&t>r){if(console.log(`Condition ${e} invalid at ${t}\xb0F, adjusting...`),"Snow"===e||"Blizzard"===e)return t>r?"Rain":e;if("Freezing Cold"===e)return t>r?"Heavy Clouds":e;if("Scorching Heat"===e)return t<a?"Clear Skies":e;if("Cold Snap"===e)return t>r?"Cold Winds":e}return e}validateTemperatureForCondition(e,t){const n=this.conditionTemperatureConstraints[t];if(!n)return e;const{min:a,max:r}=n;return void 0!==a&&e<a?(console.log(`Adjusting temperature for ${t}: ${e}\xb0F -> ${a}\xb0F (minimum)`),a):void 0!==r&&e>r?(console.log(`Adjusting temperature for ${t}: ${e}\xb0F -> ${r}\xb0F (maximum)`),r):e}calculateFeelsLikeTemperature(e,t,n){if(e=Number(e)||0,t=Number(t)||0,n=Number(n)||0,e<=50&&n>3){const t=35.74+.6215*e-35.75*Math.pow(n,.16)+.4275*e*Math.pow(n,.16);return Math.round(t)}if(e>=80&&t>=40){const n=2.04901523*e-42.379+10.14333127*t-.22475541*e*t-.00683783*e*e-.05481717*t*t+.00122874*e*e*t+85282e-8*e*t*t-199e-8*e*e*t*t;return Math.round(n)}return Math.round(e)}getDayOfYear(e){if(!e||!(e instanceof Date)||isNaN(e.getTime()))return console.error("Invalid date in getDayOfYear:",e),0;const t=new Date(e.getFullYear(),0,0),n=e-t;return Math.floor(n/864e5)}};const Ee=class{constructor(){this.pressureHistory=[],this.pressureTrend=0,this.lastCondition=null,this.stormCooldownPeriod=0,this.precipitationExhaustion=0}calculateBaseHumidity(e,t,n,a){const{mean:r=50,variance:i=10}=(null===t||void 0===t?void 0:t.humidity)||{},o=2*Math.PI*((a-2)/24),s=r+.3*i*Math.sin(o)+(2*Math.random()-1)*i*.2;return Math.max(0,Math.min(100,s))}calculateHumidity(e,t,n,a,r,i,o,s,l){var c,u,d,m;if(!e||!t)return console.error("Missing profile or seasonalBaseline in calculateHumidity"),50;let h;r=Number(r)||50,i=Number(i)||70;try{h=l(n)}catch(D){console.error("Error getting day of year:",D),h=0}const f=(null===(c=e.humidityProfile)||void 0===c?void 0:c.peakDay)||180,p=Math.sin(2*Math.PI*((h-f)/365)),g=(null===(u=t.humidity)||void 0===u?void 0:u.variance)||10,v=.3*g*p,y=2*Math.PI*((a-2)/24),b=.3*g*Math.sin(y),w=-.5*(i-((null===(d=t.temperature)||void 0===d?void 0:d.mean)||70)),x=10*(e.maritimeInfluence||.5);let S=0;if(Array.isArray(o))for(const M of o){if(!M)continue;const e=1-2*Math.abs(M.position-.5);"low-pressure"===M.type?S+=M.intensity*e*20:"high-pressure"===M.type?S-=M.intensity*e*15:"warm-front"===M.type?S+=M.intensity*e*25:"cold-front"===M.type&&(M.age<8?S+=M.intensity*e*15:S-=M.intensity*e*10)}let k=0;try{k=s()||0}catch(D){console.error("Error getting recent precipitation:",D)}let C=15*k;this.precipitationExhaustion>0&&(C*=1-this.precipitationExhaustion/12);const N=3*(2*Math.random()-1);let T=((null===(m=t.humidity)||void 0===m?void 0:m.mean)||50)+v+b+w+x+S+C+N;return null!==r&&(T=.8*T+.2*r),this.stormCooldownPeriod>0&&(T-=2*this.stormCooldownPeriod,this.stormCooldownPeriod--),Math.max(0,Math.min(100,T))}calculateBasePressure(e,t){const n=1013.25;if(!e)return console.error("Missing profile in calculateBasePressure"),n;const a=(Number(e.elevation)||0)/3.281*-.12,r=t instanceof Date?t.getMonth():0;let i=0;e.latitude>=0?r>=11||r<=1?i=5:r>=5&&r<=7&&(i=-5):r>=11||r<=1?i=-5:r>=5&&r<=7&&(i=5);return n+a+i+(20*Math.random()-10)}calculatePressure(e,t,n,a,r){a=Number(a)||1013.25,n=Number(n)||0;const i=4*Math.PI*(n/24),o=.5*Math.sin(i);let s=0;if(Array.isArray(r))for(const c of r){if(!c)continue;const e=1-2*Math.abs(c.position-.5);"high-pressure"===c.type?s+=c.intensity*e*15:"low-pressure"===c.type?s-=c.intensity*e*15:"cold-front"===c.type?c.age<6?s-=c.intensity*e*10:s+=c.intensity*e*8:"warm-front"===c.type&&(s-=c.intensity*e*8)}let l=a+o+s+(2*Math.random()-1);return"Thunderstorm"===this.lastCondition&&"Thunderstorm"!==this.lastCondition&&(l+=3),Math.max(970,Math.min(1050,l))}calculatePressureTrend(e){if(e=Number(e)||1013.25,this.pressureHistory.push(e),this.pressureHistory.length>24&&this.pressureHistory.shift(),this.pressureHistory.length<3)return this.pressureTrend=0,0;const t=this.pressureHistory[this.pressureHistory.length-1],n=this.pressureHistory[this.pressureHistory.length-4]||this.pressureHistory[0];return this.pressureTrend=(t-n)/3,this.pressureTrend}getPressureTrend(){return this.pressureTrend||0}calculateBaseCloudCover(e,t,n,a){if(!t||!t.humidity)return console.error("Invalid seasonalBaseline in calculateBaseCloudCover"),30;const r=.8*(t.humidity.mean||50)+(30*Math.random()-15);return Math.max(0,Math.min(100,r))}calculateCloudCover(e,t,n,a,r,i,o){i=Number(i)||50,r=Number(r)||30,a=Number(a)||12;const s=.6*i,l=-20*this.getPressureTrend();let c=0;if(Array.isArray(o))for(const d of o){if(!d)continue;const e=1-2*Math.abs(d.position-.5);"high-pressure"===d.type?c-=d.intensity*e*40:"low-pressure"===d.type?c+=d.intensity*e*40:"cold-front"===d.type?d.age<10?c+=d.intensity*e*50:c-=d.intensity*e*30:"warm-front"===d.type&&(c+=d.intensity*e*60)}let u=30+s+l+c+5*Math.sin(2*Math.PI*((a-14)/24))+(10*Math.random()-5);return this.stormCooldownPeriod>0&&(u-=5*(6-this.stormCooldownPeriod)),null!==r&&(u=.7*u+.3*r),Math.max(0,Math.min(100,u))}calculatePrecipitationPotential(e,t,n,a,r,i,o,s){e=Number(e)||50,t=Number(t)||70,n=Number(n)||1013.25,a=Number(a)||30,r=Number(r)||3;const l=e/100,c=this.getPressureTrend(),u=70*Math.pow(l*(a/100),.8),d=c<0?20*Math.abs(c):0,m=8*r;let h=0;if(Array.isArray(i))for(const y of i){if(!y)continue;const e=1-2*Math.abs(y.position-.5);"low-pressure"===y.type?h+=y.intensity*e*20:"cold-front"===y.type?y.age<12&&(h+=y.intensity*e*30):"warm-front"===y.type&&(h+=y.intensity*e*25)}let f=0;try{f=o?o():0,isNaN(f)&&(f=0)}catch(v){console.error("Error getting recent precipitation:",v)}let p=0;f>0&&(p=this.precipitationExhaustion<6?10*f:f*(10-this.precipitationExhaustion)),this.precipitationExhaustion=f>.3?Math.min(12,this.precipitationExhaustion+1):Math.max(0,this.precipitationExhaustion-.5),this.stormCooldownPeriod>0&&(h*=1-this.stormCooldownPeriod/10),"Thunderstorm"===this.lastCondition&&"Thunderstorm"!==s&&(this.stormCooldownPeriod=6),this.lastCondition=s;let g=u+d+m+h+p+(10*Math.random()-5);return Math.max(0,Math.min(100,g))}calculatePrecipitationAmount(e,t){switch(t=Number(t)||0,e){case"Heavy Rain":case"Thunderstorm":case"Blizzard":return t/100*(.7+.3*Math.random());case"Rain":case"Snow":return t/100*(.3+.4*Math.random());default:return 0}}resetPressureHistory(e){e=Number(e)||1013.25,this.pressureHistory=Array(24).fill(e),this.pressureTrend=0,this.lastCondition=null,this.stormCooldownPeriod=0,this.precipitationExhaustion=0}};const Re=class{constructor(){this.windDirections=["N","NE","E","SE","S","SW","W","NW"],this.parameters={...Ne,baseWindSpeedRanges:Ce}}initializeWind(){return{direction:this.getRandomWindDirection(),speed:5}}getRandomWindDirection(){return this.windDirections[Math.floor(Math.random()*this.windDirections.length)]}getWindIntensity(e){for(const[t,n]of Object.entries(Te.windIntensityEffects))if(e>=n.min&&e<=n.max)return{level:t,effect:n.effect};return{level:"Calm",effect:Te.windIntensityEffects.Calm.effect}}getRandomWindSpeed(e){const t=this.parameters.baseWindSpeedRanges[e]||{min:0,max:10};return Math.floor(Math.random()*(t.max-t.min+1))+t.min}getNextWindDirection(e){const t=this.windDirections.indexOf(e);if(-1===t)return this.getRandomWindDirection();if(Math.random()>this.parameters.changeFrequency)return e;const n=(t+(Math.floor(3*Math.random())-1)*this.parameters.directionVariability+this.windDirections.length)%this.windDirections.length;return this.windDirections[n]}getNextWindSpeed(e,t){let n=t-e;return n+=3*(2*Math.random()-1),Math.abs(n)>this.parameters.maxSpeedChange&&(n=Math.sign(n)*this.parameters.maxSpeedChange),Math.max(0,Math.round(e+n))}getConditionWindRange(e){return this.parameters.baseWindSpeedRanges[e]||{min:0,max:10}}updateWindFactors(e,t,n,a,r,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Clear Skies";console.log(`Wind update for condition: ${o}`),console.log(`Current wind: ${e.speed} mph ${e.direction}`),console.log(`Weather systems: ${i?i.length:0}`);const s=5*Math.abs(r),l=3*Math.sin(2*Math.PI*((t-14)/24));let c=0,u=!1,d=e.direction;if(Array.isArray(i)&&i.length>0)for(const x of i){if(!x)continue;const t=1-2*Math.abs(x.position-.5);if("high-pressure"===x.type||"low-pressure"===x.type){if(c+=x.intensity*t*5,t>.5){u=!0;const t=this.windDirections.indexOf(e.direction);if(-1!==t){const e="high-pressure"===x.type,n=x.position>.5;let a=0;a=e&&n?1:e&&!n||!e&&n?-1:1;const r=(t+a+this.windDirections.length)%this.windDirections.length;d=this.windDirections[r]}}}else if(("cold-front"===x.type||"warm-front"===x.type)&&x.age<12&&(c+=x.intensity*t*8,t>.6)){u=!0;const t=this.windDirections.indexOf(e.direction);if(-1!==t){const e=(t+x.movementDirection+this.windDirections.length)%this.windDirections.length;d=this.windDirections[e]}}}else console.log("No weather systems available for wind calculation");const m=.5*Math.abs(n-a),h=2*Math.random()-1,f=2+s+l+c+m+h,p=this.getNextWindSpeed(e.speed,f);let g;g=u?d:Math.random()<.3?this.getNextWindDirection(e.direction):e.direction;const v=c>5,y=this.getConditionWindRange(o).max*(v?1.3:1),b=["Thunderstorm","Blizzard","High Winds","Storm Force","Gale Force"].includes(o)?Math.min(80,y):Math.min(40,y),w=Math.max(0,Math.min(b,p));return console.log(`Wind calculation components:\n      Base: 2\n      Pressure gradient: ${s.toFixed(1)}\n      Diurnal effect: ${l.toFixed(1)}\n      System effect: ${c.toFixed(1)}\n      Temp differential: ${m.toFixed(1)}\n      Random effect: ${h.toFixed(1)}\n      Target speed: ${f.toFixed(1)}\n      Condition max: ${y}\n      Final wind speed: ${w}`),{direction:g,speed:w}}};const Ie=class{constructor(){this.weatherSystems=[],this.lastCondition=null,this.thunderstormActive=!1,this.thunderstormIntensity=0,this.lastSystemCheckTime=Date.now()}getWeatherSystems(){return Array.isArray(this.weatherSystems)||(console.error("WeatherSystems is not an array, resetting"),this.weatherSystems=[],this.addDefaultSystems()),0===this.weatherSystems.length&&(console.log("Weather systems array is empty, adding default systems"),this.addDefaultSystems()),this.weatherSystems}initializeWeatherSystems(e,t,n){if(this.weatherSystems=[],this.thunderstormActive=!1,this.thunderstormIntensity=0,this.lastSystemCheckTime=Date.now(),!e)return console.error("Missing profile in initializeWeatherSystems"),this.addDefaultSystems(),this.weatherSystems;console.log("Initializing weather systems for",e.name||"unknown region"),this.weatherSystems.push({type:"low-pressure",intensity:.4+.3*Math.random(),age:Math.floor(12*Math.random()),position:.5,movementSpeed:.05+.03*Math.random(),movementDirection:Math.random()>.5?1:-1,maxAge:72+Math.floor(24*Math.random())}),this.weatherSystems.push({type:"high-pressure",intensity:.4+.3*Math.random(),age:Math.floor(24*Math.random()),position:Math.random()>.5?.2:.8,movementSpeed:.04+.03*Math.random(),movementDirection:Math.random()>.5?1:-1,maxAge:72+Math.floor(36*Math.random())});let a=.4;if("winter"===t?a+=.2:"summer"===t?a-=.1:"fall"===t&&(a+=.1),Math.random()<a){const e=Math.random()>.5;this.weatherSystems.push({type:e?"high-pressure":"low-pressure",intensity:.3+.4*Math.random(),age:Math.floor(24*Math.random()),position:Math.random(),movementSpeed:.08*Math.random()+.04,movementDirection:Math.random()>.5?1:-1,maxAge:60+Math.floor(48*Math.random())})}return this.checkForFrontGeneration(),console.log(`Initialized ${this.weatherSystems.length} weather systems`),this.weatherSystems}addDefaultSystems(){console.log("Adding default weather systems"),this.weatherSystems.push({type:"high-pressure",intensity:.6,age:24,position:.2,movementSpeed:.06,movementDirection:1,maxAge:96}),this.weatherSystems.push({type:"low-pressure",intensity:.5,age:12,position:.8,movementSpeed:.07,movementDirection:-1,maxAge:72})}updateWeatherSystems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=Number(e)||1;const n=Date.now();if(n-this.lastSystemCheckTime<1e3)return this.weatherSystems;if(this.lastSystemCheckTime=n,t){const e=this.thunderstormActive;this.thunderstormActive="Thunderstorm"===t,this.thunderstormActive?this.thunderstormIntensity=e?Math.max(.4,this.thunderstormIntensity-.2):1:this.thunderstormIntensity=0,this.lastCondition=t}if(!Array.isArray(this.weatherSystems))return console.error("WeatherSystems is not an array in updateWeatherSystems, resetting"),this.weatherSystems=[],this.addDefaultSystems(),this.weatherSystems;console.log(`Updating ${this.weatherSystems.length} weather systems for ${e} hours`);for(let r=0;r<e;r++){this.weatherSystems=this.weatherSystems.filter((e=>{if(!e)return!1;if(e.age+=1,e.position+=e.movementSpeed*e.movementDirection,!this.thunderstormActive||"cold-front"!==e.type&&"warm-front"!==e.type||(e.position+=.05*e.movementDirection,e.age>.6*e.maxAge&&(e.intensity*=.95)),e.age>e.maxAge/2){const t=1-(e.age-e.maxAge/2)/(e.maxAge/2);e.intensity=Math.max(.1,e.intensity*t)}return this.thunderstormActive&&"low-pressure"===e.type&&Math.random()<.2&&(e.age+=1),e.age<e.maxAge&&e.position>=-.2&&e.position<=1.2}));let e=.05;if("Thunderstorm"!==this.lastCondition||this.thunderstormActive||(e*=.5),Math.random()<e){const e=Math.random()>.5;this.weatherSystems.push({type:e?"high-pressure":"low-pressure",intensity:.6*Math.random()+.3,age:0,position:Math.random()>.5?-.1:1.1,movementSpeed:.1*Math.random()+.05,movementDirection:Math.random()>.5?1:-1,maxAge:72+Math.floor(48*Math.random())})}this.checkForFrontGeneration()}if(0===this.weatherSystems.length&&(console.log("Lost all weather systems, adding defaults"),this.addDefaultSystems()),this.weatherSystems.length<1){var a;console.log("Only one weather system remains, adding another");const e=null===(a=this.weatherSystems[0])||void 0===a?void 0:a.type,t="high-pressure"===e?"low-pressure":"high-pressure";this.weatherSystems.push({type:t,intensity:.4+.3*Math.random(),age:Math.floor(12*Math.random()),position:"high-pressure"===e?.8:.2,movementSpeed:.05+.03*Math.random(),movementDirection:Math.random()>.5?1:-1,maxAge:72+Math.floor(24*Math.random())})}return console.log(`After update: ${this.weatherSystems.length} weather systems`),this.weatherSystems}checkForFrontGeneration(){if(Array.isArray(this.weatherSystems))for(let e=0;e<this.weatherSystems.length;e++)for(let t=e+1;t<this.weatherSystems.length;t++){const n=this.weatherSystems[e],a=this.weatherSystems[t];if(n&&a&&("high-pressure"===n.type&&"low-pressure"===a.type||"low-pressure"===n.type&&"high-pressure"===a.type)){if(Math.abs(n.position-a.position)<.3){if(!this.weatherSystems.some((n=>n&&n.type&&n.type.endsWith("-front")&&n.parentSystems&&(n.parentSystems[0]===e&&n.parentSystems[1]===t||n.parentSystems[0]===t&&n.parentSystems[1]===e)))){const r=(n.position+a.position)/2,i="high-pressure"===n.type?n:a,o="low-pressure"===n.type?n:a,s="high-pressure"===n.type?e:t,l="low-pressure"===n.type?e:t,c=i.position>o.position;if(this.thunderstormActive&&Math.random()<.5)continue;let u=48+Math.floor(24*Math.random());this.thunderstormActive&&(u=Math.max(12,.7*u)),this.weatherSystems.push({type:c?"cold-front":"warm-front",intensity:(i.intensity+o.intensity)/2,age:0,position:r,movementSpeed:.08,movementDirection:c?-1:1,maxAge:u,parentSystems:[s,l]}),console.log(`Created new ${c?"cold":"warm"} front`)}}}}else console.error("WeatherSystems is not an array in checkForFrontGeneration")}clearWeatherSystems(){this.weatherSystems=[],this.lastCondition=null,this.thunderstormActive=!1,this.thunderstormIntensity=0}addWeatherSystem(e){e?this.weatherSystems.push(e):console.error("Attempted to add invalid weather system")}removeWeatherSystem(e){e>=0&&e<this.weatherSystems.length&&this.weatherSystems.splice(e,1)}createColdFront(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;return e=Number(e)||.5,t=Number(t)||.7,{type:"cold-front",intensity:t,age:0,position:e,movementSpeed:.08+.02*Math.random(),movementDirection:-1,maxAge:48+Math.floor(24*Math.random())}}createWarmFront(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;return e=Number(e)||.5,t=Number(t)||.6,{type:"warm-front",intensity:t,age:0,position:e,movementSpeed:.06+.02*Math.random(),movementDirection:1,maxAge:60+Math.floor(24*Math.random())}}createHighPressure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;return e=Number(e)||.5,t=Number(t)||.7,{type:"high-pressure",intensity:t,age:0,position:e,movementSpeed:.05+.03*Math.random(),movementDirection:Math.random()>.5?1:-1,maxAge:72+Math.floor(48*Math.random())}}createLowPressure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;return e=Number(e)||.5,t=Number(t)||.7,{type:"low-pressure",intensity:t,age:0,position:e,movementSpeed:.06+.04*Math.random(),movementDirection:Math.random()>.5?1:-1,maxAge:60+Math.floor(36*Math.random())}}getWeatherSystemsCount(){return this.weatherSystems?this.weatherSystems.length:0}getSystemTypesDescription(){if(!this.weatherSystems||0===this.weatherSystems.length)return"No active weather systems";const e={};return this.weatherSystems.forEach((t=>{t&&t.type&&(e[t.type]=(e[t.type]||0)+1)})),Object.entries(e).map((e=>{let[t,n]=e;return`${n} ${t}${n>1?"s":""}`})).join(", ")}};const Pe=class{constructor(){this.thunderstormDuration=0,this.thunderstormEnergy=0,this.lastCondition=null,this.stormCycleStage=0}calculateAtmosphericInstability(e,t,n,a){e=Number(e)||70,t=Number(t)||1013,n=Number(n)||0,a=Number(a)||0;let r=0;return e>70&&(r+=.1*(e-70)),t<1013&&(r+=.05*(1013-t)),n<0&&(r+=5*Math.abs(n)),r-=4*a,a>.5&&"Thunderstorm"===this.lastCondition&&(r-=.7*this.thunderstormDuration),this.stormCycleStage>0&&(r-=1.5*this.stormCycleStage),r+=1.6*Math.random()-.8,Math.max(0,Math.min(10,r))}determineWeatherCondition(e,t,n,a,r,i,o){let s;if(e=Number(e)||70,t=Number(t)||50,n=Number(n)||1013,a=Number(a)||30,r=Number(r)||0,i=Number(i)||5,o=Number(o)||3,console.log("Weather determination inputs:",{temperature:e,humidity:t,pressure:n,cloudCover:a,precipPotential:r,windSpeed:i,instability:o,stormCycleStage:this.stormCycleStage}),this.stormCycleStage>0){if(this.stormCycleStage--,this.stormCycleStage>=6)return"Heavy Rain";if(this.stormCycleStage>=3)return"Rain";if(this.stormCycleStage>=1)return"Light Clouds"}s=r>75?e<=32?i>20?"Blizzard":"Snow":r>90?"Heavy Rain":"Rain":a>80?"Heavy Clouds":a>30?"Light Clouds":"Clear Skies";if(r>65&&e>60&&o>7)if("Thunderstorm"===this.lastCondition){if(this.thunderstormDuration++,this.thunderstormEnergy=Math.max(0,this.thunderstormEnergy-.8),this.thunderstormDuration>=2){const e=Math.min(.9,.4+.25*(this.thunderstormDuration-2));if(Math.random()<e||this.thunderstormDuration>4)return this.stormCycleStage=8+Math.floor(4*Math.random()),this.thunderstormDuration=0,this.thunderstormEnergy=0,"Heavy Rain"}if(this.thunderstormEnergy<2)return this.stormCycleStage=6+Math.floor(3*Math.random()),this.thunderstormDuration=0,this.thunderstormEnergy=0,"Heavy Rain";s="Thunderstorm"}else this.stormCycleStage>0||(this.thunderstormDuration=1,this.thunderstormEnergy=1.2*o,s="Thunderstorm");else"Thunderstorm"===this.lastCondition&&(this.stormCycleStage=6+Math.floor(3*Math.random()),this.thunderstormDuration=0,this.thunderstormEnergy=0,s="Heavy Rain");return e>95&&a<40?s="Scorching Heat":e<20&&(s="Freezing Cold"),i>30&&e<40?s="Cold Winds":e>80&&t>85&&a<40&&(s="High Humidity Haze"),t>90&&a>20&&e<60&&i<8?s="Fog":t>95&&a>40&&e<45&&i<5&&(s="Heavy Fog"),console.log("Weather determination result:",s),this.lastCondition=s,s}getWeatherEffects(e){return Te.weatherEffects[e]||"No special effects for this weather."}isPrecipitating(e){return["Rain","Heavy Rain","Thunderstorm","Snow","Blizzard","Sleet","Freezing Rain"].includes(e)}generateCelestialEvents(){const e=Math.random()<.01;return{shootingStar:e,meteorImpact:e&&Math.random()<.05}}resetState(){this.thunderstormDuration=0,this.thunderstormEnergy=0,this.lastCondition=null,this.stormCycleStage=0}};const Fe=class{constructor(){this.precipHistory=[],this.precipType=null,this.precipIntensity=0}initializePrecipitation(){this.precipHistory=Array(24).fill(0),this.precipType=null,this.precipIntensity=0}updatePrecipitation(e,t){this.precipHistory.push(e),this.precipHistory.length>24&&this.precipHistory.shift(),e>0?(this.precipType=t,this.precipIntensity=100*e):(this.precipType=null,this.precipIntensity=0)}getPrecipitationHistory(){return[...this.precipHistory]}getPrecipitationType(){return this.precipType}getPrecipitationIntensity(){return this.precipIntensity}getRecentPrecipitation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;if(0===this.precipHistory.length)return 0;let t=0,n=0;const a=Math.min(e,this.precipHistory.length);for(let r=0;r<a;r++){const e=a-r;t+=this.precipHistory[this.precipHistory.length-1-r]*e,n+=e}return n>0?Math.min(1,t/n):0}getTotalPrecipitation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;const t=Math.min(e,this.precipHistory.length);let n=0;for(let a=0;a<t;a++)n+=this.precipHistory[this.precipHistory.length-1-a];return n}isDroughtCondition(){const e=24*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:7);return this.getTotalPrecipitation(e)<.1}isFloodRiskPresent(){const e=this.getTotalPrecipitation(24),t=this.getTotalPrecipitation(6);return e>2||t>1}calculateAnnualPrecipitation(e){var t,n,a;let r=30*e.maritimeInfluence;return e.latitude<30?r+=20:e.latitude>60&&(r-=10),null!==(t=e.specialFactors)&&void 0!==t&&t.highRainfall&&(r+=25),null!==(n=e.specialFactors)&&void 0!==n&&n.hasMonsoonSeason&&(r+=15),null!==(a=e.specialFactors)&&void 0!==a&&a.hasDrySeason&&(r-=5),Math.max(5,Math.min(200,r))}};const ze=class{checkExtremeWeatherEvents(e,t,n,a,r,i,o,s){const l={type:null,intensity:0,duration:0};if(this.checkForTornado(e,t,n,a,s,i)?(l.type="tornado",l.intensity=this.calculateTornadoIntensity(),l.duration=1+Math.floor(3*Math.random())):this.checkForHurricane(e,t,n,a,o)?(l.type="hurricane",l.intensity=this.calculateHurricaneIntensity(),l.duration=24+Math.floor(48*Math.random())):this.checkForFlood(e,t,o)&&(l.type="flood",l.intensity=this.calculateFloodIntensity(o),l.duration=12+Math.floor(36*Math.random())),this.checkForGeologicalEvent(e,t)){const t=this.getGeologicalEvent(e);t.type&&(!l.type||Math.random()<.5)&&(l.type=t.type,l.intensity=t.intensity,l.duration=t.duration)}return l}checkForTornado(e,t,n,a,r,i){const o=e.latitude>25&&e.latitude<50,s=t.getMonth();if(!(o&&(s>=2&&s<=7)&&n>70&&a>60&&r>7))return!1;const l=i.some((e=>"cold-front"===e.type&&e.age<12&&e.position>.3&&e.position<.7));return!!(r>9||l)&&Math.random()<5e-4}calculateTornadoIntensity(){const e=Math.random();return e<.75?Math.floor(3*Math.random()):e<.95?3:e<.99?4:5}checkForHurricane(e,t,n,a,r){const i=e.maritimeInfluence>.7&&e.latitude>8&&e.latitude<35,o=t.getMonth(),s=e.latitude>0&&o>=5&&o<=10||e.latitude<0&&(o>=11||o<=4);if(!i||!s)return!1;if(!r||r.length<48)return!1;return!!(r.filter((e=>{var t;return(null===(t=e._meteoData)||void 0===t?void 0:t.humidity)>80&&e.temperature>82})).length>48)&&Math.random()<1e-4}calculateHurricaneIntensity(){const e=Math.random();return e<.3?1:e<.6?2:e<.85?3:e<.97?4:5}checkForFlood(e,t,n){if(!n||n.length<24)return!1;let a=0,r=0;for(let i=n.length-1;i>=0&&(n[i]._meteoData&&n[i]._meteoData.precipAmount>.5);i--)a++,r+=n[i]._meteoData.precipAmount;if(a>10){const t=a*r*2e-4,n=1-e.terrainRoughness;return Math.random()<t*n}return!1}calculateFloodIntensity(e){let t=0;for(let n=Math.min(e.length-1,23);n>=0;n--)e[n]._meteoData&&e[n]._meteoData.precipAmount&&(t+=e[n]._meteoData.precipAmount);return Math.min(5,Math.floor(t/8)+1)}checkForGeologicalEvent(e,t){var n,a;const r=1e-5*((null===(n=e.specialFactors)||void 0===n?void 0:n.tectonicActivity)||0),i=5e-6*((null===(a=e.specialFactors)||void 0===a?void 0:a.volcanicActivity)||0);return Math.random()<r||Math.random()<i}getGeologicalEvent(e){var t,n;const a={type:null,intensity:0,duration:0},r=(null===(t=e.specialFactors)||void 0===t?void 0:t.tectonicActivity)||0,i=(null===(n=e.specialFactors)||void 0===n?void 0:n.volcanicActivity)||0,o=r+i;if(0===o)return a;const s=r/o;return Math.random()<s?(a.type="earthquake",a.intensity=Math.min(1+Math.floor(9*r),9),a.duration=1):(a.type="volcanic_eruption",a.intensity=Math.min(1+Math.floor(7*i),7),a.duration=12+Math.floor(72*Math.random())),a}checkForWildfire(e,t,n,a,r){var i,o;if(!(n>85&&a<30))return!1;if(!r||r.length<72)return!1;if(r.some((e=>e._meteoData&&e._meteoData.precipAmount>.1)))return!1;if(!((null===(i=e.specialFactors)||void 0===i?void 0:i.forestDensity)>.3||(null===(o=e.specialFactors)||void 0===o?void 0:o.grasslandDensity)>.4))return!1;let s=1;return n>100&&(s*=2),a<15&&(s*=2),Math.random()<2e-4*s}calculateWildfireIntensity(e,t,n){let a=1;return e>90&&(a+=1),e>100&&(a+=1),t<25&&(a+=1),t<15&&(a+=1),n>15&&(a+=1),Math.min(5,a)}checkForDrought(e,t,n){var a;if((null===(a=e.specialFactors)||void 0===a?void 0:a.droughtStatus)||!1){if(n&&n.length>120){if(0===n.filter((e=>e._meteoData&&e._meteoData.precipAmount>.1)).length)return.75}return.5}return!1}checkForHeatwave(e,t,n,a){const r=t.getMonth();let i;i=e.latitude>=0?r>=11||r<=1?e.temperatureProfile.winter.mean+5:r>=2&&r<=4?e.temperatureProfile.spring.mean+8:r>=5&&r<=7?e.temperatureProfile.summer.mean+10:e.temperatureProfile.fall.mean+7:r>=11||r<=1?e.temperatureProfile.summer.mean+10:r>=2&&r<=4?e.temperatureProfile.fall.mean+7:r>=5&&r<=7?e.temperatureProfile.winter.mean+5:e.temperatureProfile.spring.mean+8;if(!(n>i+15))return!1;if(a&&a.length>=72){if(a.filter((e=>e.temperature>i+10)).length>=48)return!0}return!1}};class Le extends be{constructor(){super(),console.error("METEO SERVICE CREATED - VERSION FIX 2.0"),this.temperatureService=new je,this.atmosphericService=new Ee,this.windService=new Re,this.weatherSystemService=new Ie,this.weatherConditionService=new Pe,this.regionProfileService=new _,this.precipitationService=new Fe,this.extremeWeatherService=new ze,this.temperature=null,this.humidity=null,this.pressure=1013.25,this.cloudCover=null,this.forecast=[],this.weatherSystemService.weatherSystems=[],this.weatherSystemService.addDefaultSystems(),console.error("Added default systems in constructor:",this.weatherSystemService.weatherSystems.length)}initializeWeather(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;console.log(`MeteorologicalWeatherService initializing weather: ${e}, ${t}`),this.forecast=[],"auto"===t&&(t=this.getSeasonFromDate(n));const a=this.regionProfileService.getRegionProfile(e);return this.initializeBaseParameters(a,t,n),console.log("About to initialize weather systems"),this.weatherSystemService.initializeWeatherSystems(a,t,n),this.weatherSystemService.weatherSystems&&0!==this.weatherSystemService.weatherSystems.length||(console.error("EMERGENCY: No weather systems created during initialization, adding defaults"),this.weatherSystemService.addDefaultSystems()),console.log(`After initialization: ${this.weatherSystemService.weatherSystems.length} weather systems`),this.precipitationService.initializePrecipitation(),this.generateWeatherForecast(e,t,n),this.getCurrentWeather()}initializeBaseParameters(e,t,n){const a=n.getHours(),r=this.regionProfileService.getSeasonalBaseline(e,t);console.log("Initializing temperature with physics-based model"),this.temperature=this.temperatureService.calculateBaseTemperature(e,r,n,a),this.humidity=this.atmosphericService.calculateBaseHumidity(e,r,n,a),this.pressure=this.atmosphericService.calculateBasePressure(e,n),this.cloudCover=this.atmosphericService.calculateBaseCloudCover(e,r,n,a),this.atmosphericService.resetPressureHistory(this.pressure),this.currentWind=this.windService.initializeWind(),console.log(`Initialized meteorological parameters for ${e.name||"unnamed region"}`),console.log(`Base temperature: ${this.temperature}\xb0F, Humidity: ${this.humidity}%, Pressure: ${this.pressure} hPa`)}generateWeatherForecast(e,t,n){const a=this.regionProfileService.getRegionProfile(e);for(let r=0;r<24;r++){const e=(n.getHours()+r)%24,i=new Date(n);i.setHours(i.getHours()+r),this.weatherSystemService.weatherSystems&&0!==this.weatherSystemService.weatherSystems.length||(console.error(`EMERGENCY: No weather systems before hour ${r}, adding defaults`),this.weatherSystemService.addDefaultSystems()),this.weatherSystemService.updateWeatherSystems(1);const o=this.generateHourlyWeather(e,i,a,t);this.forecast.push(o)}return this.get24HourForecast()}generateHourlyWeather(e,t,n,a){console.log("PHYSICS-BASED WEATHER GENERATION RUNNING");const r=this.regionProfileService.getSeasonalBaseline(n,a),i=this.weatherSystemService.getWeatherSystems(),o=this.atmosphericService.calculatePressureTrend(this.pressure),s=this.temperatureService.calculateTemperature(n,r,t,e,this.temperature,this.cloudCover,i,(()=>this.precipitationService.getRecentPrecipitation()),(e=>this.getDayOfYear(e))),l=this.atmosphericService.calculateHumidity(n,r,t,e,this.humidity,s,i,(()=>this.precipitationService.getRecentPrecipitation()),(e=>this.getDayOfYear(e))),c=this.atmosphericService.calculatePressure(n,t,e,this.pressure,i),u=this.atmosphericService.calculateCloudCover(n,r,t,e,this.cloudCover,l,i),d=this.weatherConditionService.calculateAtmosphericInstability(s,c,o,this.precipitationService.getRecentPrecipitation()),m=this.atmosphericService.calculatePrecipitationPotential(l,s,c,u,d,i,(()=>this.precipitationService.getRecentPrecipitation()),this.lastCondition);this.currentWind=this.windService.updateWindFactors(this.currentWind,e,s,this.temperature||s,o,i,this.lastCondition);const h=this.weatherConditionService.determineWeatherCondition(s,l,c,u,m,this.currentWind.speed,d);this.lastCondition=h;const f=this.temperatureService.validateTemperatureForCondition(s,h),p=this.temperatureService.calculateFeelsLikeTemperature(f,l,this.currentWind.speed),g=this.atmosphericService.calculatePrecipitationAmount(h,m);this.precipitationService.updatePrecipitation(g,h.includes("Snow")?"snow":"rain");const v=this.weatherConditionService.generateCelestialEvents(),y=this.weatherConditionService.getWeatherEffects(h);this.temperature=f,this.humidity=l,this.pressure=c,this.cloudCover=u;return{date:t,hour:e,condition:h,temperature:Math.round(f),feelsLikeTemperature:Math.round(p),windDirection:this.currentWind.direction,windSpeed:Math.round(this.currentWind.speed),windIntensity:this.windService.getWindIntensity(this.currentWind.speed).level,effects:y,hasShootingStar:v.shootingStar,hasMeteorImpact:v.meteorImpact,_meteoData:{humidity:l,pressure:c,cloudCover:u,instability:d,precipitationPotential:m,precipAmount:g,pressureTrend:o,weatherSystems:[...i]}}}getDayOfYear(e){if(!e||!(e instanceof Date)||isNaN(e.getTime()))return console.error("Invalid date in getDayOfYear:",e),0;const t=new Date(e.getFullYear(),0,0),n=e-t;return Math.floor(n/864e5)}advanceTime(e,t,n,a){if(console.log(`MeteoWeatherService advancing time: ${e} hours`),"auto"===n){const t=new Date(a.getTime()+36e5*e);n=this.getSeasonFromDate(t)}this.forecast=this.forecast.slice(e);const r=this.regionProfileService.getRegionProfile(t),i=new Date(a.getTime()+36e5*e);this.weatherSystemService.weatherSystems&&0!==this.weatherSystemService.weatherSystems.length||(console.error("EMERGENCY: No weather systems before advanceTime, adding defaults"),this.weatherSystemService.addDefaultSystems()),this.weatherSystemService.updateWeatherSystems(e);for(let o=0;o<e;o++){const e=24+o,t=(i.getHours()+e)%24,a=new Date(i);a.setHours(a.getHours()+e),this.weatherSystemService.updateWeatherSystems(1);const s=this.generateHourlyWeather(t,a,r,n);this.forecast.push(s)}return this.getCurrentWeather()}getCurrentWeather(){return 0===this.forecast.length?null:this.forecast[0]}get24HourForecast(){return this.forecast.slice(0,24)}}console.log("METEO SERVICE FILE LOADED COMPLETELY - VERSION 2.0"),console.log("Methods available:",Object.getOwnPropertyNames(Le.prototype));class _e{static createWeatherService(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;try{const e=localStorage.getItem("gm-weather-companion-preferences");if(e){t=JSON.parse(e).weatherSystem,console.log(`WeatherFactory found global preference: ${t}`)}}catch(r){console.error("Error reading preferences:",r)}const n=t||e||"diceTable",a="string"===typeof n?n.toLowerCase().trim():"diceTable";return console.log(`WeatherFactory creating service of type: "${a}" (original: "${e}")`),"meteorological"===a?(console.error("Creating NEW METEOROLOGICAL weather service - FORCED BY GLOBAL SETTINGS"),new Le):(console.log("Creating dice table weather service"),new De)}}const He=new class{constructor(){this.weatherServices={},this.weatherServiceTypes={},this.forecasts={},console.log("WeatherManager initialized")}initializeWeather(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;console.log(`WeatherManager initializing weather for region ${e}`);let i=null;try{const e=localStorage.getItem("gm-weather-companion-preferences");if(e){i=JSON.parse(e).weatherSystem,console.log(`Found global weather system preference: ${i}`)}}catch(l){console.error("Error reading preferences:",l)}const o=i||r||"diceTable";console.log(`EFFECTIVE WEATHER TYPE: ${o} (passed: ${r}, global: ${i})`),this.weatherServiceTypes[e]=o,console.log(`Creating new weather service for region ${e}: ${o}`),this.weatherServices[e]=_e.createWeatherService(o);const s=t||"temperate-deciduous";return console.log(`Using climate: ${s}`),this.weatherServices[e].initializeWeather(s,n,a),this.forecasts[e]=this.weatherServices[e].get24HourForecast(),console.log(`Weather initialized for region ${e}, forecast length: ${this.forecasts[e].length}`),console.log(`Weather type for region ${e} is now: ${this.weatherServiceTypes[e]}`),this.forecasts[e]}getForecast(e){return this.forecasts[e]||null}advanceTime(e,t,n,a,r){if(console.log(`WeatherManager advancing time for region ${e} by ${t} hours`),!this.weatherServices[e]){const t=this._normalizeWeatherType(this.weatherServiceTypes[e]||"diceTable");console.warn(`No weather service found for region ${e}, creating new ${t} service`),this.weatherServices[e]=_e.createWeatherService(t),this.weatherServiceTypes[e]=t,this.initializeWeather(e,n,a,r,t)}if("meteorological"===this.weatherServiceTypes[e].toLowerCase()){const t=this.weatherServices[e];!t.weatherSystemService||t.weatherSystemService.weatherSystems&&0!==t.weatherSystemService.weatherSystems.length||(console.error(`EMERGENCY: Weather systems missing before advancing time for region ${e}`),t.weatherSystemService.addDefaultSystems())}return this.weatherServices[e].advanceTime(t,n,a,r),this.forecasts[e]=this.weatherServices[e].get24HourForecast(),this.forecasts[e]}getSeasonFromDate(e){const t=Object.keys(this.weatherServices)[0];if(t)return this.weatherServices[t].getSeasonFromDate(e);return _e.createWeatherService().getSeasonFromDate(e)}changeServiceType(e,t){if(console.log(`WeatherManager changing service type for region ${e} to ${t}`),t=this._normalizeWeatherType(t),this.weatherServiceTypes[e]===t)return void console.log(`Region ${e} already using ${t}`);const n=this.forecasts[e];let a=new Date;n&&n.length>0&&(a=n[0].date),this.weatherServiceTypes[e]=t,this.weatherServices[e]=_e.createWeatherService(t),this.initializeWeather(e,"temperate-deciduous","auto",a,t)}exportState(){return{forecasts:this.forecasts,serviceTypes:this.weatherServiceTypes}}importState(e){if(e&&e.forecasts&&(this.forecasts=e.forecasts),e&&e.serviceTypes){const t={};for(const n in e.serviceTypes)t[n]=this._normalizeWeatherType(e.serviceTypes[n]);this.weatherServiceTypes=t}}_normalizeWeatherType(e){if(!e||"string"!==typeof e)return"diceTable";return"meteorological"===e.toLowerCase().trim()?"meteorological":"diceTable"}},We=e=>{let{onClose:t}=e;const{createRegion:n}=oe(),{state:r}=ve(),[i,o]=(0,a.useState)({name:"",climate:"temperate-deciduous",latitudeBand:"temperate",templateId:null}),[s,l]=(0,a.useState)(!1),[u,d]=(0,a.useState)({}),[m,h]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(i.latitudeBand){const e=(0,ye.getTemplatesForLatitudeBand)(i.latitudeBand);d(e),i.templateId&&!e[i.templateId]&&(o((e=>({...e,templateId:null}))),h(null))}}),[i.latitudeBand]),(0,a.useEffect)((()=>{i.templateId&&u[i.templateId]?(h(u[i.templateId]),u[i.templateId].defaultBiome&&o((e=>({...e,climate:u[i.templateId].defaultBiome})))):h(null)}),[i.templateId,u]);const f=e=>{const{name:t,value:n}=e.target;o((e=>({...e,[t]:n})))};return(0,c.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target.classList.contains("modal-overlay")&&t()},children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:"Create New Region"}),(0,c.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("[RegionFormModal] Form submitted with data:",i),l(!0);try{var a,o,s;const e=r.weatherSystem||"diceTable";console.log(`[RegionFormModal] Using weather system: ${e}`),console.log("[RegionFormModal] Calling createRegion with:",{name:i.name,climate:i.climate,latitudeBand:i.latitudeBand,templateId:i.templateId,weatherType:e});const l=n({name:i.name,climate:i.climate,latitudeBand:i.latitudeBand,templateId:i.templateId,weatherType:e});console.log("[RegionFormModal] New region created:",{id:null===l||void 0===l?void 0:l.id,name:null===l||void 0===l?void 0:l.name,latitudeBand:null===l||void 0===l?void 0:l.latitudeBand,profile:{latitudeBand:null===l||void 0===l||null===(a=l.profile)||void 0===a?void 0:a.latitudeBand,biome:null===l||void 0===l||null===(o=l.profile)||void 0===o?void 0:o.biome,climate:null===l||void 0===l||null===(s=l.profile)||void 0===s?void 0:s.climate}}),t(),l&&l.id&&setTimeout((()=>{try{var t;console.log(`[RegionFormModal] Initializing weather for region ${l.id}`);const n=l.climate||l.profile&&l.profile.climate||(null===(t=l.profile)||void 0===t?void 0:t.biome)||"temperate-deciduous";He.initializeWeather(l.id,n,"auto",new Date,e)}catch(n){console.error("[RegionFormModal] Error initializing weather:",n)}}),200)}catch(c){console.error("[RegionFormModal] Error creating region:",c),l(!1)}},className:"p-4",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"name",className:"block mb-2",children:"Region Name"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:f,className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0,placeholder:"e.g., The Misty Mountains",autoFocus:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"latitudeBand",className:"block mb-2",children:"Climate Zone"}),(0,c.jsxs)("select",{id:"latitudeBand",name:"latitudeBand",value:i.latitudeBand,onChange:f,className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0,children:[(0,c.jsx)("option",{value:"equatorial",children:"Equatorial (0\xb0 - 10\xb0)"}),(0,c.jsx)("option",{value:"tropical",children:"Tropical (10\xb0 - 30\xb0)"}),(0,c.jsx)("option",{value:"temperate",children:"Temperate (30\xb0 - 60\xb0)"}),(0,c.jsx)("option",{value:"subarctic",children:"Subarctic (60\xb0 - 75\xb0)"}),(0,c.jsx)("option",{value:"polar",children:"Polar (75\xb0 - 90\xb0)"})]}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Affects day/night cycle, seasonal daylight hours, and available templates"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"templateId",className:"block mb-2",children:"Region Template"}),(0,c.jsxs)("select",{id:"templateId",name:"templateId",value:i.templateId||"",onChange:e=>{const t=e.target.value;o((e=>({...e,templateId:t})))},className:"w-full p-2 rounded bg-surface-light text-white border border-border",disabled:0===Object.keys(u).length,children:[(0,c.jsx)("option",{value:"",children:"-- Select a template --"}),Object.entries(u).map((e=>{let[t,n]=e;return(0,c.jsx)("option",{value:t,children:n.name},t)}))]}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Templates provide pre-configured climate settings with rich descriptions and gameplay impacts"})]}),(0,c.jsxs)("div",{className:"mb-4 p-2 bg-gray-800 rounded text-xs border border-gray-700",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"Selected latitude band:"})," ",i.latitudeBand]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"Default latitude:"})," ","polar"===i.latitudeBand?"80\xb0":"subarctic"===i.latitudeBand?"65\xb0":"temperate"===i.latitudeBand?"45\xb0":"tropical"===i.latitudeBand?"20\xb0":"5\xb0"]}),"polar"===i.latitudeBand&&(0,c.jsx)("div",{className:"mt-1 text-green-400",children:"Polar latitude should produce 24hr daylight near summer solstice"})]}),m&&(0,c.jsxs)("div",{className:"mb-4 p-3 bg-surface-dark rounded border border-border",children:[(0,c.jsx)("h3",{className:"font-semibold mb-1",children:m.name}),(0,c.jsx)("p",{className:"text-sm mb-2",children:m.description}),m.gameplayImpact&&(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsx)("div",{className:"text-sm font-semibold text-accent mb-1",children:"Gameplay Impact:"}),(0,c.jsx)("p",{className:"text-xs text-gray-300",children:m.gameplayImpact})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-3 pt-3 border-t border-border mt-6",children:[(0,c.jsx)("button",{type:"button",onClick:t,className:"btn",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Creating...":"Create Region"})]})]})]})})},Be=e=>{let{region:t,onClose:n}=e;const{updateRegion:r}=oe(),{state:i}=ve(),[o,s]=(0,a.useState)({name:t.name||"",climate:t.climate||t.profile&&t.profile.climate||t.profile&&t.profile.biome||"temperate-deciduous",latitudeBand:t.latitudeBand||t.profile&&t.profile.latitudeBand||"temperate",templateId:t.templateId||t.templateInfo&&t.templateInfo.templateId||null}),[l,u]=(0,a.useState)(!1),[d,m]=(0,a.useState)({}),[h,f]=(0,a.useState)(null);(0,a.useEffect)((()=>{var e,n,a;console.log("[RegionEditModal] Initialized form with data:",o),console.log("[RegionEditModal] Original region data:",{id:t.id,name:t.name,latitudeBand:t.latitudeBand,profileLatitudeBand:null===(e=t.profile)||void 0===e?void 0:e.latitudeBand,climate:t.climate,profileClimate:(null===(n=t.profile)||void 0===n?void 0:n.climate)||(null===(a=t.profile)||void 0===a?void 0:a.biome)})}),[]),(0,a.useEffect)((()=>{if(o.latitudeBand){const e=(0,ye.getTemplatesForLatitudeBand)(o.latitudeBand);m(e),o.templateId&&!e[o.templateId]&&(s((e=>({...e,templateId:null}))),f(null))}}),[o.latitudeBand]),(0,a.useEffect)((()=>{o.templateId&&d[o.templateId]?(f(d[o.templateId]),d[o.templateId].defaultBiome&&s((e=>({...e,climate:d[o.templateId].defaultBiome})))):f(null)}),[o.templateId,d]);const p=e=>{const{name:t,value:n}=e.target;s((e=>({...e,[t]:n})))};return(0,c.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target.classList.contains("modal-overlay")&&n()},children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:"Edit Region"}),(0,c.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("[RegionEditModal] Form submitted with data:",o),u(!0);try{var a,s,l;const e=i.weatherSystem||t.weatherType||"diceTable";console.log(`[RegionEditModal] Using weather system: ${e}`),console.log("[RegionEditModal] Calling updateRegion with:",{id:t.id,name:o.name,climate:o.climate,latitudeBand:o.latitudeBand,templateId:o.templateId,weatherType:e});const c=r(t.id,{name:o.name,climate:o.climate,latitudeBand:o.latitudeBand,templateId:o.templateId,weatherType:e});console.log("[RegionEditModal] Region updated:",{id:null===c||void 0===c?void 0:c.id,name:null===c||void 0===c?void 0:c.name,latitudeBand:null===c||void 0===c?void 0:c.latitudeBand,profile:{latitudeBand:null===c||void 0===c||null===(a=c.profile)||void 0===a?void 0:a.latitudeBand,biome:null===c||void 0===c||null===(s=c.profile)||void 0===s?void 0:s.biome,climate:null===c||void 0===c||null===(l=c.profile)||void 0===l?void 0:l.climate}}),n(),c&&c.id&&setTimeout((()=>{try{var t;console.log(`[RegionEditModal] Reinitializing weather for region ${c.id}`);const n=c.climate||c.profile&&c.profile.climate||(null===(t=c.profile)||void 0===t?void 0:t.biome)||"temperate-deciduous";He.initializeWeather(c.id,n,"auto",new Date,e)}catch(n){console.error("[RegionEditModal] Error reinitializing weather:",n)}}),200)}catch(c){console.error("[RegionEditModal] Error updating region:",c),u(!1)}},className:"p-4",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"name",className:"block mb-2",children:"Region Name"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:p,className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0,autoFocus:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"latitudeBand",className:"block mb-2",children:"Climate Zone"}),(0,c.jsxs)("select",{id:"latitudeBand",name:"latitudeBand",value:o.latitudeBand,onChange:p,className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0,children:[(0,c.jsx)("option",{value:"equatorial",children:"Equatorial (0\xb0 - 10\xb0)"}),(0,c.jsx)("option",{value:"tropical",children:"Tropical (10\xb0 - 30\xb0)"}),(0,c.jsx)("option",{value:"temperate",children:"Temperate (30\xb0 - 60\xb0)"}),(0,c.jsx)("option",{value:"subarctic",children:"Subarctic (60\xb0 - 75\xb0)"}),(0,c.jsx)("option",{value:"polar",children:"Polar (75\xb0 - 90\xb0)"})]}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Affects day/night cycle, seasonal daylight hours, and available templates"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"templateId",className:"block mb-2",children:"Region Template"}),(0,c.jsxs)("select",{id:"templateId",name:"templateId",value:o.templateId||"",onChange:e=>{const t=e.target.value;s((e=>({...e,templateId:t})))},className:"w-full p-2 rounded bg-surface-light text-white border border-border",disabled:0===Object.keys(d).length,children:[(0,c.jsx)("option",{value:"",children:"-- Select a template --"}),Object.entries(d).map((e=>{let[t,n]=e;return(0,c.jsx)("option",{value:t,children:n.name},t)}))]}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Templates provide pre-configured climate settings with rich descriptions and gameplay impacts"})]}),(0,c.jsxs)("div",{className:"mb-4 p-2 bg-gray-800 rounded text-xs border border-gray-700",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"Selected latitude band:"})," ",o.latitudeBand]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:"Default latitude:"})," ","polar"===o.latitudeBand?"80\xb0":"subarctic"===o.latitudeBand?"65\xb0":"temperate"===o.latitudeBand?"45\xb0":"tropical"===o.latitudeBand?"20\xb0":"5\xb0"]}),"polar"===o.latitudeBand&&(0,c.jsx)("div",{className:"mt-1 text-green-400",children:"Polar latitude should produce 24hr daylight near summer solstice"})]}),h&&(0,c.jsxs)("div",{className:"mb-4 p-3 bg-surface-dark rounded border border-border",children:[(0,c.jsx)("h3",{className:"font-semibold mb-1",children:h.name}),(0,c.jsx)("p",{className:"text-sm mb-2",children:h.description}),h.gameplayImpact&&(0,c.jsxs)("div",{className:"mt-3",children:[(0,c.jsx)("div",{className:"text-sm font-semibold text-accent mb-1",children:"Gameplay Impact:"}),(0,c.jsx)("p",{className:"text-xs text-gray-300",children:h.gameplayImpact})]})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-3 pt-3 border-t border-border mt-6",children:[(0,c.jsx)("button",{type:"button",onClick:n,className:"btn",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Saving...":"Save Changes"})]})]})]})})},Ae=e=>{let{isOpen:t,onClose:n,onRequestCreateRegion:a,onRequestEditRegion:r,onOpenWorldSettings:i}=e;const{state:o}=S(),{regions:s,activeRegion:l,setActiveRegion:u,hasRegions:d,deleteRegion:m}=oe();return t?(0,c.jsx)("div",{className:"world-regions-overlay",onClick:e=>{e.target.classList.contains("world-regions-overlay")&&n()},children:(0,c.jsxs)("div",{className:"world-regions-modal",children:[(0,c.jsx)("div",{className:"world-regions-header",children:(0,c.jsx)("button",{onClick:n,className:"close-button",children:"\u2715"})}),(0,c.jsxs)("div",{className:"world-name-container flex justify-between items-center",children:[(0,c.jsx)("h1",{className:"world-name-large",children:(null===o||void 0===o?void 0:o.worldName)||"My Fantasy World"}),(0,c.jsx)("button",{onClick:()=>{n(),setTimeout((()=>i()),100)},className:"settings-button",title:"Edit World Settings",children:(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,c.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),(0,c.jsx)("div",{className:"create-region-container",children:(0,c.jsxs)("button",{onClick:()=>{n(),setTimeout((()=>{a()}),1)},className:"create-region-button",children:[(0,c.jsx)("span",{className:"plus-icon",children:"+"})," Create new region..."]})}),(0,c.jsx)("div",{className:"regions-list-container",children:d?(0,c.jsx)("div",{className:"regions-list",children:s.map((e=>{var t,a;return(0,c.jsxs)("div",{className:"region-list-item "+((null===l||void 0===l?void 0:l.id)===e.id?"region-active":""),onClick:()=>{return t=e.id,u(t),void n();var t},children:[(0,c.jsxs)("div",{className:"region-info",children:[(0,c.jsx)("div",{className:"region-name",children:e.name}),(0,c.jsx)("div",{className:"region-biome",children:null!==(t=e.profile)&&void 0!==t&&t.biome?e.profile.biome.replace("-"," "):(null===(a=e.climate)||void 0===a?void 0:a.replace("-"," "))||"Unknown climate"})]}),(0,c.jsxs)("div",{className:"region-actions",children:[(0,c.jsx)("button",{className:"region-edit-button",onClick:t=>((e,t)=>{e.stopPropagation(),n(),setTimeout((()=>{r(t)}),100)})(t,e),title:"Edit region",children:(0,c.jsx)("span",{className:"pencil-icon",children:"\u270e"})}),(0,c.jsx)("button",{className:"region-delete-button",onClick:t=>((e,t)=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this region?")&&m(t)})(t,e.id),title:"Delete region",children:(0,c.jsx)("span",{className:"delete-icon",children:"\u2715"})})]})]},e.id)}))}):(0,c.jsxs)("div",{className:"empty-state text-center p-6",children:[(0,c.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\uddfa\ufe0f"}),(0,c.jsx)("h3",{className:"text-lg mb-2",children:"No Regions Yet"}),(0,c.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Create your first region to get started"})]})})]})}):null},Oe=e=>{let{initialValue:t,onChange:n,id:r}=e;const[i,o]=(0,a.useState)((()=>{try{if(t){const e=new Date(t);if(!isNaN(e.getTime()))return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}const e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}catch(e){console.error("Error parsing initial date:",e);const t=new Date;return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}}));(0,a.useEffect)((()=>{const e=`${i.year}-${String(i.month).padStart(2,"0")}-${String(i.day).padStart(2,"0")}`;n(e)}),[i,n]);const s=e=>{const{name:t,value:n}=e.target;let a=parseInt(n,10);if("year"===t)a=isNaN(a)?0:a;else if("month"===t)a=isNaN(a)?1:Math.max(1,Math.min(12,a));else if("day"===t){const e=new Date(i.year,i.month,0).getDate();a=isNaN(a)?1:Math.max(1,Math.min(e,a))}o((e=>({...e,[t]:a})))},l=new Date(i.year,i.month,0).getDate();return(0,c.jsxs)("div",{className:"game-date-input",children:[(0,c.jsxs)("div",{className:"date-input-group",children:[(0,c.jsx)("label",{htmlFor:`${r}-year`,className:"block text-sm text-gray-400 mb-1",children:"Year"}),(0,c.jsx)("input",{type:"number",id:`${r}-year`,name:"year",value:i.year,onChange:s,className:"w-full p-2 rounded bg-surface-light text-white border border-border","aria-label":"Year"})]}),(0,c.jsxs)("div",{className:"date-input-group",children:[(0,c.jsx)("label",{htmlFor:`${r}-month`,className:"block text-sm text-gray-400 mb-1",children:"Month"}),(0,c.jsx)("select",{id:`${r}-month`,name:"month",value:i.month,onChange:s,className:"w-full p-2 rounded bg-surface-light text-white border border-border","aria-label":"Month",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(((e,t)=>(0,c.jsx)("option",{value:t+1,children:e},t)))})]}),(0,c.jsxs)("div",{className:"date-input-group",children:[(0,c.jsx)("label",{htmlFor:`${r}-day`,className:"block text-sm text-gray-400 mb-1",children:"Day"}),(0,c.jsx)("select",{id:`${r}-day`,name:"day",value:i.day,onChange:s,className:"w-full p-2 rounded bg-surface-light text-white border border-border","aria-label":"Day",children:[...Array(l)].map(((e,t)=>(0,c.jsx)("option",{value:t+1,children:t+1},t)))})]})]})},$e=e=>{let{onClose:t,forceShow:n=!1,editMode:r=!1}=e;const{state:i,setWorldName:o,setGameTime:s,setIsConfigured:l}=S(),{setCurrentDate:u}=L();(0,a.useEffect)((()=>{if(r)return void console.log("WorldSetupModal in edit mode - skipping auto-check");if(n)return void console.log("Forcing world setup modal to show");const e=localStorage.getItem("gm-weather-companion-setup-completed"),a=localStorage.getItem("gm-weather-companion-regions");console.log("WorldSetupModal check:",{setupCompleted:e,hasRegions:!!a,forceShow:n,editMode:r}),("true"===e||a)&&(console.log("Setup already completed, closing modal"),l(!0),t())}),[t,l,n,r]);const d=i.gameTime?new Date(i.gameTime):new Date,[m,h]=(0,a.useState)({worldName:i.worldName||"My Fantasy World",gameDate:d.toISOString().split("T")[0],hourOfDay:d.getHours()});(0,a.useEffect)((()=>{if(r&&i.gameTime){const e=new Date(i.gameTime);h({worldName:i.worldName||"My Fantasy World",gameDate:e.toISOString().split("T")[0],hourOfDay:e.getHours()})}}),[r,i.worldName,i.gameTime]);const f=e=>{const{name:t,value:n}=e.target;h({...m,[t]:n})},p=[];for(let a=0;a<24;a++){const e=0===a?12:a>12?a-12:a,t=a<12?"AM":"PM";p.push((0,c.jsxs)("option",{value:a,children:[e," ",t]},a))}return(0,c.jsx)("div",{className:"modal-overlay",onClick:e=>{!n&&e.target.classList.contains("modal-overlay")&&t()},children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:r?"Edit World Settings":"World Setup"}),!n&&(0,c.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{const[e,n,a]=m.gameDate.split("-"),i=parseInt(e,10),c=parseInt(n,10)-1,d=parseInt(a,10),h=new Date;h.setFullYear(i),h.setMonth(c),h.setDate(d),h.setHours(parseInt(m.hourOfDay,10),0,0,0),console.log("Saving world settings:",{name:m.worldName,date:h.toString(),editMode:r}),o(m.worldName),s(h),u(h),l(!0),r||(localStorage.setItem("gm-weather-companion-setup-completed","true"),localStorage.removeItem("gm-weather-companion-setup-attempted")),setTimeout((()=>{t()}),50)}catch(n){console.error("Error setting game date/time:",n)}},className:"p-4",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"worldName",className:"block mb-2",children:"World Name"}),(0,c.jsx)("input",{type:"text",id:"worldName",name:"worldName",value:m.worldName,onChange:f,className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block mb-2",children:"Game Date"}),(0,c.jsx)(Oe,{id:"world-setup-date",initialValue:m.gameDate,onChange:e=>{h({...m,gameDate:e})}}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"The date in your game world"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"hourOfDay",className:"block mb-2",children:"Hour of Day"}),(0,c.jsx)("select",{id:"hourOfDay",name:"hourOfDay",value:m.hourOfDay,onChange:f,className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0,children:p})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-3 pt-3 border-t border-border mt-6",children:[!n&&(0,c.jsx)("button",{type:"button",onClick:t,className:"btn",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",children:r?"Save Changes":"Create World"})]})]})]})})},Ue=()=>{const{togglePreferencesMenu:e}=ve(),{activeRegion:t}=oe(),[n,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[s,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1);return(0,c.jsxs)("header",{className:"app-header",children:[(0,c.jsx)("div",{className:"app-brand",children:(0,c.jsx)("h1",{children:"WeatherMaster"})}),(0,c.jsxs)("div",{className:"app-controls",children:[(0,c.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 bg-surface-light hover:bg-surface rounded",onClick:()=>{o(!1),l(null),d(!1),r(!0)},title:"Regions & Worlds",children:[(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,c.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,c.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),(0,c.jsx)("span",{className:"font-medium",children:"Regions"})]}),(0,c.jsx)("button",{className:"icon-button",onClick:e,title:"App Preferences",children:(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,c.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),(0,c.jsx)(Ae,{isOpen:n,onClose:()=>{r(!1)},onRequestCreateRegion:()=>{o(!0)},onRequestEditRegion:e=>{l(e)},onOpenWorldSettings:()=>{console.log("Opening world settings modal"),r(!1),setTimeout((()=>{d(!0)}),100)}}),i&&(0,c.jsx)(We,{onClose:()=>{o(!1)}}),s&&(0,c.jsx)(Be,{region:s,onClose:()=>{l(null)}}),u&&(0,c.jsx)($e,{onClose:()=>d(!1),forceShow:!1,editMode:!0})]})},Ve=()=>{const{state:e,setWeatherSystem:t,setDebugMode:n,togglePreferencesMenu:r}=ve(),[i,o]=(0,a.useState)(!1),[s,l]=(0,a.useState)("");return e.isOpen?(0,c.jsx)("div",{className:"preferences-overlay",onClick:e=>{e.target.classList.contains("preferences-overlay")&&r()},children:(0,c.jsxs)("div",{className:"preferences-modal",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:"App Preferences"}),(0,c.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Weather Generation"}),(0,c.jsxs)("div",{className:"bg-surface-light p-3 rounded mb-2",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsx)("label",{htmlFor:"weatherSystem",className:"font-medium",children:"Weather System"}),(0,c.jsxs)("select",{id:"weatherSystem",value:e.weatherSystem,onChange:e=>t(e.target.value),className:"p-2 rounded bg-surface text-white border border-border",children:[(0,c.jsx)("option",{value:"diceTable",children:"Basic (Dice Tables)"}),(0,c.jsx)("option",{value:"meteorological",children:"Advanced (Meteorological)"})]})]}),(0,c.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"diceTable"===e.weatherSystem?"Simple weather generation based on probability tables. Less resource-intensive and quicker to generate.":"Realistic weather simulation based on physical parameters. Provides more natural weather progression and detailed statistics."})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Developer Options"}),(0,c.jsxs)("div",{className:"bg-surface-light p-3 rounded",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",id:"debugMode",checked:e.debugMode,onChange:e=>n(e.target.checked),className:"mr-3"}),(0,c.jsx)("label",{htmlFor:"debugMode",className:"font-medium",children:"Debug Mode"})]}),(0,c.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Enables additional debugging information and tools for troubleshooting weather generation."})]})]}),(0,c.jsxs)("div",{className:"mt-6 pt-4 border-t border-border",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-3 text-danger",children:"Danger Zone"}),(0,c.jsxs)("div",{className:"bg-red-900 bg-opacity-20 p-3 rounded border border-danger",children:[(0,c.jsx)("h4",{className:"font-semibold text-danger mb-2",children:"Nuclear Reset"}),(0,c.jsx)("p",{className:"text-sm text-gray-300 mb-3",children:"This will erase all saved data including worlds, regions, and preferences. This action cannot be undone."}),i?(0,c.jsxs)("div",{className:"nuclear-confirm p-3 bg-surface-dark rounded border border-danger",children:[(0,c.jsx)("p",{className:"text-sm text-gray-200 mb-2",children:'Type "yes" to confirm that you want to delete all data:'}),(0,c.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),className:"w-full p-2 mb-3 rounded bg-surface text-white border border-danger",placeholder:"Type 'yes' to confirm",autoFocus:!0}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("button",{onClick:()=>{o(!1),l("")},className:"bg-surface-light text-white py-1 px-3 rounded hover:bg-opacity-90",children:"Cancel"}),(0,c.jsx)("button",{onClick:()=>{"yes"===s.toLowerCase()?(localStorage.clear(),alert("All data has been cleared. The app will now reload."),window.location.reload()):(alert("Confirmation text doesn't match. Reset canceled."),o(!1),l(""))},className:"bg-danger text-white py-1 px-3 rounded hover:bg-opacity-90",disabled:"yes"!==s.toLowerCase(),children:"Confirm Reset"})]})]}):(0,c.jsx)("button",{onClick:()=>{o(!0)},className:"bg-danger text-white py-2 px-3 rounded hover:bg-opacity-90",children:"Reset Everything"})]})]})]}),(0,c.jsx)("div",{className:"p-4 border-t border-border",children:(0,c.jsx)("p",{className:"text-sm text-gray-400",children:"Preferences apply to all regions and are saved automatically."})})]})}):null};const qe=new class{constructor(){this.REFERENCE_NEW_MOON=new Date("2000-01-06T00:00:00Z"),this.LUNAR_CYCLE_DAYS=29.53059,this.MOON_PHASES=[{name:"New Moon",min:0,max:1.84,icon:"\ud83c\udf11",illumination:0},{name:"Waxing Crescent",min:1.84,max:7.38,icon:"\ud83c\udf12",illumination:25},{name:"First Quarter",min:7.38,max:11.13,icon:"\ud83c\udf13",illumination:50},{name:"Waxing Gibbous",min:11.13,max:14.77,icon:"\ud83c\udf14",illumination:75},{name:"Full Moon",min:14.77,max:18.45,icon:"\ud83c\udf15",illumination:100},{name:"Waning Gibbous",min:18.45,max:22.13,icon:"\ud83c\udf16",illumination:75},{name:"Last Quarter",min:22.13,max:25.9,icon:"\ud83c\udf17",illumination:50},{name:"Waning Crescent",min:25.9,max:29.53,icon:"\ud83c\udf18",illumination:25}],this.MOON_LIGHT_LEVELS={"New Moon":"Darkness","Waxing Crescent":"Darkness","First Quarter":"Darkness","Waxing Gibbous":"Dim Light in open areas","Full Moon":"Dim Light in open areas","Waning Gibbous":"Dim Light in open areas","Last Quarter":"Darkness","Waning Crescent":"Darkness"},this.moonTimesCache={},this.lastRecalculatedDate=null,this.nextMoonsetTime=null,this.recalculationLock=!1}calculateMoonAge(e){const t=e instanceof Date?e:new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date provided to calculateMoonAge:",e),0;const n=(t.getTime()-this.REFERENCE_NEW_MOON.getTime())/864e5%this.LUNAR_CYCLE_DAYS;return n>=0?n:n+this.LUNAR_CYCLE_DAYS}calculateIllumination(e){const t=e/this.LUNAR_CYCLE_DAYS;return Math.round(50*(1-Math.cos(2*t*Math.PI)))}isWaxing(e){return e<this.LUNAR_CYCLE_DAYS/2}getMoonPhase(e){try{const t=this.calculateMoonAge(e),n=this.calculateIllumination(t),a=this.isWaxing(t);for(const e of this.MOON_PHASES)if(t>=e.min&&t<e.max)return{name:e.name,icon:e.icon,illumination:e.illumination,age:t,ageInDays:Math.floor(t),ageHours:Math.floor(t%1*24),exactPercentage:n,lightLevel:this.MOON_LIGHT_LEVELS[e.name]||"Darkness",isWaxing:a};return console.warn("Moon phase calculation fell through to default - check phase ranges"),{name:"New Moon",icon:"\ud83c\udf11",illumination:0,age:0,ageInDays:0,ageHours:0,exactPercentage:0,lightLevel:"Darkness",isWaxing:!0}}catch(t){return console.error("Error calculating moon phase:",t),{name:"Unknown",icon:"\u2753",illumination:0,age:0,ageInDays:0,ageHours:0,exactPercentage:0,lightLevel:"Unknown",isWaxing:!0}}}getNextFullMoon(e){const t=this.calculateMoonAge(e),n=14.77,a=t<n?n-t:this.LUNAR_CYCLE_DAYS-t+n,r=new Date(e);return r.setDate(r.getDate()+Math.floor(a)),r.setHours(r.getHours()+Math.floor(a%1*24)),r}getNextNewMoon(e){const t=this.calculateMoonAge(e),n=t<1?1-t:this.LUNAR_CYCLE_DAYS-t+1,a=new Date(e);return a.setDate(a.getDate()+Math.floor(n)),a.setHours(a.getHours()+Math.floor(n%1*24)),a}getMoonTimes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"temperate";const n=e instanceof Date?e:new Date(e);if(isNaN(n.getTime()))return console.error("Invalid date in getMoonTimes:",e),{moonrise:new Date(n),moonset:new Date(n)};try{const e=n.toISOString().split("T")[0],a=`${e}_${t}`,r=n.getTime();let i=!1;const o=!1;if(o&&this.nextMoonsetTime,(!this.moonTimesCache[a]||this.lastRecalculatedDate!==e||this.nextMoonsetTime&&r>this.nextMoonsetTime+6e5)&&(this.recalculationLock||(i=!0,this.recalculationLock=!0,o&&this.moonTimesCache[a]&&(this.lastRecalculatedDate!==e||this.nextMoonsetTime&&this.nextMoonsetTime))),!i&&this.moonTimesCache[a])return this.moonTimesCache[a];const s=this.getMoonPhase(n),l=new Date(n);l.setHours(0,0,0,0);const{sunrise:c,sunset:u}=Me.getSunriseSunset(t,n),d=c.getHours()+c.getMinutes()/60,m=u.getHours()+u.getMinutes()/60,h=s.age/this.LUNAR_CYCLE_DAYS;let f,p;if(h<=.5){const e=h/.5;f=d+e*((m-d+24)%24);p=m+e*(d+24-m)}else{const e=(h-.5)/.5,t=m<d?m+24:m,n=t-e*(t-d);f=n>=24?n-24:n;const a=d+24,r=a-e*(a-m);p=r>=24?r-24:r}const g=Math.floor(f),v=Math.floor(60*(f-g)),y=Math.floor(p),b=Math.floor(60*(p-y)),w=new Date(l);w.setHours(g,v,0,0);const x=new Date(l);return x.setHours(y,b,0,0),x.getTime()<=w.getTime()&&x.setDate(x.getDate()+1),this.moonTimesCache[a]={moonrise:w,moonset:x},this.lastRecalculatedDate=e,this.nextMoonsetTime=x.getTime(),setTimeout((()=>{this.recalculationLock=!1}),500),{moonrise:w,moonset:x}}catch(a){return console.error("Error calculating moon times:",a),this.recalculationLock=!1,{moonrise:new Date(n),moonset:new Date(n)}}}getFormattedMoonTimes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"temperate";try{const{moonrise:n,moonset:a}=this.getMoonTimes(e,t),r=e=>{const t=e.getHours(),n=e.getMinutes();return`${t%12||12}:${n<10?"0"+n:n} ${t>=12?"PM":"AM"}`};return{moonriseTime:r(n),moonsetTime:r(a),moonriseDate:n,moonsetDate:a}}catch(n){return console.error("Error formatting moon times:",n),{moonriseTime:"Error",moonsetTime:"Error",moonriseDate:new Date,moonsetDate:new Date}}}getFormattedMoonInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"temperate",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const a=this.getMoonPhase(e),r=this.getFormattedMoonTimes(e,t),i=this.getNextFullMoon(e),o=this.getNextNewMoon(e),s=t=>{if(!n)return t.toLocaleDateString();const a=new Date(e),r=Math.round((t-a)/864e5);if(r<=7)return 0===r?"Today":1===r?"Tomorrow":`In ${r} days`;const i=t.toLocaleString("en-US",{month:"short"}),o=t.getDate();let s=t.getFullYear();return n&&n.gameYear&&(s=n.gameYear),`${i} ${o}, ${s}`};return{...a,...r,nextFullMoonDate:s(i),nextNewMoonDate:s(o),daysToFullMoon:Math.round((i-e)/864e5),daysToNewMoon:Math.round((o-e)/864e5)}}catch(a){return console.error("Error getting formatted moon info:",a),{name:"Error",icon:"\u2753",illumination:0,exactPercentage:0,moonriseTime:"Error",moonsetTime:"Error"}}}isMoonVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"temperate";try{const{moonrise:n,moonset:a}=this.getMoonTimes(e,t),r=e.getTime();return a.getTime()<n.getTime()?r>=n.getTime()||r<=a.getTime():r>=n.getTime()&&r<=a.getTime()}catch(n){return console.error("Error checking moon visibility:",n),!1}}clearMoonCache(){this.moonTimesCache={},this.lastRecalculatedDate=null,this.nextMoonsetTime=null,this.recalculationLock=!1}setCustomLunarReference(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(e&&(this.REFERENCE_NEW_MOON=e instanceof Date?e:new Date(e),isNaN(this.REFERENCE_NEW_MOON.getTime())))throw new Error("Invalid reference date");return null!==t&&!isNaN(t)&&t>0&&(this.LUNAR_CYCLE_DAYS=t),this.clearMoonCache(),!0}catch(n){return console.error("Error setting custom lunar reference:",n),!1}}},Ye={dawn:{base:"#FF7E45",clouds:{light:"#FFA07A",heavy:"#CD5C5C"}},sunrise:{base:"#FFA500",clouds:{light:"#FFD700",heavy:"#E6923F"}},morning:{base:"#87CEEB",clouds:{light:"#B0E2FF",heavy:"#87AFC7"}},midday:{base:"#1E90FF",clouds:{light:"#87CEEB",heavy:"#4682B4"}},afternoon:{base:"#4682B4",clouds:{light:"#87CEFA",heavy:"#4169E1"}},sunset:{base:"#FF4500",clouds:{light:"#FF7F50",heavy:"#CD5C5C"}},dusk:{base:"#483D8B",clouds:{light:"#9370DB",heavy:"#4B0082"}},night:{base:"#191970",moon:{new:"#000033",quarter:"#000044",full:"#000066"},clouds:{light:"#2F4F4F",heavy:"#000033"}}},Ge={dawn:{start:.17,end:.21},sunrise:{start:.21,end:.25},morning:{start:.25,end:.33},midday:{start:.33,end:.58},afternoon:{start:.58,end:.75},sunset:{start:.75,end:.79},dusk:{start:.79,end:.83},night:{start:.83,end:.17}};const Qe=new class{calculateSkyColor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"temperate";const{sunrise:a,sunset:r,isDaytime:i}=Me.getFormattedSunriseSunset(n,e),o=qe.getMoonPhase(e),s=Me.getSolarPosition(e,a,r),l=this.determineTimePeriod(s),c=this.getColorForPeriod(l,t,o);let u=c,d=0;const m=this.getNextPeriod(l);if(m){const e=Ge[l],n=this.getPeriodDuration(e),a=(s-e.start)/n;if(a>.75){d=4*(a-.75);const e=this.getColorForPeriod(m,t,o);u=this.blendColors(c,e,d)}}return{...u,period:l,nextPeriod:d>0?m:null,transitionProgress:Math.round(100*d),isDaytime:i}}determineTimePeriod(e){for(const[t,n]of Object.entries(Ge))if("night"===t){if(e>=n.start||e<n.end)return t}else if(e>=n.start&&e<n.end)return t;return"midday"}getNextPeriod(e){const t=Object.keys(Ge),n=t.indexOf(e);return-1===n?"midday":t[(n+1)%t.length]}getPeriodDuration(e){let{start:t,end:n}=e;return n<t&&(n+=1),n-t}getColorForPeriod(e,t,n){const a=Ye[e];let r={backgroundColor:a.base,backgroundImage:"none",textColor:this.getContrastColor(a.base)},i=null;if(t&&(i=this.getCloudLevel(t),i&&a.clouds)){const e=a.clouds[i];e&&("heavy"===i?(r.backgroundColor=e,r.textColor=this.getContrastColor(e)):"light"===i&&(r.backgroundImage=`linear-gradient(to bottom, ${a.base} 0%, ${e} 100%)`))}if("night"===e&&a.moon){const e=this.getMoonLevel(n);if(e&&a.moon[e])if("full"===e){"none"===r.backgroundImage&&(r.backgroundImage=`linear-gradient(to bottom, ${a.moon[e]} 0%, ${r.backgroundColor} 100%)`);const t=this.isMoonVisible(n);t&&(r.backgroundImage=`radial-gradient(circle at ${"rising"===t?"left":"right"} top, rgba(255,255,255,0.2), transparent 50%), ${r.backgroundImage}`)}else"heavy"!==i&&(r.backgroundColor=this.blendColors({backgroundColor:r.backgroundColor},{backgroundColor:a.moon[e]},.3).backgroundColor)}return r}getCloudLevel(e){const t=String(e).toLowerCase();return t.includes("heavy clouds")||t.includes("thunderstorm")||t.includes("heavy rain")||t.includes("blizzard")?"heavy":t.includes("light clouds")||t.includes("rain")||t.includes("snow")?"light":null}getMoonLevel(e){const t=e.exactPercentage;return t<25?"new":t<75?"quarter":"full"}isMoonVisible(e){const t=(new Date).getHours();if(e.exactPercentage>10){if(t>18&&t<24)return"rising";if(t>=0&&t<6)return"setting"}return null}blendColors(e,t,n){const a={};return e.backgroundColor&&t.backgroundColor?a.backgroundColor=this.blendHexColors(e.backgroundColor,t.backgroundColor,n):a.backgroundColor=e.backgroundColor||t.backgroundColor,a.backgroundImage=n<.5?e.backgroundImage:t.backgroundImage,a.textColor=this.getContrastColor(a.backgroundColor),a}blendHexColors(e,t,n){const a=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),o=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16),c=Math.round(a+(o-a)*n),u=Math.round(r+(s-r)*n),d=Math.round(i+(l-i)*n);return`#${c.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`}getContrastColor(e){return(.299*parseInt(e.slice(1,3),16)+.587*parseInt(e.slice(3,5),16)+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#ffffff"}};const Ke=new class{constructor(){this.skyDescriptions={"Clear Skies":{dawn:["The sky is brightening with dawn's first light","The eastern horizon glows with the first rays of sunrise","A clear dawn sky promises a beautiful day"],morning:["The morning sky is a perfect expanse of blue","The early day sky is pristine and cloudless","A flawless blue morning sky stretches overhead"],midday:["The midday sky is a brilliant, unbroken blue","The sun shines from a perfectly clear sky","The noon sky is devoid of clouds"],afternoon:["The afternoon sky remains clear and bright","The cloudless afternoon sky allows the sun to shine freely","The clear afternoon sky bathes everything in warm light"],dusk:["The evening sky is clear as daylight begins to fade","As the sun descends, the sky remains free of clouds","A crisp, clear dusk sky shows the first few stars"],night:["Stars speckle the crystal-clear night sky","The cloudless night reveals a tapestry of stars","The unobstructed night sky showcases a stellar display"]},"Light Clouds":{dawn:["Dawn breaks through scattered clouds on the horizon","Wispy clouds catch the first colors of sunrise","The breaking dawn illuminates scattered clouds"],morning:["A few wispy clouds float across the morning sky","The morning sky hosts scattered white clouds","Thin cloud patches dot the morning blue"],midday:["Scattered clouds drift in the midday sky","The midday sun occasionally ducks behind passing clouds","Light clouds offer momentary respite from the direct sun"],afternoon:["Scattered clouds drift through the afternoon sky","The afternoon sun plays hide-and-seek with passing clouds","White clouds leisurely cross the afternoon sky"],dusk:["Evening clouds catch the sunset's colors","Scattered clouds are painted with sunset hues","The fading light turns passing clouds into works of art"],night:["Wisps of cloud occasionally pass over the stars","The moon peeks through scattered night clouds","Thin clouds drift across the starry night sky"]},"Heavy Clouds":{dawn:["A heavily overcast sky mutes the dawn light","Dawn struggles to penetrate the thick cloud cover","The sunrise is barely visible through the dense clouds"],morning:["Thick gray clouds blanket the morning sky","A heavy overcast dims the morning light","Dense cloud cover hangs over the morning landscape"],midday:["The midday sun is completely obscured by thick clouds","Heavy clouds cast the land in midday shadow","The overhead cloud layer steals the day's brightness"],afternoon:["The afternoon light is subdued by a heavy cloud layer","Thick clouds block the afternoon sun","The overcast afternoon sky suggests impending weather"],dusk:["The clouded sky hastens the approach of darkness","Dusk arrives early under the heavy cloud cover","Evening gloom is deepened by the thick overhead clouds"],night:["Clouds block out the stars and moonlight","The night is especially dark under the cloud-sealed sky","Not a single star penetrates the nocturnal cloud cover"]},Rain:{dawn:["Rain falls steadily as the hidden sun begins to rise","The dawn is gray and wet with continuous rainfall","Morning breaks with the sound of rain on rooftops"],morning:["Rain falls steadily through the morning hours","A persistent morning rainfall soaks the ground","Raindrops patter continuously through the morning"],midday:["Rain continues to fall from the midday sky","The midday downpour shows no sign of letting up","Rain streams down as the day reaches its middle hours"],afternoon:["The afternoon is washed with steady rainfall","Rain continues to fall as the day progresses","The afternoon sky releases a constant shower"],dusk:["Rain continues as daylight fades","The setting sun is completely hidden by rain clouds","Evening rain blurs the transition to night"],night:["Rain falls relentlessly through the darkness","The night echoes with the sound of falling rain","Rainfall continues unabated through the night hours"]},"Heavy Rain":{dawn:["Heavy rain drowns out the dawn","The day begins with a torrential downpour","Dawn breaks amidst a deluge of rain"],morning:["Heavy rain pounds down through the morning","The morning is drenched in torrential rainfall","A morning deluge reduces visibility significantly"],midday:["The midday sky unleashes sheets of heavy rain","Torrential rain hammers down at midday","The heavy midday rainfall creates impromptu streams"],afternoon:["The afternoon is dominated by heavy rainfall","Thick curtains of rain drench the afternoon landscape","The heavy rainfall shows no sign of letting up this afternoon"],dusk:["Heavy rain continues as day surrenders to night","Dusk is barely noticeable through the heavy downpour","The transition to night is marked only by increasing darkness under the deluge"],night:["The night reverberates with heavy rainfall","Torrential rain hammers through the darkness","The heavy nighttime downpour drowns out all other sounds"]},Snow:{dawn:["Snow falls gently as dawn lightens the sky","The first light reveals a world being covered in fresh snow","Dawn breaks over a landscape being blanketed in white"],morning:["Snowflakes drift down through the morning light","The morning continues with a steady snowfall","Snow accumulates gradually as the morning progresses"],midday:["Snow continues to fall at midday","Midday brings no pause to the gentle snowfall","The midday landscape is transformed by continuing snow"],afternoon:["The afternoon snow creates a peaceful atmosphere","Snowflakes continue their descent through the afternoon hours","The afternoon landscape is progressively whitened by falling snow"],dusk:["Snow falls through the dimming light of dusk","Evening approaches with no cessation of snowfall","The last light of day sparkles on fresh-fallen snow"],night:["Snowflakes are visible as they pass through pools of light","The night snow accumulates silently in the darkness","Snow continues its quiet descent through the night"]}};for(const e in this.skyDescriptions)for(const t of["dawn","morning","midday","afternoon","dusk","night"])this.skyDescriptions[e][t]||(this.skyDescriptions[e][t]=[`The ${e.toLowerCase()} continues as ${t} arrives`]);this.skyDescriptions.default={dawn:["The dawn reveals changing weather conditions","First light shows an unsettled sky","As day breaks, the weather appears to be in transition"],morning:["The morning sky shows signs of changing weather","The morning atmosphere feels unsettled","Weather conditions are in flux this morning"],midday:["Midday brings shifting weather patterns","The weather at midday seems to be in transition","The sky at noon suggests changing conditions"],afternoon:["The afternoon weather is in a state of change","Atmospheric conditions shift as the afternoon continues","The afternoon sky is difficult to predict"],dusk:["As night approaches, the weather remains changeable","Dusk brings uncertain weather conditions","The transition to night occurs under changing skies"],night:["The night sky is in a state of meteorological flux","Weather conditions continue to change through the darkness","Nightfall brings unsettled weather"]},this.windDescriptions={Calm:["The air is completely still","There's barely a whisper of wind","No breeze stirs the air","Not even a leaf moves in the still air"],Breezy:["A gentle breeze rustles the vegetation","A light wind carries scents from afar","A mild breeze occasionally stirs the surroundings","The pleasant breeze provides a slight cooling effect"],Windy:["The wind blows steadily, swaying branches","A persistent wind tugs at clothing and hair","Strong gusts occasionally punctuate the steady wind","The wind makes flags and banners snap and flutter"],"Strong Winds":["Powerful winds bend tree tops and make walking difficult","The strong wind forces people to lean into it when facing it directly","Forceful gusts threaten to tear away loose objects","The wind howls around buildings and natural formations"],"Gale Force":["The gale-force winds make travel treacherous","Violent gusts threaten to knock people off their feet","The howling gale tears at everything not firmly secured","Walking against the powerful gale is nearly impossible"],"Storm Force":["Devastating winds tear at the landscape","The storm-force winds pose a serious danger to anyone caught outside","Destructive gusts uproot small trees and damage structures","The roaring winds drown out almost all other sounds"]},this.windDescriptions.default=["The wind conditions are changing","Air currents shift unpredictably"],this.temperatureDescriptions={freezing:["The air is bitterly cold, instantly numbing exposed skin","A bone-chilling cold permeates everything","The harsh, frigid air makes breathing painful","The extreme cold creates a painful burning sensation on exposed skin"],veryCold:["The intense cold seeps through layers of clothing","Breath forms thick clouds of vapor in the frigid air","The severe cold makes fingers and toes ache painfully","The biting cold makes metal surfaces dangerous to touch with bare skin"],cold:["The cold air stings exposed cheeks and noses","A definite chill requires warm clothing for comfort","Cold air makes breath visible with each exhalation","The chill in the air encourages brisk movement"],cool:["The cool temperature feels refreshing","A pleasant coolness invigorates the senses","The cool air feels crisp and clean","A jacket provides comfort in the cool conditions"],mild:["The temperature is perfectly mild and comfortable","The pleasant air temperature requires no adjustment of clothing","A mild warmth makes for ideal conditions","The temperature sits in a perfect balance - neither warm nor cool"],warm:["A gentle warmth creates comfortable conditions","The warmth makes the air feel welcoming","The warm temperature encourages outdoor activity","Comfortable warmth bathes the surroundings"],hot:["The heat has people seeking shade","The hot air creates a noticeable sheen of sweat on exposed skin","Heat radiates from sun-exposed surfaces","The hot conditions make water a precious commodity"],scorching:["The scorching heat is almost unbearable","Waves of intense heat distort distant views","The extreme heat forces most creatures to seek shelter","The blistering temperature makes every movement exhausting"]},this.senseDetails={"tropical-rainforest":{sights:["colorful birds flit between branches","sunlight filters through the dense canopy","vibrant orchids bloom on tree trunks","a waterfall cascades down moss-covered rocks","a rainbow of butterflies hovers near flowering plants"],sounds:["exotic birds call melodiously to one another","a distant monkey troop howls in the canopy","water trickles down through multiple layers of leaves","unseen creatures rustle in the underbrush","insects buzz in complex harmonies"],smells:["the rich aroma of damp earth fills the air","tropical flowers release their sweet perfume","decaying vegetation adds earthy undertones","wild fruits add a hint of sweetness to the air","mushrooms contribute their fungal scent to the mix"]},"tropical-seasonal":{sights:["herds of animals dot the distant grassland","acacia trees create distinctive silhouettes","tall grasses wave in unison","a dust devil spins across the plain","colorful birds perch on thorny branches"],sounds:["tall grass rustles with each breeze","distant herds create a low rumble","insects chirp rhythmically among the vegetation","territorial birds announce their presence","wind whispers through the scattered trees"],smells:["sun-baked earth releases its mineral scent","flowering grasses fill the air with pollen","wild herbs add aromatic notes","the musk of grazing animals lingers faintly","rain-moistened soil releases its distinctive petrichor"]},desert:{sights:["sand ripples stretch to the horizon","a mirage shimmers in the distance","cacti stand like sentinels across the landscape","rocks form weathered sculptures","a hawk circles high overhead"],sounds:["the wind creates a soft whistling","sand shifts with a gentle hiss","a distant predator calls once and falls silent","small creatures scurry among rocks","the profound silence feels almost tangible"],smells:["the air carries the mineral scent of hot sand","rare desert blooms offer momentary sweetness","dry air holds little scent but feels clean","the faint aroma of sage punctuates the emptiness","rocks release their stored heat with a subtle scent"]},"temperate-grassland":{sights:["wildflowers create patches of color among the grasses","rolling hills extend to the horizon","hawks hover on thermal currents above","small mammals dart between protective covers","butterflies and bees work among the flowering plants"],sounds:["grasses produce a continuous gentle rustle","countless insects buzz and chirp in symphony","meadowlarks and other birds call from perches","small animals create occasional movement sounds","distant thunder rolls across the open space"],smells:["fresh grass dominates the clean air","wildflowers add their varied perfumes","fertile soil contributes an earthy foundation","rain-moistened earth releases petrichor","wild mint and other herbs add complexity"]},"temperate-deciduous":{sights:["sunlight creates shifting patterns through the leaves","moss covers fallen logs and stone outcroppings","mushrooms of various colors sprout from the forest floor","squirrels leap from branch to branch","a deer briefly appears between the trees"],sounds:["leaves rustle with each passing breeze","a woodpecker drums rhythmically on a dead tree","squirrels chatter alarm calls to one another","the wind creates a gentle symphony in the canopy","songbirds call from hidden perches"],smells:["rich humus forms the base note of the forest air","decaying leaves add their sweet-sour scent","tree sap contributes hints of resin","mushrooms release their earthy spores","a complex mixture of growth and decay permeates everything"]},"temperate-rainforest":{sights:["towering evergreens disappear into the mist above","every surface is covered with a layer of moss","ferns create a lush understory throughout","nurse logs host new generations of trees","hanging lichens drape from branches like curtains"],sounds:["water drips constantly from saturated surfaces","a stream murmurs somewhere nearby","the dense vegetation muffles distant sounds","woodpeckers drum occasionally on resonant trunks","understory birds call softly to one another"],smells:["damp earth dominates the senses","conifer resin adds a sharp, clean note","moss contributes its ancient green scent","wet bark releases its woody aroma","fungal growth adds complex earthy undertones"]},"boreal-forest":{sights:["evergreen trees form a dark, dense canopy","snow blankets the ground between straight trunks","animal tracks tell stories of recent passages","lichens and mosses add splashes of color","occasional clearings reveal the vast forest extent"],sounds:["wind whistles through the pine needles","trees creak and groan in the cold","an owl hoots from a hidden perch","branches snap occasionally under snow weight","perfect silence falls between sound moments"],smells:["pine resin dominates the cold air","cold sap adds sweetness to the scent profile","fresh snow contributes its mineral clarity","mushrooms lend occasional earthy notes","the needles covering the forest floor give off a subtle spice"]},tundra:{sights:["the vast open landscape stretches to the horizon","low shrubs and plants hug the ground","rocks covered with colorful lichens dot the terrain","distant mountains frame the enormous sky","migratory birds fly in formation overhead"],sounds:["the wind creates a constant presence","small animals call occasionally to mark territory","meltwater gurgles through rocky channels","ice and frozen ground crack with temperature changes","silence dominates between these sparse sounds"],smells:["the air is remarkably clean and crisp","subtle scents from low vegetation occasionally rise","the mineral smell of soil and rock predominates","lichen contributes its faint ancient aroma","smoke from distant human activity sometimes drifts through"]}},this.senseDetails.default={sights:["the surrounding landscape draws the eye with its beauty","nearby landmarks stand out prominently","local vegetation creates a tapestry of textures and colors","the terrain shapes how everything relates","natural features command attention"],sounds:["ambient noises create a natural symphony","the soundscape tells the story of this place","background noises remind you of the living world around","environmental sounds weave together harmoniously","the acoustic environment is rich with information"],smells:["the local air carries distinctive scents","natural aromas tell of the surrounding ecosystem","environmental odors speak of recent conditions","atmospheric smells connect you to this place","ambient fragrances reveal the season and setting"]},this.descriptionCache=new Map}generateDescription(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=a?`${a}-${n.toISOString()}`:null;if(r&&this.descriptionCache.has(r))return this.descriptionCache.get(r);if(!e){const e="The weather is currently in flux, changing with the natural cycles of this world.";return r&&this.descriptionCache.set(r,e),e}const i=n.getHours();let o,s="day";if(s=i<6?"night":i<9?"dawn":i<12?"morning":i<15?"midday":i<18?"afternoon":i<21?"dusk":"night",e.condition.includes("Rain")||e.condition.includes("Snow")||e.condition.includes("Thunderstorm")||"Heavy Clouds"===e.condition){const t=Object.keys(this.skyDescriptions).find((t=>e.condition.includes(t)))||"default",n=this.skyDescriptions[t][s]||this.skyDescriptions.default[s];o=this.getRandomItem(n)}else{const t=this.skyDescriptions[e.condition]||this.skyDescriptions.default,n=t[s]||t.morning;o=this.getRandomItem(n)}const l=this.getRandomItem(this.windDescriptions[e.windIntensity]||this.windDescriptions.default),c=this.getRandomItem(this.temperatureDescriptions[this.getTemperatureCategory(e.temperature)]),u=this.senseDetails[t]||this.senseDetails.default,d=this.getSensoryDetailAsSentence(u,e);let m=`${o}. `;return"Calm"===e.windIntensity||o.toLowerCase().includes("wind")||(m+=`${l}. `),o.toLowerCase().includes("cold")||o.toLowerCase().includes("hot")||o.toLowerCase().includes("warm")||o.toLowerCase().includes("cool")||(m+=`${c}. `),d&&(m+=`${d}`),r&&this.descriptionCache.set(r,m.trim()),m.trim()}getRandomItem(e){return e&&0!==e.length?e[Math.floor(Math.random()*e.length)]:""}getTemperatureCategory(e){return e<0?"freezing":e<32?"veryCold":e<45?"cold":e<60?"cool":e<75?"mild":e<85?"warm":e<95?"hot":"scorching"}getSensoryDetailAsSentence(e,t){let n="sights";"Calm"!==t.windIntensity&&t.windSpeed>10&&(n="sounds"),(t.condition.includes("Rain")||Math.random()<.3)&&(n="smells");const a=e[n]||[];if(0===a.length)return"";const r=this.getRandomItem(a),i=[`Nearby, ${r}.`,`In the vicinity, ${r}.`,`All around, ${r}.`,`The surroundings feature ${r}.`,`You notice that ${r}.`];return this.getRandomItem(i)}formatGameEffects(e){if(!e)return"";const t=e.split(/\.\s+/).filter((e=>e.trim().length>0));return 0===t.length?"":t.map((e=>`\u2022 ${e.trim()}.`)).join("\n")}clearCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)for(const t of this.descriptionCache.keys())t.startsWith(`${e}-`)&&this.descriptionCache.delete(t);else this.descriptionCache.clear()}},Je={verifyWeatherSystems:e=>e?(!e.weatherSystems||!Array.isArray(e.weatherSystems)||0===e.weatherSystems.length)&&(console.error("EMERGENCY FIX: Adding default weather systems"),e.addDefaultSystems(),!0):(console.error("No weather system service provided to verifyWeatherSystems"),!1),checkMeteoServices(e){var t,n;if(!e)return console.error("No meteorological service provided to checkMeteoServices"),{status:"ERROR",message:"No service"};const a=[];return e.weatherSystemService?e.weatherSystemService.weatherSystems?0===e.weatherSystemService.weatherSystems.length&&(a.push("weatherSystems array empty"),e.weatherSystemService.addDefaultSystems()):(a.push("weatherSystems array missing"),e.weatherSystemService.weatherSystems=[],e.weatherSystemService.addDefaultSystems()):a.push("Missing weatherSystemService"),e.windService||a.push("Missing windService"),e.temperatureService||a.push("Missing temperatureService"),e.atmosphericService||a.push("Missing atmosphericService"),{status:a.length>0?"ISSUES":"OK",issues:a,currentSystems:(null===(t=e.weatherSystemService)||void 0===t||null===(n=t.weatherSystems)||void 0===n?void 0:n.length)||0}},forceReset(e){e&&(console.log("FORCE RESETTING METEOROLOGICAL SERVICES"),e.weatherSystemService&&(e.weatherSystemService.weatherSystems=[],e.weatherSystemService.addDefaultSystems()),e.temperature=70,e.humidity=50,e.pressure=1013.25,e.cloudCover=30,e.windService&&(e.currentWind=e.windService.initializeWind()),console.log("Meteorological services reset complete"))}},Xe=e=>{var t,n,r,i,o,s;let{weatherData:l,region:u,weatherService:d}=e;const[m,h]=(0,a.useState)(""),{state:f}=ve(),p=()=>{if(d&&d.weatherSystemService)try{Je.forceReset(d),h("Forced reset of weather systems. Refresh or advance time to see changes.")}catch(e){h(`Error: ${e.message}`)}else h("No weather service available to fix")},g=(null===u||void 0===u?void 0:u.weatherType)||(null===f||void 0===f?void 0:f.weatherSystem)||"diceTable";let v="";if(u?"meteorological"!==g?v=`Region using '${g}' weather system instead of 'meteorological'. Global preference is: ${f.weatherSystem}`:l?l._meteoData||(v="Weather data exists but no _meteoData property found"):v="No weather data available":v="No region data available",v)return(0,c.jsxs)("div",{className:"p-4 bg-surface-light rounded-lg mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Meteorological Debug"}),(0,c.jsx)("p",{className:"mb-2",children:"Not using meteorological system or no data available."}),(0,c.jsxs)("div",{className:"p-2 bg-red-900 rounded text-xs",children:[(0,c.jsx)("strong",{children:"Diagnostic:"})," ",v]}),(0,c.jsxs)("div",{className:"mt-3 p-2 bg-gray-800 rounded text-xs",children:[(0,c.jsx)("strong",{children:"Region data:"}),(0,c.jsx)("pre",{className:"mt-1 overflow-auto max-h-24",children:JSON.stringify(u,null,2)}),(0,c.jsx)("strong",{className:"mt-2 block",children:"Weather data:"}),(0,c.jsx)("pre",{className:"mt-1 overflow-auto max-h-24",children:JSON.stringify(l,null,2)}),(0,c.jsx)("strong",{className:"mt-2 block",children:"Global Preferences:"}),(0,c.jsx)("pre",{className:"mt-1 overflow-auto max-h-24",children:JSON.stringify(f,null,2)})]})]});const y=l._meteoData,b=y.weatherSystems||[];return(0,c.jsxs)("div",{className:"p-4 bg-gray-900 rounded-lg mb-4 border border-blue-500 overflow-auto max-h-[80vh]",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Meteorological Debug Panel"}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("button",{onClick:p,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Force Fix Weather Systems"}),m&&(0,c.jsx)("div",{className:"mt-2 text-sm text-yellow-300",children:m})]}),(0,c.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:(0,c.jsxs)("div",{className:"col-span-2 bg-gray-800 p-3 rounded",children:[(0,c.jsx)("h4",{className:"font-medium text-blue-300 mb-2",children:"Core Parameters"}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Temperature:"})," ",Math.round(l.temperature),"\xb0F"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Humidity:"})," ",Math.round(y.humidity),"%"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Pressure:"})," ",Math.round(y.pressure)," hPa"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Cloud Cover:"})," ",Math.round(y.cloudCover),"%"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Precipitation:"})," ",y.precipAmount>0?`${(100*y.precipAmount).toFixed(1)}%`:"None"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Instability:"})," ",(null===(t=y.instability)||void 0===t?void 0:t.toFixed(1))||0,"/10"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Precipitation Potential:"})," ",(null===(n=y.precipitationPotential)||void 0===n?void 0:n.toFixed(1))||0,"%"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Pressure Trend:"})," ",(null===(r=y.pressureTrend)||void 0===r?void 0:r.toFixed(2))||0," hPa/hr"]})]})]})}),(0,c.jsxs)("div",{className:"mb-4 bg-gray-800 p-3 rounded",children:[(0,c.jsx)("h4",{className:"font-medium text-blue-300 mb-2",children:"Weather Systems"}),b&&b.length>0?(0,c.jsx)("div",{className:"space-y-2",children:b.map(((e,t)=>(0,c.jsxs)("div",{className:"border border-gray-700 p-2 rounded text-sm",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-yellow-300",children:e.type}),(0,c.jsxs)("span",{className:"text-gray-400",children:["Age: ",e.age,"h / ",e.maxAge,"h"]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-1 mt-1",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Intensity:"})," ",(100*e.intensity).toFixed(0),"%"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Position:"})," ",e.position.toFixed(2)]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Movement:"})," ",e.movementSpeed.toFixed(2)," \xd7"," ",e.movementDirection>0?"\u2192":"\u2190"]})]})]},t)))}):(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-red-400 font-bold",children:"No active weather systems"}),(0,c.jsx)("button",{onClick:p,className:"mt-2 px-2 py-1 bg-red-700 text-white rounded text-xs",children:"Add Default Systems"})]})]}),(0,c.jsxs)("div",{className:"bg-gray-800 p-3 rounded mb-4",children:[(0,c.jsx)("h4",{className:"font-medium text-blue-300 mb-2",children:"Wind Analysis"}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Direction:"})," ",l.windDirection]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Speed:"})," ",l.windSpeed," mph"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Intensity:"})," ",l.windIntensity]})]})]}),(0,c.jsxs)("div",{className:"bg-gray-800 p-3 rounded",children:[(0,c.jsx)("h4",{className:"font-medium text-blue-300 mb-2",children:"Calculation Results"}),(0,c.jsxs)("div",{className:"text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Condition:"})," ",l.condition]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Result Temp:"})," ",l.temperature,"\xb0F"]}),(0,c.jsx)("div",{className:"mt-2 text-gray-400",children:"Result Notes:"}),(0,c.jsx)("div",{className:"whitespace-pre-wrap text-xs mt-1 text-gray-300",children:`${l.condition} determined with:\nInstability: ${(null===(i=y.instability)||void 0===i?void 0:i.toFixed(1))||0}/10\nPrecip Potential: ${(null===(o=y.precipitationPotential)||void 0===o?void 0:o.toFixed(1))||0}%\nCloud Cover: ${(null===(s=y.cloudCover)||void 0===s?void 0:s.toFixed(1))||0}%\nWeather System Type: ${g}`})]})]})]})},Ze=e=>{let{region:t}=e;return null},et=e=>{let{currentDate:t,currentSeason:n}=e;const{formatGameDate:a,formatGameTime:r}=S(),i=(e=>{const t=e.getFullYear(),n=new Date(t,2,20),a=new Date(t,5,21),r=new Date(t,8,22),i=new Date(t,11,21),o=new Date(e);o.setHours(12,0,0,0),n.setHours(12,0,0,0),a.setHours(12,0,0,0),r.setHours(12,0,0,0),i.setHours(12,0,0,0);const s=new Date(t-1,11,21,12,0,0,0);let l,c,u;o>=i||o<n?(u="Winter",l=o>=i?i:s,c=o>=i?new Date(t+1,2,20,12,0,0,0):n):o>=n&&o<a?(u="Spring",l=n,c=a):o>=a&&o<r?(u="Summer",l=a,c=r):(u="Fall",l=r,c=i);const d=(o-l)/864e5/((c-l)/864e5);return d<.33?`Early ${u}`:d<.67?`${u}`:`Late ${u}`})(t);return(0,c.jsxs)("div",{className:"time-display",children:[(0,c.jsx)("div",{className:"time-display-large",children:r(t)}),(0,c.jsx)("div",{className:"date-display",children:a(t)}),(0,c.jsx)("div",{className:"season-display",children:i})]})},tt=e=>{let{onAdvanceTime:t}=e;const[n,r]=(0,a.useState)(1);return(0,c.jsxs)("div",{className:"custom-time-controls",children:[(0,c.jsx)("input",{type:"number",min:"1",value:n,onChange:e=>r(parseInt(e.target.value)||1),className:"custom-hours-input","aria-label":"Custom hours"}),(0,c.jsx)("button",{onClick:()=>{n>0&&t(n)},className:"custom-advance-button",children:"Advance"})]})},nt=e=>{let{onAdvanceTime:t}=e;return(0,c.jsxs)("div",{className:"quick-time-controls",children:[(0,c.jsx)("button",{onClick:()=>t(1),className:"time-button",children:"+1h"}),(0,c.jsx)("button",{onClick:()=>t(4),className:"time-button",children:"+4h"}),(0,c.jsx)("button",{onClick:()=>t(24),className:"time-button",children:"+24h"})]})};function at(e){return e&&e instanceof Date&&!isNaN(e.getTime())?e.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"N/A"}const rt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},it=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()},ot=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var st={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lt=(0,a.forwardRef)(((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:s="",children:l,iconNode:c,...u}=e;return(0,a.createElement)("svg",{ref:t,...st,width:r,height:r,stroke:n,strokeWidth:o?24*Number(i)/Number(r):i,className:it("lucide",s),...!l&&!ot(u)&&{"aria-hidden":"true"},...u},[...c.map((e=>{let[t,n]=e;return(0,a.createElement)(t,n)})),...Array.isArray(l)?l:[l]])})),ct=(e,t)=>{const n=(0,a.forwardRef)(((n,r)=>{let{className:i,...o}=n;return(0,a.createElement)(lt,{ref:r,iconNode:t,className:it(`lucide-${s=rt(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...o});var s}));return n.displayName=rt(e),n},ut=ct("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),dt=ct("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),mt=ct("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),ht=ct("cloud-rain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]),ft=ct("cloud-drizzle",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 19v1",key:"1dk2by"}],["path",{d:"M8 14v1",key:"84yxot"}],["path",{d:"M16 19v1",key:"v220m7"}],["path",{d:"M16 14v1",key:"g12gj6"}],["path",{d:"M12 21v1",key:"q8vafk"}],["path",{d:"M12 16v1",key:"1mx6rx"}]]),pt=ct("cloud-snow",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]]),gt=ct("snowflake",[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]]),vt=ct("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),yt=ct("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),bt=ct("cloud-lightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]),wt=ct("cloud-fog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]),xt=ct("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),St=e=>{let{condition:t,isDaytime:n,size:r=24,color:i="currentColor"}=e;const o=function(e,t){const n={...{size:.7*r,color:i,style:{position:"absolute",bottom:.2*-r,right:.2*-r,opacity:.9}},...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}};return(0,c.jsxs)("div",{className:"weather-icon-composite",style:{position:"relative",display:"inline-block",width:r,height:r},children:[(0,c.jsx)("div",{style:{position:"absolute",top:0,left:0},children:e}),(0,c.jsx)("div",{style:{position:"absolute",bottom:n.style.bottom,right:n.style.right},children:a.cloneElement(t,{size:n.size,color:n.color,style:{opacity:n.style.opacity}})})]})};return(0,c.jsx)("div",{className:"weather-icon-wrapper",style:{position:"relative",display:"inline-block",width:r,height:r},children:(()=>{switch(t){case"Clear Skies":return n?(0,c.jsx)(ut,{size:r,color:i}):(0,c.jsx)(dt,{size:r,color:i});case"Light Clouds":return o(n?(0,c.jsx)(ut,{size:r,color:i}):(0,c.jsx)(dt,{size:r,color:i}),(0,c.jsx)(mt,{}),{size:.65*r,style:{opacity:.8,bottom:.15*-r,right:.15*-r}});case"Heavy Clouds":return(0,c.jsx)(mt,{size:r,color:i});case"Rain":return(0,c.jsx)(ht,{size:r,color:i});case"Heavy Rain":return(0,c.jsx)(ft,{size:r,color:i});case"Snow":return(0,c.jsx)(pt,{size:r,color:i});case"Freezing Cold":return(0,c.jsx)(gt,{size:r,color:i});case"Cold Winds":return(0,c.jsx)(vt,{size:r,color:i});case"Scorching Heat":return(0,c.jsx)(yt,{size:r,color:i});case"Thunderstorm":return(0,c.jsx)(bt,{size:r,color:i});case"Blizzard":return o((0,c.jsx)(pt,{size:r,color:i}),(0,c.jsx)(vt,{}),{size:.6*r});case"High Humidity Haze":return(0,c.jsx)(wt,{size:r,color:i});case"Cold Snap":return o((0,c.jsx)(gt,{size:r,color:i}),(0,c.jsx)(yt,{}),{size:.6*r});default:return(0,c.jsx)(xt,{size:r,color:i})}})()})};const kt=e=>{var t;let{currentWeather:n,celestialInfo:a,isDaytime:r}=e;if(!n)return null;const i=r?"sunset":"sunrise",o=at(r?a.sunset:a.sunrise),s=(d=n.temperature,m=(null===(t=n._meteoData)||void 0===t?void 0:t.humidity)||50,h=n.windSpeed,d<=50?Math.round((u=h,(l=d)<=50&&u>3?35.74+.6215*l-35.75*Math.pow(u,.16)+.4275*l*Math.pow(u,.16):l)):d>=80?Math.round(function(e,t){return e>=80?.5*(e+61+1.2*(e-68)+.094*t):e}(d,m)):Math.round(d));var l,u,d,m,h;const f=s-n.temperature,p=Math.abs(f)>=1;return(0,c.jsxs)("div",{className:"weather-overlay",children:[(0,c.jsx)("div",{className:"region-name",children:n.regionName||"Placeville"}),(0,c.jsxs)("div",{className:"temperature-display-large",children:[n.temperature,"\xb0"]}),(0,c.jsx)("div",{className:"feels-like-container",children:p?(0,c.jsxs)("div",{className:"feels-like-temp "+(f<0?"feels-colder":"feels-warmer"),children:["Feels Like: ",s,"\xb0"]}):(0,c.jsx)("div",{className:"feels-like-temp",children:"Actual Temperature"})}),(0,c.jsx)("div",{className:"weather-condition",children:n.condition}),(0,c.jsxs)("div",{className:"wind-display-large",children:[n.windSpeed," mph ",n.windDirection," \u2022"," ",n.windIntensity]}),(0,c.jsxs)("div",{className:"next-event-display",children:["Next ",i,": ",o]})]})},Ct=e=>{let{activeSection:t,setActiveSection:n,excludeForecast:a=!1}=e;return(0,c.jsxs)("div",{className:"action-buttons",children:[(0,c.jsx)("button",{className:"effects-button "+("effects"===t?"active":""),onClick:()=>n("effects"===t?null:"effects"),children:"Game Effects"}),!a&&(0,c.jsx)("button",{className:"forecast-button "+("forecast"===t?"active":""),onClick:()=>n("forecast"===t?null:"forecast"),children:"24h Forecast"}),(0,c.jsx)("button",{className:"region-details-button "+("region"===t?"active":""),onClick:()=>n("region"===t?null:"region"),children:"Region Details"})]})},Nt=e=>{let{forecast:t,latitudeBand:n="temperate",celestialInfo:r,isExpanded:i=!1}=e;return(0,a.useEffect)((()=>{const e=document.querySelector(".forecast-scroll");if(e){e.scrollWidth>e.clientWidth?e.classList.add("scrollable"):e.classList.remove("scrollable")}}),[t,i]),(0,c.jsx)("div",{className:"forecast-scroll",children:(0,c.jsx)("div",{className:"forecast-hours "+(i?"expanded":""),children:t.map(((e,t)=>{const a=(e=>{var t,a;if(!r){const{sunrise:t,sunset:a}=Me.getFormattedSunriseSunset(n,e);return e>=t&&e<=a}const i=null===(t=r.sunrise)||void 0===t?void 0:t.getTime(),o=null===(a=r.sunset)||void 0===a?void 0:a.getTime(),s=e.getTime();return!i||!o||s>=i&&s<=o})(e.date),i=(e=>{if(!r||!r.sunrise)return!1;const t=new Date(e);t.setMinutes(0,0,0);const n=new Date(t);return n.setHours(n.getHours()+1),r.sunrise>=t&&r.sunrise<n})(e.date),o=(e=>{if(!r||!r.sunset)return!1;const t=new Date(e);t.setMinutes(0,0,0);const n=new Date(t);return n.setHours(n.getHours()+1),r.sunset>=t&&r.sunset<n})(e.date),s=i?"sunrise-hour":o?"sunset-hour":"",l=a?"day-background":"night-background";return(0,c.jsxs)("div",{className:`forecast-item ${l} ${s}`,children:[(0,c.jsxs)("div",{className:"forecast-time",children:[(u=e.date,u.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})),i&&(0,c.jsx)("div",{className:"celestial-marker sunrise-marker",children:"\u2191"}),o&&(0,c.jsx)("div",{className:"celestial-marker sunset-marker",children:"\u2193"})]}),(0,c.jsx)("div",{className:"forecast-icon",children:(0,c.jsx)(St,{condition:e.condition,isDaytime:a,size:32})}),(0,c.jsx)("div",{className:"forecast-condition",children:e.condition}),(0,c.jsxs)("div",{className:"forecast-temp",children:[e.temperature,"\xb0"]}),(0,c.jsxs)("div",{className:"forecast-wind",children:[(0,c.jsx)(vt,{size:12}),(0,c.jsxs)("span",{children:[e.windSpeed," mph"]})]})]},t);var u}))})})},Tt=e=>{let{region:t,celestialInfo:n,currentSeason:r,season:i,setSeason:o,onRegenerateWeather:s,weatherSystemType:l,onChangeWeatherSystem:u,showDebug:d,setShowDebug:m,currentWeather:h}=e;const{state:f}=ve();if(!t)return null;const[p,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!0),[b,w]=(0,a.useState)(null);(0,a.useEffect)((()=>{(()=>{if(!t)return;let e=null,n=null;if(t.profile&&t.profile.template)return w(t.profile.template);if(t.templateInfo&&t.templateInfo.templateId?(e=t.templateInfo.templateId,n=t.templateInfo.latitudeBand):t.templateId&&(e=t.templateId,n=x()),e&&n){const t=(0,ye.getTemplatesForLatitudeBand)(n);t&&t[e]&&w(t[e])}else w(null)})()}),[t]);const x=()=>t.profile&&t.profile.latitudeBand?t.profile.latitudeBand:t.latitudeBand||"temperate",S=()=>t.templateInfo&&t.templateInfo.templateId?t.templateInfo.templateId:t.templateId?t.templateId:t.profile&&t.profile.templateId?t.profile.templateId:null;return(0,c.jsxs)("div",{className:"region-details-section",children:[(0,c.jsx)(Ze,{region:t}),(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Region Details"}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Biome:"})," ",t.profile&&t.profile.biome?t.profile.biome.replace("-"," "):t.climate?t.climate.replace("-"," "):"unknown"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Season:"})," ",r]}),(0,c.jsxs)("div",{className:"col-span-2",children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Latitude Band:"})," ",(k=x(),{equatorial:"Equatorial (0\xb0 - 10\xb0)",tropical:"Tropical (10\xb0 - 30\xb0)",temperate:"Temperate (30\xb0 - 60\xb0)",subarctic:"Subarctic (60\xb0 - 75\xb0)",polar:"Polar (75\xb0 - 90\xb0)"}[k]||k),(0,c.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Calculated as ",(e=>({equatorial:5,tropical:20,temperate:45,subarctic:65,polar:80}[e]||45))(x()),"\xb0 latitude"]})]}),(0,c.jsxs)("div",{className:"col-span-2",children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Daylight:"})," ",n.dayLengthFormatted||"N/A","polar"===x()&&(0,c.jsx)("div",{className:"text-xs text-green-400 mt-1",children:"Polar regions experience extended daylight in summer and darkness in winter"})]})]}),(null!==b||t.templateInfo&&t.templateInfo.templateId||t.templateId||t.profile&&t.profile.template&&t.profile.template.name)&&(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsxs)("button",{className:"text-left w-full flex justify-between items-center py-2 px-4 bg-accent bg-opacity-20 rounded",onClick:()=>y(!v),children:[(0,c.jsxs)("span",{className:"font-semibold",children:["Template: ",b?b.name:S()]}),(0,c.jsx)("span",{children:v?"\u25b2":"\u25bc"})]}),v&&(0,c.jsx)("div",{className:"mt-2 p-3 bg-surface rounded border border-accent border-opacity-50",children:b?(0,c.jsxs)(c.Fragment,{children:[b.description&&(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)("p",{className:"text-sm",children:b.description})}),b.gameplayImpact&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{className:"text-sm font-semibold text-accent mb-1",children:"Gameplay Impact:"}),(0,c.jsx)("p",{className:"text-sm text-gray-300",children:b.gameplayImpact})]})]}):(0,c.jsx)("div",{children:(0,c.jsxs)("p",{className:"text-sm text-gray-400",children:['Template information for "',S(),'" could not be loaded from the templates database.']})})})]}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsxs)("button",{className:"text-left w-full flex justify-between items-center py-2 px-4 bg-surface-light rounded",onClick:()=>g(!p),children:[(0,c.jsx)("span",{children:"Celestial Information"}),(0,c.jsx)("span",{children:p?"\u25b2":"\u25bc"})]}),p&&(0,c.jsxs)("div",{className:"mt-2 p-3 bg-surface rounded",children:[(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Sunrise:"})," ",n.sunriseTime||"N/A"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Sunset:"})," ",n.sunsetTime||"N/A"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Moonrise:"})," ",n.moonriseTime||"N/A"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-gray-400",children:"Moonset:"})," ",n.moonsetTime||"N/A"]})]}),"polar"===x()&&(0,c.jsxs)("div",{className:"mt-3 p-2 bg-gray-800 rounded text-xs",children:[(0,c.jsx)("div",{className:"font-semibold mb-1",children:"Polar Regions:"}),(0,c.jsx)("p",{children:"Near the summer solstice (June 21), polar regions experience 24 hours of daylight."}),(0,c.jsx)("p",{className:"mt-1",children:"Near the winter solstice (December 21), polar regions experience 24 hours of darkness."})]})]})]}),(0,c.jsxs)("div",{className:"mt-4 p-3 bg-surface-light rounded",children:[(0,c.jsx)("h3",{className:"font-semibold mb-2",children:"Weather Generation System"}),(0,c.jsxs)("div",{className:"text-gray-300",children:["Using"," ","meteorological"===f.weatherSystem?"Advanced (Meteorological)":"Basic (Dice Tables)"," ","system for all regions"]}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"Change the weather system in App Preferences (gear icon)"})]}),f.debugMode&&h&&(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(Xe,{weatherData:h,region:t,weatherService:null})}),(0,c.jsx)("button",{onClick:s,className:"btn btn-primary mt-4 w-full",children:"Regenerate Weather"})]})]});var k},Dt=ct("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Mt=ct("footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]),jt=ct("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Et=ct("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Rt=ct("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),It=e=>{let{weatherEffects:t,currentWeather:r,currentDate:i,latitudeBand:o="temperate",biome:s="temperate-deciduous",regionId:l=null,cachedDescription:u=null}=e;const[d,m]=(0,a.useState)(null),[h,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(""),[b,w]=(0,a.useState)(null),[x,S]=(0,a.useState)(!0),[k,C]=(0,a.useState)(null);if((0,a.useEffect)((()=>{if(r&&i)try{if(u)y(u);else if(l){const e=localStorage.getItem(`weather_description_${l}`);if(e)y(e);else{const e=Ke.generateDescription(r,s,i,l);y(e);try{localStorage.setItem(`weather_description_${l}`,e)}catch(k){console.error("Error storing weather description:",k)}}}else{const e=Ke.generateDescription(r,s,i);y(e)}"object"===typeof t&&null!==t?w(t):r&&r.condition&&Promise.resolve().then(n.bind(n,910)).then((e=>{const t=e.weatherEffects[r.condition];w(t||null)}))}catch(k){console.error("Error generating weather description:",k),C("Failed to generate weather description")}}),[r,t,s,i,l,u]),(0,a.useEffect)((()=>{if(i){S(!0),C(null);try{let e=null;try{e=qe.getMoonPhase(i)}catch(k){console.error("Error getting moon phase:",k)}let t=!0;try{t=Me.getFormattedSunriseSunset(o,i).isDaytime}catch(k){console.error("Error getting sunrise/sunset info:",k)}m(e),f(!t),S(!1)}catch(k){console.error("Error in moon/sun calculations:",k),C("Error calculating celestial data"),S(!1)}}else S(!1)}),[i,o]),!t&&!r)return null;const N=(null===r||void 0===r?void 0:r.condition)||"Unknown";return(0,c.jsx)("div",{className:"weather-effects-section",children:(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>g(!p),children:[(0,c.jsx)("h2",{className:"text-xl font-semibold",children:"Weather & Environment Effects"}),(0,c.jsx)("span",{children:p?"\u25bc":"\u25b2"})]}),!p&&(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsxs)("div",{className:"p-3 rounded bg-surface-light mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),(0,c.jsx)("p",{className:"italic text-gray-100",children:v})]}),(0,c.jsxs)("div",{className:"weather-effects-content mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Game Effects"}),(0,c.jsx)("div",{className:"p-3 rounded bg-surface-light",children:b?b?(0,c.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[b.visibility&&(0,c.jsxs)("div",{className:"effect-section",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(Dt,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Visibility"})]}),(0,c.jsx)("div",{className:"effect-content",children:b.visibility})]}),b.movement&&(0,c.jsxs)("div",{className:"effect-section",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(Mt,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Movement"})]}),(0,c.jsx)("div",{className:"effect-content",children:b.movement})]}),b.rest&&"Normal"!==b.rest&&(0,c.jsxs)("div",{className:"effect-section",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(dt,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Rest"})]}),(0,c.jsx)("div",{className:"effect-content",children:b.rest})]}),b.damage&&b.damage.length>0&&(0,c.jsxs)("div",{className:"effect-section",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(jt,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Damage Modifiers"})]}),(0,c.jsx)("div",{className:"effect-content",children:(0,c.jsx)("ul",{className:"list-disc pl-6 space-y-1",children:b.damage.map(((e,t)=>(0,c.jsx)("li",{children:e},t)))})})]}),b.checks&&b.checks.length>0&&(0,c.jsxs)("div",{className:"effect-section",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(Et,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Check Modifiers"})]}),(0,c.jsx)("div",{className:"effect-content",children:(0,c.jsx)("ul",{className:"list-disc pl-6 space-y-1",children:b.checks.map(((e,t)=>(0,c.jsx)("li",{children:e},t)))})})]}),b.other&&b.other.length>0&&(0,c.jsxs)("div",{className:"effect-section",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(Rt,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Other Effects"})]}),(0,c.jsx)("div",{className:"effect-content",children:(0,c.jsx)("ul",{className:"list-disc pl-6 space-y-1",children:b.other.map(((e,t)=>(0,c.jsx)("li",{children:e},t)))})})]}),r&&r.windSpeed>15&&(0,c.jsxs)("div",{className:"effect-section mt-2 p-3 bg-surface-light rounded",children:[(0,c.jsxs)("div",{className:"effect-header",children:[(0,c.jsx)(vt,{size:18,className:"mr-2"}),(0,c.jsx)("h4",{className:"font-medium",children:"Wind Effects"})]}),(0,c.jsxs)("div",{className:"effect-content",children:[r.windIntensity,": ",r.windSpeed," mph"," ",r.windDirection]})]})]}):(0,c.jsxs)("div",{className:"text-center p-4 text-gray-400",children:["No specific game effects for ",N,"."]}):"string"===typeof t?(0,c.jsx)("div",{className:"whitespace-pre-line",children:t}):(0,c.jsx)("div",{className:"text-center p-4 text-gray-400",children:"No game effects available for this weather condition."})})]}),x?(0,c.jsx)("div",{className:"text-center p-4",children:"Loading celestial data..."}):k?(0,c.jsx)("div",{className:"text-red-500 p-4",children:k}):d&&(0,c.jsxs)("div",{className:"moon-effects-content mt-4 border-t border-gray-700 pt-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Moon Phase"}),(0,c.jsxs)("div",{className:"flex items-center mb-2",children:[(0,c.jsx)("span",{className:"text-3xl mr-3",children:d.icon}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"font-semibold",children:d.name}),(0,c.jsxs)("div",{className:"text-sm text-gray-400",children:[d.exactPercentage,"% illuminated \u2022"," ",d.isWaxing?"Waxing":"Waning"]})]})]}),h&&(0,c.jsxs)("div",{className:"mt-3 p-3 rounded bg-surface-light",children:["Full Moon"===d.name||"Waxing Gibbous"===d.name||"Waning Gibbous"===d.name?(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"font-semibold",children:"Light Level:"})," ","Dim Light in open areas ",(0,c.jsx)("br",{}),(0,c.jsx)("span",{className:"text-sm block mt-1 text-gray-400",children:"Characters without darkvision can see up to 60 feet but have disadvantage on Perception checks."})]}):(0,c.jsxs)("p",{children:[(0,c.jsx)("span",{className:"font-semibold",children:"Light Level:"})," ","Darkness ",(0,c.jsx)("br",{}),(0,c.jsx)("span",{className:"text-sm block mt-1 text-gray-400",children:"Characters without darkvision cannot see."})]}),"Full Moon"===d.name&&(0,c.jsxs)("p",{className:"mt-2 text-amber-300",children:[(0,c.jsx)("span",{className:"font-semibold",children:"Lycanthropy:"})," ","Lycanthropes are forced to transform."]})]})]})]})]})})},Pt=()=>{var e,t,n;const r=(0,a.useRef)(0),{state:i}=ve(),{activeRegion:o}=oe(),{currentDate:s,advanceTime:l,getRegionWeather:u,updateRegionWeather:d,getRegionLastUpdateTime:m,updateRegionTimestamp:h}=L(),{state:f,formatGameDate:p,formatGameTime:g,advanceGameTime:v}=S(),[y,b]=(0,a.useState)("auto"),[w,x]=(0,a.useState)(""),[k,C]=(0,a.useState)([]),[N,T]=(0,a.useState)(null),[D,M]=(0,a.useState)({backgroundColor:"#1f2937",textColor:"#f9fafb",backgroundImage:"none"}),[j,E]=(0,a.useState)(!0),[R,I]=(0,a.useState)(!1),[P,F]=(0,a.useState)(0),[z,_]=(0,a.useState)(""),[H,W]=(0,a.useState)(!1),[B,A]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;o&&console.log(`[WEATHER TYPE] Region ${o.id}: "${o.weatherType||"diceTable"}" (from localStorage: "${(null===(e=u(o.id))||void 0===e?void 0:e.weatherType)||"N/A"}")`)}),[o,u]);const O=(0,a.useRef)(null),$=(0,a.useRef)(null),U=(0,a.useRef)(null);(0,a.useEffect)((()=>{r.current+=1}));const V=(0,a.useCallback)((()=>{if(!o)return console.log("[WeatherDashboard] No active region, returning default celestial info"),{sunrise:null,sunset:null,isDaytime:!1,sunriseTime:"N/A",sunsetTime:"N/A",moonrise:null,moonset:null,moonriseTime:"N/A",moonsetTime:"N/A",dayLengthFormatted:"N/A"};try{const e=o.latitudeBand||o.profile&&o.profile.latitudeBand||"temperate";console.log(`[WeatherDashboard] Calculating celestial info for ${o.name}`,{latitudeBand:e,date:s.toISOString(),isDaylight:"polar"===e?"possible 24hr daylight in summer":"normal daylight cycle"});const t=Me.getFormattedSunriseSunset(e,s);console.log("[WeatherDashboard] Sunrise/sunset result:",{sunriseTime:t.sunriseTime,sunsetTime:t.sunsetTime,dayLength:t.dayLengthFormatted});const{moonrise:n,moonset:a}=qe.getMoonTimes(s,e),r=e=>{if(!(e instanceof Date)||isNaN(e.getTime()))return"N/A";const t=e.getHours(),n=e.getMinutes();return`${t%12||12}:${n<10?`0${n}`:n} ${t>=12?"PM":"AM"}`};return{...t,moonrise:n,moonset:a,moonriseTime:r(n),moonsetTime:r(a)}}catch(e){return console.error("Error calculating celestial info:",e),{sunrise:null,sunset:null,isDaytime:!1,sunriseTime:"Error",sunsetTime:"Error",moonrise:null,moonset:null,moonriseTime:"Error",moonsetTime:"Error",dayLengthFormatted:"Error"}}}),[o,s]),q=(0,a.useMemo)((()=>V()),[V]);(0,a.useEffect)((()=>{var e;q&&o&&console.log(`[WeatherDashboard] Celestial info updated for ${o.name}:`,{dayLength:q.dayLengthFormatted,latitudeBand:o.latitudeBand||(null===(e=o.profile)||void 0===e?void 0:e.latitudeBand)||"unknown",date:s.toISOString().split("T")[0]})}),[q,o,s]),(0,a.useEffect)((()=>{const e=Date.now();if(U.current&&e-U.current<500)return;if(!k.length||!o)return;const t=k[0];try{var n;const a=t.condition,r=t.date?new Date(t.date):s,{sunrise:i,sunset:l}=q;if(!i||!l)return;const c=((e,t,n,a)=>{const r=e.getTime(),i=n.getTime(),o=a.getTime(),s=i-36e5,l=i+36e5,c=o-36e5,u=o+36e5,d=["Heavy Clouds","Rain","Heavy Rain","Thunderstorm","Blizzard","Snow"].includes(t);if(r>u||r<s)return d?"linear-gradient(to bottom, #1e2130 0%, #11151c 100%)":"linear-gradient(to bottom, #0c1445 0%, #000033 100%)";if(r>=s&&r<=i)return d?"linear-gradient(to bottom, #5d5c73 0%, #43405d 100%)":"linear-gradient(to bottom, #ff7e45 0%, #ff4500 100%)";if(r>i&&r<=l)return d?"linear-gradient(to bottom, #7a7d89 0%, #5c6a7d 100%)":"linear-gradient(to bottom, #ffb347 0%, #ffcc33 100%)";if(r>l&&r<c){const e=(r-l)/(c-l);return e<.33?d?"linear-gradient(to bottom, #7a7d89 0%, #5c6a7d 100%)":"linear-gradient(to bottom, #87ceeb 0%, #5b6ee1 100%)":e<.66?d?"linear-gradient(to bottom, #9aa0ab 0%, #78909c 100%)":"linear-gradient(to bottom, #1e90ff 0%, #4682b4 100%)":d?"linear-gradient(to bottom, #7a8395 0%, #5c6777 100%)":"linear-gradient(to bottom, #4682b4 0%, #87cefa 100%)"}return r>=c&&r<=o?d?"linear-gradient(to bottom, #515868 0%, #3c434e 100%)":"linear-gradient(to bottom, #ff4500 0%, #ff7e45 100%)":r>o&&r<=u?d?"linear-gradient(to bottom, #2f3542 0%, #232b38 100%)":"linear-gradient(to bottom, #483d8b 0%, #2f2f4f 100%)":"linear-gradient(to bottom, #87ceeb 0%, #1e90ff 100%)"})(r,a,i,l),u=Qe.calculateSkyColor(r,a,o.latitudeBand||(null===(n=o.profile)||void 0===n?void 0:n.latitudeBand)||"temperate");M({backgroundColor:u.backgroundColor,textColor:u.textColor,backgroundImage:c}),U.current=e}catch(a){console.error("Error calculating sky colors:",a)}}),[k.length>0?k[0].condition:null,k.length>0&&k[0].date?k[0].date.getTime():null,null===o||void 0===o?void 0:o.id,q.sunrise,q.sunset,s]);const Y=(0,a.useCallback)(((e,t)=>{if(e&&t)try{localStorage.setItem(`weather_description_${e}`,t)}catch(n){console.error("Error storing weather description:",n)}}),[]),G=(0,a.useCallback)((e=>{if(!e)return null;try{return localStorage.getItem(`weather_description_${e}`)}catch(t){return console.error("Error retrieving weather description:",t),null}}),[]),Q=(0,a.useCallback)((()=>{var e;if(!o)return;const t=o.id,n=s.toISOString();if(R&&O.current===t&&$.current===n)return;O.current=t,$.current=n,console.log("[WeatherDashboard] Initializing weather:",{region:t,name:o.name,date:n,latitudeBand:o.latitudeBand||(null===(e=o.profile)||void 0===e?void 0:e.latitudeBand)||"temperate"}),E(!0);const a=u(t),r=m(t),l=G(t);if(a&&r){const e=new Date(r),n=new Date(s),a=n.getTime()-e.getTime();if(Math.abs(a)>6e4){const r=Math.round(a/36e5);if(0!==r){if(Math.abs(r)>72){var c;const e="auto"===y?He.getSeasonFromDate(n):y,a=o.weatherType||i.weatherSystem||"diceTable";console.log(`[WeatherDashboard] Regenerating weather with system: ${a} (preference: ${i.weatherSystem}, region: ${o.weatherType})`);const r=o.climate||o.profile&&o.profile.climate||(null===(c=o.profile)||void 0===c?void 0:c.biome)||"temperate-deciduous",s=o.latitudeBand||o.profile&&o.profile.latitudeBand||"temperate";console.log(`[WeatherDashboard] Using climate: ${r}, latitudeBand: ${s}`);const l=He.initializeWeather(t,r,e,n,a),u=Ke.generateDescription(l[0],r,n,t);_(u),Y(t,u),C(l),x(e),d(t,{season:y,currentSeason:e,weatherType:a,forecast:l.map((e=>({...e,date:e.date.toISOString()})))})}else{var f;const a="auto"===y?He.getSeasonFromDate(n):y,s=Math.abs(r),l=o.weatherType||i.weatherSystem||"diceTable";let c;if(r>0){var p;const n=o.climate||o.profile&&o.profile.climate||(null===(p=o.profile)||void 0===p?void 0:p.biome)||"temperate-deciduous";console.log(`[WeatherDashboard] Advancing time with climate: ${n}`),c=He.advanceTime(t,s,n,a,new Date(e.getTime()))}else{var g;const e=o.climate||o.profile&&o.profile.climate||(null===(g=o.profile)||void 0===g?void 0:g.biome)||"temperate-deciduous";console.log(`[WeatherDashboard] Reinitializing with climate: ${e}`),c=He.initializeWeather(t,e,a,n,l)}const u=Ke.generateDescription(c[0],o.climate||(null===(f=o.profile)||void 0===f?void 0:f.biome)||"temperate-deciduous",n,t);_(u),Y(t,u),C(c),x(a),d(t,{season:y,currentSeason:a,weatherType:l,forecast:c.map((e=>({...e,date:e.date.toISOString()})))})}return h(t,n.toISOString()),E(!1),void I(!0)}}}if(a&&a.forecast){b(a.season),x(a.currentSeason);a.weatherType;const e=a.forecast.map((e=>({...e,date:new Date(e.date)})));if(C(e),l)_(l);else{var v;const n=Ke.generateDescription(e[0],o.climate||(null===(v=o.profile)||void 0===v?void 0:v.biome)||"temperate-deciduous",s,t);_(n),Y(t,n)}h(t,s.toISOString())}else{var w;console.log("[WeatherDashboard] Generating new weather");const e="auto"===y?He.getSeasonFromDate(s):y,n=o.weatherType||i.weatherSystem||"diceTable",a=o.climate||o.profile&&o.profile.climate||(null===(w=o.profile)||void 0===w?void 0:w.biome)||"temperate-deciduous",r=o.latitudeBand||o.profile&&o.profile.latitudeBand||"temperate";console.log(`[WeatherDashboard] New weather with climate: ${a}, latitudeBand: ${r}`),x(e);const l=He.initializeWeather(t,a,e,s,n),c=Ke.generateDescription(l[0],a,s,t);_(c),Y(t,c),C(l),d(t,{season:y,currentSeason:e,weatherType:n,forecast:l.map((e=>({...e,date:e.date.toISOString()})))}),h(t,s.toISOString())}E(!1),I(!0)}),[o,s,y,u,d,h,R,Y,G,i]);(0,a.useEffect)((()=>{Q()}),[Q]);const K=(0,a.useCallback)((e=>{var t;if(!o)return;E(!0),console.log(`[WeatherDashboard] Advancing time by ${e} hours`);const n=new Date(s);l(e),v(e);const a=new Date(n);a.setHours(a.getHours()+e);const r="auto"===y?He.getSeasonFromDate(a):y,c=o.weatherType||i.weatherSystem||"diceTable",u=o.climate||o.profile&&o.profile.climate||(null===(t=o.profile)||void 0===t?void 0:t.biome)||"temperate-deciduous";console.log(`[WeatherDashboard] Advancing with climate: ${u}, weatherType: ${c}`);const m=He.advanceTime(o.id,e,u,r,a),f=Ke.generateDescription(m[0],u,a,o.id);_(f),Y(o.id,f),C(m),x(r),d(o.id,{season:y,currentSeason:r,weatherType:c,forecast:m.map((e=>({...e,date:e.date.toISOString()})))}),h(o.id,a.toISOString()),E(!1),F((e=>e+1))}),[o,s,y,l,v,d,h,Y,i]),J=(0,a.useCallback)((()=>{var e;if(!o)return;E(!0);const t="auto"===y?He.getSeasonFromDate(s):y,n=o.weatherType||i.weatherSystem||"diceTable";console.log(`[WeatherDashboard] Regenerating weather with type: ${n}`);const a=o.climate||o.profile&&o.profile.climate||(null===(e=o.profile)||void 0===e?void 0:e.biome)||"temperate-deciduous",r=o.latitudeBand||o.profile&&o.profile.latitudeBand||"temperate";console.log(`[WeatherDashboard] Regenerating with climate: ${a}, latitudeBand: ${r}`),x(t);const l=He.initializeWeather(o.id,a,t,s,n),c=Ke.generateDescription(l[0],a,s,o.id);_(c),Y(o.id,c),Ke.clearCache(o.id),C(l),d(o.id,{season:y,currentSeason:t,weatherType:n,forecast:l.map((e=>({...e,date:e.date.toISOString()})))}),h(o.id,s.toISOString()),E(!1),F((e=>e+1))}),[o,y,s,i,d,h,Y]),X=(0,a.useCallback)((e=>{var t;if(!o||!o.id)return;E(!0);const n="auto"===y?He.getSeasonFromDate(s):y,a=o.climate||o.profile&&o.profile.climate||(null===(t=o.profile)||void 0===t?void 0:t.biome)||"temperate-deciduous",r=o.latitudeBand||o.profile&&o.profile.latitudeBand||"temperate";console.log(`[WeatherDashboard] Changing weather system with climate: ${a}, latitudeBand: ${r}`);const i=He.initializeWeather(o.id,a,n,s,e),l=Ke.generateDescription(i[0],a,s,o.id);_(l),Y(o.id,l),Ke.clearCache(o.id),C(i),x(n),d(o.id,{season:y,currentSeason:n,weatherType:e,forecast:i.map((e=>({...e,date:e.date.toISOString()})))}),h(o.id,s.toISOString()),E(!1)}),[o,y,s,d,h,Y]);if(!o)return(0,c.jsxs)("div",{className:"empty-state",children:[(0,c.jsx)("div",{className:"empty-state-icon",children:"\ud83d\uddfa\ufe0f"}),(0,c.jsx)("h2",{className:"empty-state-title",children:"No Region Selected"}),(0,c.jsx)("p",{className:"empty-state-desc",children:"To get started, you need to create or select a region."}),(0,c.jsx)("div",{className:"mt-4 flex flex-col items-center",children:(0,c.jsx)("button",{onClick:()=>{const e=document.querySelector('button[title="Regions & Worlds"]');e&&e.click()},className:"mt-4 btn btn-primary",children:"Open Regions Menu"})})]});if(j)return(0,c.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-4xl mb-4",children:"\u23f3"}),(0,c.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Loading Weather"}),(0,c.jsxs)("p",{children:["Generating weather for ",o.name,"..."]})]})});const Z={backgroundImage:D.backgroundImage,color:D.textColor,transition:"background-color 2s, background-image 2s, color 2s"},ee=k.length>0?k[0]:null,te=o.weatherType||i.weatherSystem||"diceTable";return(0,c.jsxs)("div",{className:"weather-dashboard",children:[(0,c.jsxs)("div",{className:"region-selector",children:[(0,c.jsx)("div",{className:"region-selector-world",children:(null===f||void 0===f?void 0:f.worldName)||"Worldlandia"}),(0,c.jsxs)("div",{className:"region-selector-region",children:[o.name,(0,c.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]})]}),(0,c.jsx)("div",{className:"time-display-container",children:(0,c.jsx)(et,{currentDate:s,currentSeason:w})}),(0,c.jsx)("div",{className:"celestial-section",style:Z,children:ee&&(0,c.jsx)(kt,{currentWeather:{...ee,regionName:o.name},celestialInfo:q,isDaytime:q.isDaytime})}),(0,c.jsxs)("div",{className:"time-control-panel",children:[(0,c.jsx)(nt,{onAdvanceTime:K}),(0,c.jsx)(tt,{onAdvanceTime:K})]}),(0,c.jsxs)("div",{className:"forecast-section",children:[(0,c.jsxs)("div",{className:"forecast-header",onClick:()=>{A(!B)},children:[(0,c.jsx)("h3",{className:"forecast-title",children:B?"24-Hour Forecast":"Upcoming Hours"}),(0,c.jsx)("span",{className:"expand-icon",children:B?"See Less":"See More"})]}),(0,c.jsx)(Nt,{forecast:B?k:k.slice(0,6),latitudeBand:o.latitudeBand||o.profile&&o.profile.latitudeBand||"temperate",celestialInfo:q,isExpanded:B})]}),(0,c.jsxs)("div",{className:"tabs-container",children:[(0,c.jsx)(Ct,{activeSection:N,setActiveSection:T,excludeForecast:!0}),"effects"===N&&(0,c.jsx)("div",{className:"tab-content",children:(0,c.jsx)(It,{weatherEffects:(null===ee||void 0===ee?void 0:ee.effects)||"",currentWeather:ee,currentDate:s,latitudeBand:(null===o||void 0===o?void 0:o.latitudeBand)||(null===(e=o.profile)||void 0===e?void 0:e.latitudeBand)||"temperate",biome:(null===o||void 0===o?void 0:o.climate)||(null===(t=o.profile)||void 0===t?void 0:t.climate)||(null===(n=o.profile)||void 0===n?void 0:n.biome)||"temperate-deciduous",regionId:o.id,cachedDescription:z})}),"region"===N&&(0,c.jsx)("div",{className:"tab-content",children:(0,c.jsx)(Tt,{region:o,celestialInfo:q,currentSeason:w,season:y,setSeason:b,onRegenerateWeather:J,weatherSystemType:te,onChangeWeatherSystem:X,showDebug:H,setShowDebug:W,currentWeather:ee})})]})]})},Ft=e=>{let{onComplete:t}=e;const[n,r]=(0,a.useState)(1),{setWorldName:i,setGameTime:o,setIsConfigured:s}=S(),{setWeatherSystem:l}=ve(),[u,d]=(0,a.useState)({worldName:"My Fantasy World",gameDate:(new Date).toISOString().split("T")[0],hourOfDay:(new Date).getHours()}),[m,h]=(0,a.useState)("diceTable"),f=[];for(let a=0;a<24;a++){const e=0===a?12:a>12?a-12:a,t=a<12?"AM":"PM";f.push((0,c.jsxs)("option",{value:a,children:[e," ",t]},a))}return(0,c.jsx)("div",{className:"modal-overlay",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsx)("div",{className:"flex justify-between items-center p-4 border-b border-border",children:(0,c.jsx)("h2",{className:"text-xl font-semibold",children:1===n?"Welcome to WeatherMaster":"Choose Weather Generation Method"})}),1===n?(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(2)},className:"p-4",children:[(0,c.jsx)("p",{className:"mb-4 text-gray-300",children:"Let's set up your world to get started."}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"worldName",className:"block mb-2",children:"World Name"}),(0,c.jsx)("input",{type:"text",id:"worldName",name:"worldName",value:u.worldName,onChange:e=>{const{name:t,value:n}=e.target;d({...u,[t]:n})},className:"w-full p-2 rounded bg-surface-light text-white border border-border",required:!0,autoFocus:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block mb-2",children:"Game Date"}),(0,c.jsx)(Oe,{id:"setup-date",initialValue:u.gameDate,onChange:e=>d((t=>({...t,gameDate:e})))}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"The current or starting date in your game"})]}),(0,c.jsx)("div",{className:"flex justify-end gap-3 pt-3 border-t border-border mt-6",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Continue"})})]}):(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{const[e,n,a]=u.gameDate.split("-"),r=parseInt(e,10),c=parseInt(n,10)-1,d=parseInt(a,10),h=new Date;h.setFullYear(r),h.setMonth(c),h.setDate(d),h.setHours(parseInt(u.hourOfDay,10),0,0,0),i(u.worldName),o(h),s(!0),l(m),localStorage.setItem("gm-weather-companion-setup-completed","true"),t&&t()}catch(n){console.error("Error setting up world:",n)}},className:"p-4",children:[(0,c.jsx)("p",{className:"mb-4 text-gray-300",children:"Choose your preferred method for generating weather."}),(0,c.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,c.jsxs)("div",{className:"p-4 rounded border cursor-pointer "+("diceTable"===m?"border-primary bg-surface-light":"border-border bg-surface"),onClick:()=>h("diceTable"),children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"radio",id:"diceTable",name:"weatherSystem",value:"diceTable",checked:"diceTable"===m,onChange:()=>h("diceTable"),className:"mr-3"}),(0,c.jsx)("label",{htmlFor:"diceTable",className:"font-semibold cursor-pointer",children:"Roll for Weather (Basic)"})]}),(0,c.jsx)("p",{className:"mt-2 text-sm text-gray-400 ml-6",children:"Uses classic dice tables for weather generation. Simpler, faster, with a traditional RPG feel."})]}),(0,c.jsxs)("div",{className:"p-4 rounded border cursor-pointer "+("meteorological"===m?"border-primary bg-surface-light":"border-border bg-surface"),onClick:()=>h("meteorological"),children:[(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"radio",id:"meteorological",name:"weatherSystem",value:"meteorological",checked:"meteorological"===m,onChange:()=>h("meteorological"),className:"mr-3"}),(0,c.jsx)("label",{htmlFor:"meteorological",className:"font-semibold cursor-pointer",children:"Meteorological Generation (Advanced)"})]}),(0,c.jsx)("p",{className:"mt-2 text-sm text-gray-400 ml-6",children:"Calculates realistic weather patterns based on physical parameters. More detailed and realistic transitions."})]})]}),(0,c.jsx)("div",{className:"text-sm text-gray-400 mb-4",children:"You can change this setting anytime in the app preferences."}),(0,c.jsxs)("div",{className:"flex justify-between gap-3 pt-3 border-t border-border mt-6",children:[(0,c.jsx)("button",{type:"button",onClick:()=>r(1),className:"btn",children:"Back"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Get Started"})]})]})]})})};const zt=function(){const[e,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!0),s=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{if(s.current)return;s.current=!0,console.log("Checking for initial setup state...");const e=localStorage.getItem("gm-weather-companion-world-settings"),t=localStorage.getItem("gm-weather-companion-regions"),n=localStorage.getItem("gm-weather-companion-setup-completed");if(console.log("Storage check:",{hasWorldSettings:!!e,hasRegions:!!t,setupCompleted:n}),"true"===n)return void console.log("Setup explicitly marked as completed, skipping setup");const a=localStorage.getItem("gm-weather-companion-setup-attempted");if(!e||"true"===a)return console.log("Setup required: No settings or previous attempt incomplete"),localStorage.setItem("gm-weather-companion-setup-attempted","true"),void r(!0);try{const t=JSON.parse(e);if(!t||!t.gameTime||!t.worldName)return console.log("Invalid world settings found, showing setup modal"),localStorage.setItem("gm-weather-companion-setup-attempted","true"),void r(!0);localStorage.setItem("gm-weather-companion-setup-completed","true"),localStorage.removeItem("gm-weather-companion-setup-attempted"),console.log("Valid world settings found, setup complete")}catch(i){console.error("Error parsing world settings:",i),localStorage.setItem("gm-weather-companion-setup-attempted","true"),r(!0)}}),[]),(0,c.jsx)(ge,{children:(0,c.jsx)(x,{children:(0,c.jsx)(z,{children:(0,c.jsx)(ie,{children:(0,c.jsxs)("div",{className:"app-container",children:[(0,c.jsx)(Ue,{}),(0,c.jsx)("main",{className:"app-main",children:(0,c.jsx)(Pt,{})}),(0,c.jsx)(Ve,{}),n&&(0,c.jsx)($e,{onClose:()=>r(!1),forceShow:!0}),e&&(0,c.jsx)(Ft,{onComplete:()=>{t(!1),localStorage.setItem("gm-weather-companion-setup-completed","true")}})]})})})})})};r.createRoot(document.getElementById("root")).render((0,c.jsx)(a.StrictMode,{children:(0,c.jsx)(zt,{})}))})();
//# sourceMappingURL=main.479dde38.js.map